# 心域(HeartSphere) - 详细测试用例

## 📋 测试用例说明

本文档包含详细的测试用例，每个用例包括：
- 测试编号
- 测试标题
- 前置条件
- 测试步骤
- 预期结果
- 实际结果（测试时填写）
- 优先级
- 状态（通过/失败/阻塞）

---

## 🔐 一、用户认证测试用例

### TC-AUTH-001: 正常登录
**优先级**: P0  
**前置条件**: 
- 已注册用户，用户名：testuser，密码：Test123456

**测试步骤**:
1. 打开应用
2. 点击"登录"按钮
3. 输入用户名：testuser
4. 输入密码：Test123456
5. 点击"登录"按钮

**预期结果**:
- 登录成功
- 跳转到主页面
- localStorage中保存了auth_token
- 显示用户昵称

**实际结果**: _______________  
**状态**: _______________

---

### TC-AUTH-002: 错误密码登录
**优先级**: P0  
**前置条件**: 
- 已注册用户，用户名：testuser

**测试步骤**:
1. 打开应用
2. 点击"登录"按钮
3. 输入用户名：testuser
4. 输入错误密码：WrongPass123
5. 点击"登录"按钮

**预期结果**:
- 登录失败
- 显示错误提示："登录失败，检查用户名和密码"
- 不跳转页面
- 不保存token

**实际结果**: _______________  
**状态**: _______________

---

### TC-AUTH-003: 空字段验证
**优先级**: P0  
**前置条件**: 无

**测试步骤**:
1. 打开应用
2. 点击"登录"按钮
3. 不输入任何内容
4. 点击"登录"按钮

**预期结果**:
- 显示提示："请输入用户名和密码"
- 不发送请求

**实际结果**: _______________  
**状态**: _______________

---

### TC-AUTH-004: 用户注册 - 正常流程
**优先级**: P0  
**前置条件**: 
- 系统未启用邀请码（或已有有效邀请码）

**测试步骤**:
1. 打开应用
2. 点击"注册"标签
3. 输入用户名：newuser001
4. 输入邮箱：newuser001@test.com
5. 输入密码：Test123456
6. 确认密码：Test123456
7. 输入昵称：新用户
8. 如果系统要求，输入邀请码
9. 点击"注册"按钮

**预期结果**:
- 注册成功
- 自动登录
- 跳转到主页面
- 显示欢迎信息（如果是首次登录）

**实际结果**: _______________  
**状态**: _______________

---

### TC-AUTH-005: 用户注册 - 密码不一致
**优先级**: P0  
**前置条件**: 无

**测试步骤**:
1. 打开应用
2. 点击"注册"标签
3. 输入用户名：newuser002
4. 输入邮箱：newuser002@test.com
5. 输入密码：Test123456
6. 确认密码：Test1234567（不一致）
7. 输入昵称：新用户
8. 点击"注册"按钮

**预期结果**:
- 显示错误提示："两次输入的密码不一致"
- 不发送注册请求
- 停留在注册页面

**实际结果**: _______________  
**状态**: _______________

---

### TC-AUTH-006: 用户注册 - 邮箱格式验证
**优先级**: P1  
**前置条件**: 无

**测试步骤**:
1. 打开应用
2. 点击"注册"标签
3. 输入用户名：newuser003
4. 输入无效邮箱：invalid-email
5. 输入密码：Test123456
6. 确认密码：Test123456
7. 输入昵称：新用户
8. 点击"注册"按钮

**预期结果**:
- 显示错误提示："请输入有效的邮箱地址"
- 不发送注册请求

**实际结果**: _______________  
**状态**: _______________

---

### TC-AUTH-007: 用户注册 - 用户名重复
**优先级**: P0  
**前置条件**: 
- 已存在用户：testuser

**测试步骤**:
1. 打开应用
2. 点击"注册"标签
3. 输入已存在的用户名：testuser
4. 输入邮箱：newemail@test.com
5. 输入密码：Test123456
6. 确认密码：Test123456
7. 输入昵称：新用户
8. 点击"注册"按钮

**预期结果**:
- 显示错误提示："用户名已存在"
- 不发送注册请求

**实际结果**: _______________  
**状态**: _______________

---

### TC-AUTH-008: 微信登录 - 二维码生成
**优先级**: P1  
**前置条件**: 
- 已配置微信登录

**测试步骤**:
1. 打开应用
2. 点击"微信登录"
3. 等待二维码生成

**预期结果**:
- 显示二维码
- 显示提示："使用微信扫码登录"
- 开始轮询登录状态

**实际结果**: _______________  
**状态**: _______________

---

### TC-AUTH-009: 微信登录 - 扫码成功
**优先级**: P1  
**前置条件**: 
- 已显示二维码

**测试步骤**:
1. 使用微信扫描二维码
2. 在手机上确认登录
3. 等待状态更新

**预期结果**:
- 状态从"waiting"变为"scanned"再变为"confirmed"
- 自动登录成功
- 跳转到主页面

**实际结果**: _______________  
**状态**: _______________

---

### TC-AUTH-010: Token过期处理
**优先级**: P0  
**前置条件**: 
- 已登录用户
- Token已过期（可通过修改系统时间或等待）

**测试步骤**:
1. 已登录状态下
2. 执行任何需要认证的操作（如获取角色列表）

**预期结果**:
- 检测到401错误
- 清除localStorage中的token
- 显示登录提示或跳转到登录页
- 保存当前页面状态（可选）

**实际结果**: _______________  
**状态**: _______________

---

## 🌍 二、世界管理测试用例

### TC-WORLD-001: 创建世界
**优先级**: P0  
**前置条件**: 
- 已登录用户

**测试步骤**:
1. 进入"真实世界"页面
2. 点击"创建世界"按钮
3. 输入世界名称：测试世界001
4. 输入世界描述：这是一个测试世界
5. 点击"保存"按钮

**预期结果**:
- 世界创建成功
- 显示在世界列表中
- 可以立即使用

**实际结果**: _______________  
**状态**: _______________

---

### TC-WORLD-002: 创建世界 - 空名称验证
**优先级**: P0  
**前置条件**: 
- 已登录用户

**测试步骤**:
1. 进入"真实世界"页面
2. 点击"创建世界"按钮
3. 不输入世界名称
4. 输入世界描述：这是一个测试世界
5. 点击"保存"按钮

**预期结果**:
- 显示错误提示："世界名称不能为空"
- 不创建世界

**实际结果**: _______________  
**状态**: _______________

---

### TC-WORLD-003: 编辑世界
**优先级**: P0  
**前置条件**: 
- 已登录用户
- 已存在世界：测试世界001

**测试步骤**:
1. 进入"真实世界"页面
2. 找到"测试世界001"
3. 点击编辑按钮
4. 修改世界名称：测试世界001-已修改
5. 修改世界描述：这是修改后的描述
6. 点击"保存"按钮

**预期结果**:
- 世界信息更新成功
- 列表中显示新名称
- 数据同步到服务器

**实际结果**: _______________  
**状态**: _______________

---

### TC-WORLD-004: 删除世界
**优先级**: P0  
**前置条件**: 
- 已登录用户
- 已存在世界：测试世界001
- 该世界下有场景和角色

**测试步骤**:
1. 进入"真实世界"页面
2. 找到"测试世界001"
3. 点击删除按钮
4. 在确认对话框中点击"确定"

**预期结果**:
- 显示确认对话框，说明删除影响
- 世界被软删除（移至回收站）
- 关联的场景和角色也被软删除
- 可以从回收站恢复

**实际结果**: _______________  
**状态**: _______________

---

### TC-WORLD-005: 世界列表显示
**优先级**: P1  
**前置条件**: 
- 已登录用户
- 已创建多个世界

**测试步骤**:
1. 进入"真实世界"页面
2. 查看世界列表

**预期结果**:
- 显示所有用户的世界
- 按创建时间或名称排序
- 显示世界名称和描述
- 可以点击进入世界

**实际结果**: _______________  
**状态**: _______________

---

## 🎭 三、场景管理测试用例

### TC-ERA-001: 从预置场景创建
**优先级**: P0  
**前置条件**: 
- 已登录用户
- 已选择世界

**测试步骤**:
1. 进入场景选择页面
2. 查看预置场景列表
3. 选择一个预置场景
4. 点击"使用此场景"或"创建场景"
5. 确认创建

**预期结果**:
- 场景创建成功
- 关联到当前世界
- 显示场景详情
- 可以添加角色

**实际结果**: _______________  
**状态**: _______________

---

### TC-ERA-002: 自定义创建场景
**优先级**: P0  
**前置条件**: 
- 已登录用户
- 已选择世界

**测试步骤**:
1. 进入场景选择页面
2. 点击"创建新场景"
3. 输入场景名称：测试场景001
4. 输入场景描述：这是一个测试场景
5. 选择图片上传方式（上传/URL/生成）
6. 上传或生成图片
7. 设置年份范围（可选）
8. 点击"保存"按钮

**预期结果**:
- 场景创建成功
- 图片正确显示
- 信息保存完整

**实际结果**: _______________  
**状态**: _______________

---

### TC-ERA-003: 场景图片上传
**优先级**: P1  
**前置条件**: 
- 已登录用户
- 正在创建或编辑场景

**测试步骤**:
1. 在场景编辑页面
2. 点击"上传图片"
3. 选择一张PNG图片（小于5MB）
4. 等待上传完成

**预期结果**:
- 显示上传进度
- 上传成功
- 图片预览正确
- 图片URL保存到服务器

**实际结果**: _______________  
**状态**: _______________

---

### TC-ERA-004: 场景图片上传 - 文件过大
**优先级**: P1  
**前置条件**: 
- 已登录用户
- 正在创建或编辑场景

**测试步骤**:
1. 在场景编辑页面
2. 点击"上传图片"
3. 选择一张大于10MB的图片
4. 尝试上传

**预期结果**:
- 显示错误提示："文件大小不能超过10MB"
- 不执行上传
- 允许重新选择文件

**实际结果**: _______________  
**状态**: _______________

---

### TC-ERA-005: AI分析图片生成场景
**优先级**: P2  
**前置条件**: 
- 已登录用户
- 已上传场景图片
- 已配置AI API Key

**测试步骤**:
1. 在场景编辑页面
2. 上传一张图片
3. 点击"AI分析图片"按钮
4. 等待分析完成

**预期结果**:
- 显示分析进度
- 自动填充场景名称
- 自动填充场景描述
- 如果分析失败，显示友好提示

**实际结果**: _______________  
**状态**: _______________

---

### TC-ERA-006: 编辑场景
**优先级**: P0  
**前置条件**: 
- 已登录用户
- 已存在场景：测试场景001

**测试步骤**:
1. 进入场景列表
2. 找到"测试场景001"
3. 点击编辑按钮
4. 修改场景名称：测试场景001-已修改
5. 修改场景描述
6. 更换封面图片
7. 点击"保存"按钮

**预期结果**:
- 场景信息更新成功
- 新图片正确显示
- 数据同步到服务器

**实际结果**: _______________  
**状态**: _______________

---

### TC-ERA-007: 删除场景
**优先级**: P0  
**前置条件**: 
- 已登录用户
- 已存在场景：测试场景001
- 该场景下有角色和剧本

**测试步骤**:
1. 进入场景列表
2. 找到"测试场景001"
3. 点击删除按钮
4. 在确认对话框中点击"确定"

**预期结果**:
- 显示确认对话框
- 场景被软删除
- 关联的角色和剧本也被软删除
- 可以从回收站恢复

**实际结果**: _______________  
**状态**: _______________

---

## 👤 四、角色管理测试用例

### TC-CHAR-001: 创建角色 - 基础信息
**优先级**: P0  
**前置条件**: 
- 已登录用户
- 已选择场景

**测试步骤**:
1. 进入角色选择页面
2. 点击"创建角色"
3. 输入角色姓名：测试角色001
4. 输入年龄：20
5. 选择性别：女
6. 输入角色：学生
7. 输入简介：这是一个测试角色
8. 点击"保存"按钮

**预期结果**:
- 角色创建成功
- 显示在角色列表中
- 基本信息保存完整

**实际结果**: _______________  
**状态**: _______________

---

### TC-CHAR-002: 创建角色 - 完整信息
**优先级**: P0  
**前置条件**: 
- 已登录用户
- 已选择场景

**测试步骤**:
1. 进入角色选择页面
2. 点击"创建角色"
3. 填写所有基础信息
4. 上传头像
5. 设置背景图
6. 设置主题色：#FF6B9D
7. 设置强调色：#FFB3D1
8. 输入首条消息：你好，我是测试角色
9. 输入系统指令：你是一个活泼开朗的大学生
10. 选择MBTI：ENFP
11. 添加标签：活泼、开朗、学生
12. 输入说话风格：轻松愉快，喜欢用表情
13. 输入口头禅：真的吗？、太好了！
14. 输入秘密：其实很害怕孤独
15. 输入动机：想要交到真正的朋友
16. 输入关系：和主角是同学关系
17. 选择语音名称：zh-CN-XiaoxiaoNeural
18. 点击"保存"按钮

**预期结果**:
- 所有信息保存成功
- 角色创建完整
- 可以立即开始对话

**实际结果**: _______________  
**状态**: _______________

---

### TC-CHAR-003: 角色头像生成
**优先级**: P1  
**前置条件**: 
- 已登录用户
- 正在创建角色
- 已配置AI API Key

**测试步骤**:
1. 在角色创建页面
2. 填写角色基本信息
3. 点击"AI生成头像"
4. 等待生成完成

**预期结果**:
- 显示生成进度
- 生成头像图片
- 头像预览正确
- 如果生成失败，显示友好提示

**实际结果**: _______________  
**状态**: _______________

---

### TC-CHAR-004: 编辑角色
**优先级**: P0  
**前置条件**: 
- 已登录用户
- 已存在角色：测试角色001

**测试步骤**:
1. 进入角色列表
2. 找到"测试角色001"
3. 点击编辑按钮
4. 修改角色姓名：测试角色001-已修改
5. 修改其他信息
6. 点击"保存"按钮

**预期结果**:
- 角色信息更新成功
- 修改后的信息正确显示
- 数据同步到服务器

**实际结果**: _______________  
**状态**: _______________

---

### TC-CHAR-005: 删除角色
**优先级**: P0  
**前置条件**: 
- 已登录用户
- 已存在角色：测试角色001
- 该角色有对话历史

**测试步骤**:
1. 进入角色列表
2. 找到"测试角色001"
3. 点击删除按钮
4. 在确认对话框中点击"确定"

**预期结果**:
- 显示确认对话框
- 角色被软删除
- 对话历史保留（可选）
- 可以从回收站恢复

**实际结果**: _______________  
**状态**: _______________

---

### TC-CHAR-006: 从预置角色创建
**优先级**: P1  
**前置条件**: 
- 已登录用户
- 已选择场景

**测试步骤**:
1. 进入角色选择页面
2. 查看预置角色列表
3. 选择一个预置角色
4. 点击"使用此角色"或"添加到场景"
5. 确认添加

**预期结果**:
- 角色添加到场景
- 可以立即开始对话
- 角色信息完整

**实际结果**: _______________  
**状态**: _______________

---

## 💬 五、对话聊天测试用例

### TC-CHAT-001: 发送文本消息
**优先级**: P0  
**前置条件**: 
- 已登录用户
- 已选择角色

**测试步骤**:
1. 进入对话页面
2. 在输入框中输入：你好，很高兴认识你
3. 点击"发送"按钮或按Enter键

**预期结果**:
- 消息显示在对话窗口中
- 显示发送时间
- 角色回复消息
- 消息保存到历史记录

**实际结果**: _______________  
**状态**: _______________

---

### TC-CHAT-002: 发送空消息
**优先级**: P0  
**前置条件**: 
- 已登录用户
- 已选择角色

**测试步骤**:
1. 进入对话页面
2. 不输入任何内容
3. 点击"发送"按钮

**预期结果**:
- 不发送消息
- 显示提示："请输入消息内容"（可选）
- 或按钮禁用状态

**实际结果**: _______________  
**状态**: _______________

---

### TC-CHAT-003: 发送超长消息
**优先级**: P1  
**前置条件**: 
- 已登录用户
- 已选择角色

**测试步骤**:
1. 进入对话页面
2. 输入超过5000字符的消息
3. 尝试发送

**预期结果**:
- 显示提示："消息长度不能超过5000字符"
- 或自动截断
- 或允许发送但提示可能影响体验

**实际结果**: _______________  
**状态**: _______________

---

### TC-CHAT-004: AI回复 - 正常情况
**优先级**: P0  
**前置条件**: 
- 已登录用户
- 已选择角色
- 已配置AI API Key

**测试步骤**:
1. 进入对话页面
2. 发送消息：你好
3. 等待AI回复

**预期结果**:
- 显示加载状态
- 收到角色回复
- 回复符合角色设定
- 回复时间合理（<10秒）

**实际结果**: _______________  
**状态**: _______________

---

### TC-CHAT-005: AI回复 - API失败
**优先级**: P0  
**前置条件**: 
- 已登录用户
- 已选择角色
- API Key无效或网络中断

**测试步骤**:
1. 进入对话页面
2. 发送消息：你好
3. 等待响应

**预期结果**:
- 显示错误提示
- 提示信息友好（如："AI服务暂时不可用，请稍后重试"）
- 提供重试按钮
- 不丢失用户消息

**实际结果**: _______________  
**状态**: _______________

---

### TC-CHAT-006: 对话历史保存
**优先级**: P0  
**前置条件**: 
- 已登录用户
- 已选择角色
- 已有对话历史

**测试步骤**:
1. 进入对话页面
2. 发送几条消息
3. 退出对话页面
4. 重新进入对话页面

**预期结果**:
- 对话历史正确加载
- 显示所有历史消息
- 消息顺序正确
- 时间戳正确

**实际结果**: _______________  
**状态**: _______________

---

### TC-CHAT-007: 对话历史同步
**优先级**: P0  
**前置条件**: 
- 已登录用户
- 已选择角色
- 已有对话历史

**测试步骤**:
1. 在设备A上发送消息
2. 在设备B上登录同一账号
3. 进入同一角色的对话页面

**预期结果**:
- 对话历史同步到设备B
- 显示所有消息
- 消息顺序正确

**实际结果**: _______________  
**状态**: _______________

---

### TC-CHAT-008: 剧本模式 - 开始剧本
**优先级**: P0  
**前置条件**: 
- 已登录用户
- 已选择场景
- 已创建剧本

**测试步骤**:
1. 进入场景页面
2. 选择已创建的剧本
3. 点击"开始剧本"

**预期结果**:
- 显示剧本开场场景
- 显示选项按钮
- 进入剧本模式

**实际结果**: _______________  
**状态**: _______________

---

### TC-CHAT-009: 剧本模式 - 选择选项
**优先级**: P0  
**前置条件**: 
- 已登录用户
- 已开始剧本

**测试步骤**:
1. 在剧本对话页面
2. 查看选项
3. 点击一个选项

**预期结果**:
- 跳转到下一个节点
- 显示新的场景描述
- 显示新的选项
- 状态正确保存

**实际结果**: _______________  
**状态**: _______________

---

### TC-CHAT-010: 对话风格切换
**优先级**: P2  
**前置条件**: 
- 已登录用户
- 已选择角色
- 已有对话历史

**测试步骤**:
1. 进入设置页面
2. 选择对话风格：沉浸小说
3. 保存设置
4. 进入对话页面
5. 发送消息

**预期结果**:
- 新消息使用新风格
- 历史消息显示正常（可选：保持原风格或转换）

**实际结果**: _______________  
**状态**: _______________

---

## 📖 六、剧本构建器测试用例

### TC-SCENARIO-001: 创建剧本
**优先级**: P0  
**前置条件**: 
- 已登录用户
- 已选择场景

**测试步骤**:
1. 进入剧本构建器
2. 输入剧本标题：测试剧本001
3. 输入剧本描述：这是一个测试剧本
4. 创建起始节点
5. 添加节点内容
6. 添加选项
7. 设置选项跳转
8. 点击"保存"按钮

**预期结果**:
- 剧本创建成功
- 显示在剧本列表中
- 可以立即使用

**实际结果**: _______________  
**状态**: _______________

---

### TC-SCENARIO-002: 添加节点
**优先级**: P0  
**前置条件**: 
- 已登录用户
- 正在编辑剧本

**测试步骤**:
1. 在剧本构建器中
2. 点击"添加节点"按钮
3. 输入节点标题：新场景
4. 输入节点提示词：描述接下来发生的事情
5. 点击"保存节点"

**预期结果**:
- 节点创建成功
- 显示在节点列表中
- 可以编辑和连接

**实际结果**: _______________  
**状态**: _______________

---

### TC-SCENARIO-003: 添加选项
**优先级**: P0  
**前置条件**: 
- 已登录用户
- 正在编辑剧本节点

**测试步骤**:
1. 在节点编辑页面
2. 点击"添加选项"按钮
3. 输入选项文本：选择A
4. 选择跳转节点：节点2
5. 保存

**预期结果**:
- 选项添加成功
- 显示在选项列表中
- 跳转关系正确

**实际结果**: _______________  
**状态**: _______________

---

### TC-SCENARIO-004: AI生成剧本
**优先级**: P1  
**前置条件**: 
- 已登录用户
- 已配置AI API Key

**测试步骤**:
1. 进入剧本构建器
2. 点击"AI生成"按钮
3. 输入提示词：一个浪漫的校园爱情故事
4. 点击"生成"按钮
5. 等待生成完成

**预期结果**:
- 显示生成进度
- 生成完整剧本
- 包含多个节点和选项
- 剧本结构合理

**实际结果**: _______________  
**状态**: _______________

---

### TC-SCENARIO-005: 节点验证
**优先级**: P0  
**前置条件**: 
- 已登录用户
- 正在编辑剧本

**测试步骤**:
1. 创建一个节点
2. 添加选项，但设置跳转到不存在的节点
3. 尝试保存剧本

**预期结果**:
- 显示验证错误："选项跳转的节点不存在"
- 不允许保存
- 高亮显示错误选项

**实际结果**: _______________  
**状态**: _______________

---

### TC-SCENARIO-006: 编辑剧本
**优先级**: P0  
**前置条件**: 
- 已登录用户
- 已存在剧本：测试剧本001

**测试步骤**:
1. 进入剧本列表
2. 找到"测试剧本001"
3. 点击编辑按钮
4. 修改剧本标题
5. 添加新节点
6. 修改现有节点
7. 点击"保存"按钮

**预期结果**:
- 剧本更新成功
- 修改保存完整
- 数据同步到服务器

**实际结果**: _______________  
**状态**: _______________

---

### TC-SCENARIO-007: 删除剧本
**优先级**: P0  
**前置条件**: 
- 已登录用户
- 已存在剧本：测试剧本001

**测试步骤**:
1. 进入剧本列表
2. 找到"测试剧本001"
3. 点击删除按钮
4. 在确认对话框中点击"确定"

**预期结果**:
- 显示确认对话框
- 剧本被软删除
- 可以从回收站恢复

**实际结果**: _______________  
**状态**: _______________

---

## 📔 七、日记功能测试用例

### TC-JOURNAL-001: 创建日记
**优先级**: P0  
**前置条件**: 
- 已登录用户

**测试步骤**:
1. 进入"真实世界"页面
2. 点击"写日记"按钮
3. 输入标题：今天的心情
4. 输入内容：今天是一个美好的一天...
5. 点击"保存"按钮

**预期结果**:
- 日记创建成功
- 显示在日记列表中
- 按时间排序

**实际结果**: _______________  
**状态**: _______________

---

### TC-JOURNAL-002: 添加图片到日记
**优先级**: P1  
**前置条件**: 
- 已登录用户
- 正在创建或编辑日记

**测试步骤**:
1. 在日记编辑页面
2. 输入标题和内容
3. 点击"添加图片"
4. 选择图片文件
5. 等待上传完成
6. 点击"保存"按钮

**预期结果**:
- 图片上传成功
- 显示在日记中
- 图片URL保存

**实际结果**: _______________  
**状态**: _______________

---

### TC-JOURNAL-003: AI生成日记图片
**优先级**: P2  
**前置条件**: 
- 已登录用户
- 正在创建日记
- 已配置AI API Key

**测试步骤**:
1. 在日记编辑页面
2. 输入标题和内容
3. 点击"AI生成图片"
4. 等待生成完成

**预期结果**:
- 显示生成进度
- 生成图片
- 图片与内容相关
- 如果生成失败，显示友好提示

**实际结果**: _______________  
**状态**: _______________

---

### TC-JOURNAL-004: 添加标签
**优先级**: P1  
**前置条件**: 
- 已登录用户
- 正在创建或编辑日记

**测试步骤**:
1. 在日记编辑页面
2. 输入标题和内容
3. 在标签输入框中输入：#心情 #工作
4. 点击"保存"按钮

**预期结果**:
- 标签保存成功
- 可以按标签筛选日记
- 标签显示在日记列表中

**实际结果**: _______________  
**状态**: _______________

---

### TC-JOURNAL-005: 日记探索 - 镜像洞察
**优先级**: P2  
**前置条件**: 
- 已登录用户
- 已存在日记

**测试步骤**:
1. 进入日记列表
2. 选择一篇日记
3. 点击"探索"按钮
4. 选择"镜像洞察"
5. 等待生成

**预期结果**:
- 显示生成进度
- 生成洞察内容
- 洞察内容有深度
- 如果生成失败，显示友好提示

**实际结果**: _______________  
**状态**: _______________

---

### TC-JOURNAL-006: 日记探索 - 角色回响
**优先级**: P2  
**前置条件**: 
- 已登录用户
- 已存在日记
- 已有关联角色

**测试步骤**:
1. 进入日记列表
2. 选择一篇日记
3. 点击"探索"按钮
4. 选择"角色回响"
5. 选择角色
6. 等待生成

**预期结果**:
- 显示生成进度
- 生成角色回响
- 回响符合角色设定
- 如果生成失败，显示友好提示

**实际结果**: _______________  
**状态**: _______________

---

### TC-JOURNAL-007: 搜索日记
**优先级**: P1  
**前置条件**: 
- 已登录用户
- 已有多篇日记

**测试步骤**:
1. 进入日记列表
2. 在搜索框中输入关键词：心情
3. 查看搜索结果

**预期结果**:
- 显示包含关键词的日记
- 高亮显示关键词
- 搜索结果准确

**实际结果**: _______________  
**状态**: _______________

---

### TC-JOURNAL-008: 按标签筛选
**优先级**: P1  
**前置条件**: 
- 已登录用户
- 已有多篇带标签的日记

**测试步骤**:
1. 进入日记列表
2. 点击标签：#心情
3. 查看筛选结果

**预期结果**:
- 只显示包含该标签的日记
- 可以清除筛选
- 筛选结果准确

**实际结果**: _______________  
**状态**: _______________

---

### TC-JOURNAL-009: 编辑日记
**优先级**: P0  
**前置条件**: 
- 已登录用户
- 已存在日记：今天的心情

**测试步骤**:
1. 进入日记列表
2. 找到"今天的心情"
3. 点击编辑按钮
4. 修改内容
5. 点击"保存"按钮

**预期结果**:
- 日记更新成功
- 修改保存完整
- 数据同步到服务器

**实际结果**: _______________  
**状态**: _______________

---

### TC-JOURNAL-010: 删除日记
**优先级**: P0  
**前置条件**: 
- 已登录用户
- 已存在日记：今天的心情

**测试步骤**:
1. 进入日记列表
2. 找到"今天的心情"
3. 点击删除按钮
4. 在确认对话框中点击"确定"

**预期结果**:
- 显示确认对话框
- 日记被删除
- 从列表中移除

**实际结果**: _______________  
**状态**: _______________

---

## 📧 八、邮箱功能测试用例

### TC-MAIL-001: 接收邮件
**优先级**: P1  
**前置条件**: 
- 已登录用户
- 系统已发送邮件

**测试步骤**:
1. 进入应用
2. 查看邮箱图标
3. 点击邮箱图标
4. 查看邮件列表

**预期结果**:
- 显示未读邮件数量
- 显示邮件列表
- 显示发件人、主题、时间
- 未读邮件有标记

**实际结果**: _______________  
**状态**: _______________

---

### TC-MAIL-002: 阅读邮件
**优先级**: P1  
**前置条件**: 
- 已登录用户
- 已有未读邮件

**测试步骤**:
1. 进入邮箱
2. 点击一封未读邮件
3. 查看邮件内容

**预期结果**:
- 显示完整邮件内容
- 邮件标记为已读
- 未读数量更新

**实际结果**: _______________  
**状态**: _______________

---

### TC-MAIL-003: 删除邮件
**优先级**: P1  
**前置条件**: 
- 已登录用户
- 已有邮件

**测试步骤**:
1. 进入邮箱
2. 选择一封邮件
3. 点击删除按钮
4. 确认删除

**预期结果**:
- 邮件被删除
- 从列表中移除
- 可以恢复（可选）

**实际结果**: _______________  
**状态**: _______________

---

## 💎 九、会员系统测试用例

### TC-MEMBERSHIP-001: 查看会员信息
**优先级**: P1  
**前置条件**: 
- 已登录用户

**测试步骤**:
1. 进入设置页面
2. 点击"会员"或"订阅"
3. 查看会员信息

**预期结果**:
- 显示会员类型
- 显示积分余额
- 显示会员状态
- 显示到期时间（如果是付费会员）

**实际结果**: _______________  
**状态**: _______________

---

### TC-MEMBERSHIP-002: 查看订阅计划
**优先级**: P1  
**前置条件**: 
- 已登录用户

**测试步骤**:
1. 进入会员页面
2. 查看订阅计划列表
3. 切换计费周期（月付/年付）

**预期结果**:
- 显示所有可用计划
- 显示价格和功能
- 按计费周期筛选正确
- 当前计划有标记

**实际结果**: _______________  
**状态**: _______________

---

### TC-MEMBERSHIP-003: 创建支付订单
**优先级**: P1  
**前置条件**: 
- 已登录用户
- 已选择订阅计划

**测试步骤**:
1. 进入会员页面
2. 选择一个订阅计划
3. 选择支付方式（微信/支付宝）
4. 点击"立即购买"
5. 确认订单信息

**预期结果**:
- 创建订单成功
- 显示订单号
- 显示支付二维码（微信）或支付链接（支付宝）
- 开始轮询订单状态

**实际结果**: _______________  
**状态**: _______________

---

### TC-MEMBERSHIP-004: 支付成功
**优先级**: P1  
**前置条件**: 
- 已登录用户
- 已创建支付订单

**测试步骤**:
1. 扫描支付二维码或打开支付链接
2. 完成支付
3. 等待订单状态更新

**预期结果**:
- 订单状态更新为"已支付"
- 会员状态更新
- 积分到账
- 显示成功提示

**实际结果**: _______________  
**状态**: _______________

---

### TC-MEMBERSHIP-005: 支付失败
**优先级**: P1  
**前置条件**: 
- 已登录用户
- 已创建支付订单

**测试步骤**:
1. 创建支付订单
2. 模拟支付失败（取消支付或余额不足）

**预期结果**:
- 订单状态更新为"支付失败"
- 显示失败提示
- 允许重新支付
- 订单可以取消

**实际结果**: _______________  
**状态**: _______________

---

## 🗑️ 十、回收站功能测试用例

### TC-RECYCLE-001: 查看回收站
**优先级**: P1  
**前置条件**: 
- 已登录用户
- 已有删除的世界/场景/角色/剧本

**测试步骤**:
1. 进入设置页面
2. 点击"回收站"
3. 查看回收站内容

**预期结果**:
- 显示所有已删除的项目
- 按类型分类显示
- 显示删除时间
- 可以恢复或永久删除

**实际结果**: _______________  
**状态**: _______________

---

### TC-RECYCLE-002: 恢复项目
**优先级**: P1  
**前置条件**: 
- 已登录用户
- 回收站中有已删除的项目

**测试步骤**:
1. 进入回收站
2. 选择一个项目
3. 点击"恢复"按钮
4. 确认恢复

**预期结果**:
- 项目恢复成功
- 从回收站移除
- 显示在原位置
- 关联数据也恢复

**实际结果**: _______________  
**状态**: _______________

---

### TC-RECYCLE-003: 永久删除
**优先级**: P1  
**前置条件**: 
- 已登录用户
- 回收站中有已删除的项目

**测试步骤**:
1. 进入回收站
2. 选择一个项目
3. 点击"永久删除"按钮
4. 在确认对话框中点击"确定"

**预期结果**:
- 显示确认对话框，说明无法恢复
- 项目被永久删除
- 从回收站移除
- 无法恢复

**实际结果**: _______________  
**状态**: _______________

---

## 🔧 十一、管理后台测试用例

### TC-ADMIN-001: 管理员登录
**优先级**: P0  
**前置条件**: 
- 已有管理员账号

**测试步骤**:
1. 访问管理后台登录页面
2. 输入管理员用户名
3. 输入管理员密码
4. 点击"登录"按钮

**预期结果**:
- 登录成功
- 跳转到管理后台首页
- Token保存
- 显示管理员信息

**实际结果**: _______________  
**状态**: _______________

---

### TC-ADMIN-002: 系统世界管理
**优先级**: P0  
**前置条件**: 
- 已登录管理员

**测试步骤**:
1. 进入"系统世界"管理页面
2. 查看世界列表
3. 创建新世界
4. 编辑现有世界
5. 删除世界

**预期结果**:
- 所有操作成功
- 数据正确保存
- 列表更新及时

**实际结果**: _______________  
**状态**: _______________

---

### TC-ADMIN-003: 系统场景管理
**优先级**: P0  
**前置条件**: 
- 已登录管理员

**测试步骤**:
1. 进入"系统场景"管理页面
2. 查看场景列表
3. 创建新场景
4. 编辑现有场景
5. 删除场景

**预期结果**:
- 所有操作成功
- 数据正确保存
- 图片上传正常

**实际结果**: _______________  
**状态**: _______________

---

### TC-ADMIN-004: 系统角色管理
**优先级**: P0  
**前置条件**: 
- 已登录管理员

**测试步骤**:
1. 进入"系统角色"管理页面
2. 查看角色列表
3. 创建新角色
4. 编辑现有角色
5. 删除角色

**预期结果**:
- 所有操作成功
- 数据正确保存
- 完整信息保存

**实际结果**: _______________  
**状态**: _______________

---

### TC-ADMIN-005: 邀请码管理
**优先级**: P1  
**前置条件**: 
- 已登录管理员

**测试步骤**:
1. 进入"邀请码"管理页面
2. 生成新邀请码（数量：10，过期时间：30天后）
3. 查看邀请码列表
4. 查看使用情况

**预期结果**:
- 生成成功
- 显示所有邀请码
- 显示使用状态
- 显示过期时间

**实际结果**: _______________  
**状态**: _______________

---

### TC-ADMIN-006: 系统配置
**优先级**: P1  
**前置条件**: 
- 已登录管理员

**测试步骤**:
1. 进入"系统配置"页面
2. 切换"邀请码开关"
3. 配置微信登录信息
4. 保存配置

**预期结果**:
- 配置保存成功
- 立即生效
- 前端正确响应配置变化

**实际结果**: _______________  
**状态**: _______________

---

## 📱 十二、移动端测试用例

### TC-MOBILE-001: 移动端适配
**优先级**: P1  
**前置条件**: 
- 使用移动设备或浏览器开发者工具

**测试步骤**:
1. 在移动设备上打开应用
2. 测试各个页面
3. 测试各种操作

**预期结果**:
- 页面布局适配移动端
- 按钮大小适合触摸
- 文字大小合适
- 滚动流畅

**实际结果**: _______________  
**状态**: _______________

---

### TC-MOBILE-002: 触摸交互
**优先级**: P1  
**前置条件**: 
- 使用移动设备

**测试步骤**:
1. 测试点击操作
2. 测试滑动操作
3. 测试长按操作
4. 测试输入操作

**预期结果**:
- 所有操作响应正常
- 没有误触
- 输入体验良好

**实际结果**: _______________  
**状态**: _______________

---

## 🔒 十三、安全测试用例

### TC-SEC-001: SQL注入测试
**优先级**: P0  
**前置条件**: 
- 已登录用户

**测试步骤**:
1. 在各种输入框中输入SQL注入代码：`'; DROP TABLE users; --`
2. 提交表单
3. 检查系统响应

**预期结果**:
- 输入被转义或过滤
- 不执行SQL命令
- 显示错误提示（如果是无效输入）
- 数据库不受影响

**实际结果**: _______________  
**状态**: _______________

---

### TC-SEC-002: XSS攻击测试
**优先级**: P0  
**前置条件**: 
- 已登录用户

**测试步骤**:
1. 在各种输入框中输入XSS代码：`<script>alert('XSS')</script>`
2. 提交表单
3. 查看显示结果

**预期结果**:
- 脚本被转义
- 不执行脚本
- 显示为纯文本
- 页面不受影响

**实际结果**: _______________  
**状态**: _______________

---

### TC-SEC-003: 权限验证
**优先级**: P0  
**前置条件**: 
- 已登录用户A
- 用户B有数据

**测试步骤**:
1. 用户A登录
2. 尝试访问用户B的数据（通过修改URL或API参数）
3. 检查系统响应

**预期结果**:
- 返回403错误或空数据
- 不显示用户B的数据
- 记录安全日志（可选）

**实际结果**: _______________  
**状态**: _______________

---

### TC-SEC-004: Token安全
**优先级**: P0  
**前置条件**: 
- 已登录用户

**测试步骤**:
1. 查看localStorage中的token
2. 尝试使用过期的token访问API
3. 尝试使用其他用户的token

**预期结果**:
- 过期token被拒绝
- 其他用户的token被拒绝
- 返回401错误

**实际结果**: _______________  
**状态**: _______________

---

## ⚡ 十四、性能测试用例

### TC-PERF-001: 页面加载性能
**优先级**: P1  
**前置条件**: 
- 使用Chrome DevTools

**测试步骤**:
1. 打开Chrome DevTools
2. 切换到Network标签
3. 清除缓存
4. 刷新页面
5. 记录加载时间

**预期结果**:
- 首屏加载时间 < 3秒
- 所有资源加载完成 < 5秒
- 没有阻塞资源

**实际结果**: _______________  
**状态**: _______________

---

### TC-PERF-002: API响应时间
**优先级**: P1  
**前置条件**: 
- 已登录用户

**测试步骤**:
1. 打开Chrome DevTools
2. 切换到Network标签
3. 执行各种操作（获取列表、创建、更新、删除）
4. 记录API响应时间

**预期结果**:
- 简单查询 < 200ms
- 复杂查询 < 500ms
- 创建/更新操作 < 1秒

**实际结果**: _______________  
**状态**: _______________

---

### TC-PERF-003: 大量数据渲染
**优先级**: P1  
**前置条件**: 
- 已登录用户
- 已创建大量数据（100+世界/场景/角色）

**测试步骤**:
1. 进入列表页面
2. 查看渲染性能
3. 滚动列表
4. 检查是否有卡顿

**预期结果**:
- 列表渲染流畅
- 滚动无卡顿
- 使用虚拟滚动或分页（如果有）

**实际结果**: _______________  
**状态**: _______________

---

## 📊 测试执行记录

### 测试环境
- **测试日期**: _______________
- **测试人员**: _______________
- **浏览器**: _______________
- **操作系统**: _______________
- **后端版本**: _______________
- **前端版本**: _______________

### 测试统计
- **总用例数**: 100+
- **已执行**: _______________
- **通过**: _______________
- **失败**: _______________
- **阻塞**: _______________
- **通过率**: _______________

### 问题汇总
| 问题编号 | 测试用例 | 问题描述 | 优先级 | 状态 |
|---------|---------|---------|--------|------|
| BUG-001 | TC-AUTH-XXX | 问题描述 | P0 | 待修复 |
| BUG-002 | TC-WORLD-XXX | 问题描述 | P1 | 已修复 |

---

**文档版本**: v1.0  
**最后更新**: 2025年12月  
**测试工程师**: AI Assistant


