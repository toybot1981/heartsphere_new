# 数字生命体交互系统（心域）源代码清单

## 一、前端源代码文件清单

### 1.1 核心入口文件
```
frontend/
├── index.tsx                          # React应用入口文件
├── index.html                         # HTML模板文件
├── App.tsx                            # 主应用组件（约2600行）
├── types.ts                           # TypeScript类型定义文件
├── constants.ts                       # 常量定义文件
└── vite.config.ts                     # Vite构建配置文件
```

### 1.2 组件文件（components/）
```
frontend/components/
├── EntryPoint.tsx                     # 应用入口点组件
├── LoginModal.tsx                     # 用户登录注册模态框
├── CharacterCard.tsx                  # 角色卡片组件
├── PersonaCard.tsx                    # 人格卡片组件
├── CharacterConstructorModal.tsx      # 角色创建编辑组件
├── ChatWindow.tsx                     # 聊天窗口组件
├── ScenarioBuilder.tsx                # 场景构建器组件
├── SceneCard.tsx                      # 场景卡片组件
├── EraSelectionModal.tsx              # 时代选择模态框
├── EraConstructorModal.tsx            # 时代创建编辑组件
├── EraMemoryModal.tsx                 # 时代记忆模态框
├── RealWorldJournal.tsx               # 现实世界日记组件
├── RealWorldScreen.tsx                # 现实世界界面组件
├── ConnectionSpace.tsx                # 连接空间组件
├── MailboxModal.tsx                   # 邮箱模态框
├── MembershipModal.tsx                # 会员订阅模态框
├── SettingsModal.tsx                  # 设置模态框
├── RecycleBinModal.tsx                # 回收站模态框
├── ResourcePicker.tsx                 # 资源选择器
├── WelcomeOverlay.tsx                 # 欢迎覆盖层
├── DebugConsole.tsx                   # 调试控制台
├── AdminScreen.tsx                    # 管理后台主界面
├── Button.tsx                         # 按钮组件
└── admin/
    ├── AdminScreen.tsx                # 管理后台界面
    └── components/
        └── AdminUIComponents.tsx      # 管理后台UI组件
```

### 1.3 移动端组件（mobile/）
```
frontend/mobile/
├── MobileApp.tsx                      # 移动端主应用
├── MobileCharacterSelection.tsx       # 移动端角色选择
├── MobileProfile.tsx                  # 移动端个人资料
├── MobileRealWorld.tsx                # 移动端现实世界
├── MobileScenarioBuilder.tsx          # 移动端场景构建
├── MobileSceneSelection.tsx           # 移动端场景选择
└── components/
    └── MobileBottomNav.tsx            # 移动端底部导航
```

### 1.4 服务层文件（services/）
```
frontend/services/
├── api.ts                             # 后端API调用服务
├── gemini.ts                          # Google Gemini API集成服务
├── storage.ts                         # 本地存储服务
└── syncService.ts                     # 数据同步服务
```

### 1.5 工具函数（utils/）
```
frontend/utils/
├── promptTemplates.ts                # 提示词模板工具
└── journalTemplates.ts                # 日记模板工具
```

### 1.6 测试文件（src/__tests__/）
```
frontend/src/__tests__/
├── setup.ts                           # 测试环境配置
├── MembershipModal.test.tsx           # 会员模态框测试
└── membershipApi.test.ts              # 会员API测试
```

### 1.7 配置文件
```
frontend/
├── package.json                       # 项目依赖配置
├── package-lock.json                  # 依赖锁定文件
├── tsconfig.json                      # TypeScript编译配置
├── tsconfig.node.json                 # Node环境TypeScript配置
├── jest.config.js                     # Jest测试配置
└── deploy.sh                          # 部署脚本
```

---

## 二、后端源代码文件清单

### 2.1 应用入口
```
backend/src/main/java/com/heartsphere/
└── HeartSphereApplication.java        # Spring Boot应用主类
```

### 2.2 实体类（entity/）
```
backend/src/main/java/com/heartsphere/entity/
├── User.java                          # 用户实体类
├── World.java                         # 世界实体类
├── Era.java                           # 时代切片实体类
├── Character.java                     # 角色实体类
├── Script.java                        # 对话脚本实体类
├── JournalEntry.java                  # 日记实体类
├── Membership.java                    # 会员实体类
├── SubscriptionPlan.java              # 订阅计划实体类
├── PointTransaction.java              # 积分交易实体类
└── PaymentOrder.java                  # 支付订单实体类
```

### 2.3 数据传输对象（dto/）
```
backend/src/main/java/com/heartsphere/dto/
├── UserDTO.java                       # 用户数据传输对象
├── WorldDTO.java                      # 世界数据传输对象
├── EraDTO.java                        # 时代数据传输对象
├── CharacterDTO.java                  # 角色数据传输对象
├── ScriptDTO.java                     # 脚本数据传输对象
├── JournalEntryDTO.java               # 日记数据传输对象
├── LoginRequest.java                  # 登录请求对象
├── RegisterRequest.java               # 注册请求对象
└── AuthResponse.java                  # 认证响应对象
```

### 2.4 控制器（controller/）
```
backend/src/main/java/com/heartsphere/controller/
├── AuthController.java                # 用户认证控制器
├── WorldController.java               # 世界管理控制器
├── EraController.java                 # 时代管理控制器
├── CharacterController.java           # 角色管理控制器
├── ScriptController.java              # 脚本管理控制器
├── JournalEntryController.java        # 日记管理控制器
├── MembershipController.java          # 会员管理控制器
├── PaymentController.java             # 支付管理控制器
├── ImageController.java               # 图片管理控制器
├── ResourceController.java            # 资源管理控制器
├── RecycleBinController.java          # 回收站管理控制器
└── WeChatController.java              # 微信相关控制器
```

### 2.5 服务层（service/）
```
backend/src/main/java/com/heartsphere/service/
├── InitializationService.java         # 初始化服务
├── MembershipService.java             # 会员服务
├── PaymentService.java                # 支付服务
├── ImageStorageService.java           # 图片存储服务
└── WeChatAuthService.java            # 微信认证服务
```

### 2.6 数据访问层（repository/）
```
backend/src/main/java/com/heartsphere/repository/
├── UserRepository.java                # 用户数据访问接口
├── WorldRepository.java               # 世界数据访问接口
├── EraRepository.java                 # 时代数据访问接口
├── CharacterRepository.java           # 角色数据访问接口
├── ScriptRepository.java              # 脚本数据访问接口
├── JournalEntryRepository.java       # 日记数据访问接口
├── MembershipRepository.java          # 会员数据访问接口
├── SubscriptionPlanRepository.java     # 订阅计划数据访问接口
├── PointTransactionRepository.java    # 积分交易数据访问接口
└── PaymentOrderRepository.java        # 支付订单数据访问接口
```

### 2.7 安全模块（security/）
```
backend/src/main/java/com/heartsphere/security/
├── JwtAuthenticationFilter.java       # JWT认证过滤器
├── UserDetailsImpl.java               # 用户详情实现类
└── UserDetailsServiceImpl.java        # 用户详情服务实现
```

### 2.8 配置类（config/）
```
backend/src/main/java/com/heartsphere/config/
├── WebSecurityConfig.java             # Spring Security配置
└── WebMvcConfig.java                  # Web MVC配置
```

### 2.9 工具类（utils/）
```
backend/src/main/java/com/heartsphere/utils/
├── JwtUtils.java                      # JWT工具类
└── DTOMapper.java                     # DTO映射工具
```

### 2.10 管理后台模块（admin/）
```
backend/src/main/java/com/heartsphere/admin/
├── entity/
│   ├── SystemWorld.java               # 系统世界实体
│   ├── SystemEra.java                 # 系统时代实体
│   ├── SystemCharacter.java          # 系统角色实体
│   ├── SystemResource.java            # 系统资源实体
│   ├── SystemAdmin.java               # 系统管理员实体
│   ├── SystemConfig.java              # 系统配置实体
│   └── InviteCode.java                # 邀请码实体
├── controller/
│   ├── AdminAuthController.java       # 管理员认证控制器
│   └── AdminSystemDataController.java # 系统数据管理控制器
├── service/
│   ├── AdminAuthService.java          # 管理员认证服务
│   ├── SystemDataService.java         # 系统数据服务
│   ├── SystemResourceService.java     # 系统资源服务
│   ├── SystemConfigService.java       # 系统配置服务
│   ├── InviteCodeService.java         # 邀请码服务
│   └── AdminInitializationService.java # 管理员初始化服务
├── dto/
│   ├── AdminLoginRequest.java          # 管理员登录请求
│   ├── AdminLoginResponse.java         # 管理员登录响应
│   ├── SystemWorldDTO.java             # 系统世界DTO
│   ├── SystemEraDTO.java               # 系统时代DTO
│   ├── SystemCharacterDTO.java        # 系统角色DTO
│   ├── SystemResourceDTO.java         # 系统资源DTO
│   ├── SubscriptionPlanDTO.java        # 订阅计划DTO
│   ├── InviteCodeDTO.java              # 邀请码DTO
│   └── GenerateInviteCodeRequest.java  # 生成邀请码请求
└── repository/
    ├── SystemWorldRepository.java      # 系统世界数据访问
    ├── SystemEraRepository.java        # 系统时代数据访问
    ├── SystemCharacterRepository.java  # 系统角色数据访问
    ├── SystemResourceRepository.java   # 系统资源数据访问
    ├── SystemAdminRepository.java      # 系统管理员数据访问
    ├── SystemConfigRepository.java     # 系统配置数据访问
    └── InviteCodeRepository.java       # 邀请码数据访问
```

### 2.11 配置文件
```
backend/
├── pom.xml                            # Maven项目配置文件
└── src/main/resources/
    ├── application.yml                 # 应用配置文件
    └── db/migration/                  # 数据库迁移脚本
        └── *.sql                      # SQL脚本文件
```

---

## 三、AI Agent服务源代码文件清单

### 3.1 应用入口
```
aiagent/src/main/java/com/heartsphere/aiagent/
└── AiAgentApplication.java            # AI Agent服务主类
```

### 3.2 Agent核心（agent/）
```
aiagent/src/main/java/com/heartsphere/aiagent/agent/
├── Agent.java                         # Agent核心类
└── AgentRegistry.java                 # Agent注册表
```

### 3.3 模型适配器（adapter/）
```
aiagent/src/main/java/com/heartsphere/aiagent/adapter/
├── ModelAdapter.java                  # 模型适配器接口
├── AlibabaAdapter.java                # 阿里云通义千问适配器
├── OpenAIAdapter.java                 # OpenAI适配器
└── OllamaAdapter.java                 # Ollama适配器
```

### 3.4 工作流引擎（graph/）
```
aiagent/src/main/java/com/heartsphere/aiagent/graph/
└── WorkflowBuilder.java               # 工作流构建器
```

### 3.5 工具集成（tool/）
```
aiagent/src/main/java/com/heartsphere/aiagent/tool/
├── Tool.java                          # 工具接口
├── ToolRegistry.java                  # 工具注册表
├── DataSearchTool.java                # 数据搜索工具
└── ChartGeneratorTool.java            # 图表生成工具
```

### 3.6 工作流定义（workflow/）
```
aiagent/src/main/java/com/heartsphere/aiagent/workflow/
└── [工作流定义文件]                    # 工作流定义类
```

### 3.7 控制器（controller/）
```
aiagent/src/main/java/com/heartsphere/aiagent/controller/
├── AgentController.java               # Agent管理控制器
└── [其他控制器文件]
```

### 3.8 服务（service/）
```
aiagent/src/main/java/com/heartsphere/aiagent/service/
└── AgentService.java                  # Agent服务
```

### 3.9 配置（config/）
```
aiagent/src/main/java/com/heartsphere/aiagent/config/
└── AiConfig.java                      # AI配置类
```

### 3.10 模型和实体（model/、entity/）
```
aiagent/src/main/java/com/heartsphere/aiagent/
├── model/
│   └── [数据模型文件]
├── entity/
│   └── [实体类文件]
└── repository/
    └── [数据访问接口]
```

### 3.11 MCP相关（mcp/）
```
aiagent/src/main/java/com/heartsphere/aiagent/mcp/
└── [MCP相关文件]
```

### 3.12 配置文件
```
aiagent/
├── pom.xml                            # Maven项目配置文件
└── src/main/resources/
    ├── application.yml                 # 应用配置文件
    └── static/
        └── index.html                 # 静态资源
```

---

## 四、源代码统计

### 4.1 文件数量统计
- **前端源代码文件**：约60+个
- **后端源代码文件**：约70+个
- **AI Agent源代码文件**：约25+个
- **配置文件**：约15+个
- **测试文件**：约5+个
- **总计**：约175+个源代码文件

### 4.2 代码行数估算
- **前端代码**：约15,000+行
- **后端代码**：约20,000+行
- **AI Agent代码**：约5,000+行
- **总计**：约40,000+行代码

### 4.3 技术栈分布
- **TypeScript/TSX**：前端主要语言
- **Java**：后端和AI Agent主要语言
- **SQL**：数据库脚本
- **YAML**：配置文件
- **JSON**：配置文件

---

## 五、源代码文件路径说明

### 5.1 前端源代码路径
- 根目录：`/frontend/`
- 源代码目录：`/frontend/src/` 或 `/frontend/`（部分文件在根目录）
- 组件目录：`/frontend/components/`
- 服务目录：`/frontend/services/`
- 工具目录：`/frontend/utils/`
- 移动端目录：`/frontend/mobile/`

### 5.2 后端源代码路径
- 根目录：`/backend/`
- 源代码目录：`/backend/src/main/java/com/heartsphere/`
- 资源目录：`/backend/src/main/resources/`

### 5.3 AI Agent源代码路径
- 根目录：`/aiagent/`
- 源代码目录：`/aiagent/src/main/java/com/heartsphere/aiagent/`
- 资源目录：`/aiagent/src/main/resources/`

---

## 六、重要源代码文件说明

### 6.1 核心业务逻辑文件
1. **App.tsx**（前端）：主应用组件，包含核心业务逻辑
2. **HeartSphereApplication.java**（后端）：应用启动入口
3. **AiAgentApplication.java**（AI Agent）：AI服务启动入口

### 6.2 关键功能实现文件
1. **ChatWindow.tsx**：智能对话功能实现
2. **CharacterController.java**：角色管理功能实现
3. **AgentController.java**：AI Agent功能实现

### 6.3 安全相关文件
1. **JwtAuthenticationFilter.java**：JWT认证实现
2. **WebSecurityConfig.java**：安全配置
3. **JwtUtils.java**：JWT工具类

### 6.4 数据模型文件
1. **types.ts**（前端）：前端类型定义
2. **entity/**（后端）：后端实体类定义

---

**注：本清单列出了数字生命体交互系统（心域）的主要源代码文件，用于软件著作权申请。实际文件数量可能因开发进度而有所变化。**
