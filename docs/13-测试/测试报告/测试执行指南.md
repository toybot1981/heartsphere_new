# 心域(HeartSphere) - 测试执行指南

## 🚀 开始测试执行

本文档提供详细的测试执行步骤，帮助测试人员按照测试计划系统性地执行前端功能测试。

---

## 📋 一、测试前准备（必须完成）

### 1.1 环境检查清单

**后端服务**:
```bash
# 检查后端是否运行
curl http://localhost:8081/api/auth/invite-code-required

# 如果未运行，启动后端
cd backend
mvn spring-boot:run
```

**前端服务**:
```bash
# 检查前端是否运行
# 浏览器访问 http://localhost:5173 (Vite默认端口)

# 如果未运行，启动前端
cd frontend
npm install  # 如果还没安装依赖
npm run dev
```

**数据库**:
- [ ] 确认数据库连接正常
- [ ] 确认有测试数据（可选）

### 1.2 测试工具准备

**浏览器**:
- [ ] Chrome（推荐，用于主要测试）
- [ ] Firefox（兼容性测试）
- [ ] Safari（如果使用Mac）
- [ ] Edge（Windows）

**浏览器扩展**:
- [ ] React Developer Tools
- [ ] Redux DevTools（如果使用）

**测试工具**:
- [ ] Postman（API测试，可选）
- [ ] 截图工具
- [ ] 录屏工具（可选）

### 1.3 测试账号准备

**用户账号**:
- [ ] 创建测试用户账号1（用于基础功能测试）
- [ ] 创建测试用户账号2（用于多用户测试）
- [ ] 准备管理员账号（用于管理后台测试）

**测试数据**:
- [ ] 准备测试用的世界、场景、角色数据（可选）
- [ ] 准备测试图片文件

---

## 🎯 二、测试执行流程

### 阶段一：核心功能测试（第1-2天）

#### 2.1 用户认证测试

**测试时间**: 30分钟

**测试步骤**:

1. **应用初始化测试**
   ```
   操作: 打开 http://localhost:5173
   检查: 
   - [ ] 页面正常加载
   - [ ] 无控制台错误
   - [ ] 显示登录/注册界面
   ```

2. **用户登录测试**
   ```
   操作: 点击"登录" → 输入测试账号 → 点击登录
   检查:
   - [ ] 登录成功
   - [ ] 跳转到入口点页面
   - [ ] localStorage中有auth_token
   - [ ] 显示用户信息
   ```

3. **用户注册测试**
   ```
   操作: 点击"注册" → 填写信息 → 提交
   检查:
   - [ ] 注册成功
   - [ ] 自动登录
   - [ ] 显示欢迎信息（如果是首次登录）
   ```

4. **错误处理测试**
   ```
   操作: 
   - 输入错误密码
   - 输入空字段
   - 输入无效邮箱
   检查:
   - [ ] 显示友好错误提示
   - [ ] 不执行无效操作
   ```

**记录问题**: 使用"问题记录模板"记录发现的问题

---

#### 2.2 世界管理测试

**测试时间**: 30分钟

**测试步骤**:

1. **创建世界**
   ```
   操作: 进入真实世界页面 → 点击"创建世界" → 填写信息 → 保存
   检查:
   - [ ] 世界创建成功
   - [ ] 显示在世界列表中
   - [ ] 可以立即使用
   ```

2. **编辑世界**
   ```
   操作: 点击世界 → 编辑 → 修改信息 → 保存
   检查:
   - [ ] 信息更新成功
   - [ ] 列表显示更新
   ```

3. **删除世界**
   ```
   操作: 点击删除 → 确认删除
   检查:
   - [ ] 显示确认对话框
   - [ ] 世界被删除（软删除）
   - [ ] 可以在回收站找到
   ```

**记录问题**: 记录任何异常或不符合预期的行为

---

#### 2.3 场景管理测试

**测试时间**: 45分钟

**测试步骤**:

1. **创建场景 - 基础信息**
   ```
   操作: 点击"创建场景" → 填写名称和描述 → 保存
   检查:
   - [ ] 场景创建成功
   - [ ] 必填字段验证生效
   ```

2. **上传场景图片**
   ```
   操作: 选择"上传图片" → 选择本地文件 → 等待上传
   检查:
   - [ ] 显示上传进度
   - [ ] 上传成功
   - [ ] 图片预览正确
   ```

3. **AI生成场景图片**
   ```
   操作: 选择"AI生成" → 输入描述 → 生成
   检查:
   - [ ] 显示生成进度
   - [ ] 生成成功（或显示友好错误）
   ```

4. **AI分析图片**
   ```
   操作: 上传图片 → 点击"AI分析图片"
   检查:
   - [ ] 自动填充场景名称和描述
   - [ ] 分析结果合理
   ```

5. **编辑和删除场景**
   ```
   操作: 编辑场景 → 修改信息 → 保存
   操作: 删除场景 → 确认删除
   检查:
   - [ ] 编辑成功
   - [ ] 删除成功
   ```

**记录问题**: 特别关注图片上传和AI功能的错误处理

---

#### 2.4 角色管理测试

**测试时间**: 60分钟

**测试步骤**:

1. **创建角色 - 基础信息**
   ```
   操作: 进入场景 → 点击"创建角色" → 填写基础信息 → 保存
   检查:
   - [ ] 角色创建成功
   - [ ] 显示在角色列表中
   ```

2. **创建角色 - 完整信息**
   ```
   操作: 填写所有字段：
   - 基础信息（姓名、年龄、性别、角色、简介）
   - 头像（上传或生成）
   - 背景图
   - 主题色和强调色
   - 首条消息
   - 系统指令
   - 深度人格字段（MBTI、标签、说话风格、口头禅、秘密、动机、关系）
   - 语音名称
   检查:
   - [ ] 所有字段可以填写
   - [ ] 信息保存完整
   ```

3. **AI生成头像**
   ```
   操作: 填写角色信息 → 点击"AI生成头像"
   检查:
   - [ ] 生成成功
   - [ ] 头像预览正确
   ```

4. **编辑和删除角色**
   ```
   操作: 编辑角色 → 修改信息 → 保存
   操作: 删除角色 → 确认删除
   检查:
   - [ ] 编辑成功
   - [ ] 删除成功
   ```

**记录问题**: 特别关注复杂表单的验证和保存

---

### 阶段二：对话功能测试（第3天）

#### 2.5 对话功能测试

**测试时间**: 90分钟

**测试步骤**:

1. **基础对话**
   ```
   操作: 选择角色 → 进入对话页面 → 发送消息
   检查:
   - [ ] 消息显示在对话窗口
   - [ ] AI回复正常
   - [ ] 回复符合角色设定
   - [ ] 对话历史保存
   ```

2. **对话历史**
   ```
   操作: 进行多轮对话 → 退出 → 重新进入
   检查:
   - [ ] 历史记录正确加载
   - [ ] 消息顺序正确
   ```

3. **剧本模式**
   ```
   操作: 选择剧本 → 开始剧本 → 选择选项
   检查:
   - [ ] 显示开场场景
   - [ ] 显示选项按钮
   - [ ] 选项可以点击
   - [ ] 节点跳转正确
   ```

4. **错误处理**
   ```
   操作: 
   - 断开网络 → 发送消息
   - 使用无效API Key → 发送消息
   检查:
   - [ ] 显示友好错误提示
   - [ ] 提供重试选项
   - [ ] 不丢失用户消息
   ```

**记录问题**: 特别关注AI回复质量和错误处理

---

### 阶段三：其他功能测试（第4-5天）

#### 2.6 剧本构建器测试

**测试时间**: 60分钟

**测试步骤**:

1. **创建剧本**
   ```
   操作: 打开剧本构建器 → 创建节点 → 添加选项 → 保存
   检查:
   - [ ] 剧本创建成功
   - [ ] 节点和选项正确保存
   ```

2. **AI生成剧本**
   ```
   操作: 点击"AI生成" → 输入提示词 → 生成
   检查:
   - [ ] 生成完整剧本
   - [ ] 结构合理
   ```

3. **节点验证**
   ```
   操作: 创建无效节点连接 → 尝试保存
   检查:
   - [ ] 显示验证错误
   - [ ] 不允许保存
   ```

---

#### 2.7 日记功能测试

**测试时间**: 45分钟

**测试步骤**:

1. **创建日记**
   ```
   操作: 进入真实世界 → 写日记 → 填写内容 → 保存
   检查:
   - [ ] 日记创建成功
   - [ ] 显示在列表中
   ```

2. **日记探索**
   ```
   操作: 选择日记 → 探索 → 选择类型（镜像洞察/角色回响）
   检查:
   - [ ] 生成结果正确
   - [ ] 失败时显示友好提示
   ```

---

#### 2.8 设置和会员功能测试

**测试时间**: 30分钟

**测试步骤**:

1. **设置功能**
   ```
   操作: 打开设置 → 修改各项设置 → 保存
   检查:
   - [ ] 设置保存成功
   - [ ] 设置立即生效
   ```

2. **会员功能**
   ```
   操作: 打开会员页面 → 查看信息 → 查看订阅计划
   检查:
   - [ ] 信息显示正确
   - [ ] 计划列表完整
   ```

---

### 阶段四：错误处理和边界测试（第6天）

#### 2.9 错误处理测试

**测试时间**: 60分钟

**测试步骤**:

1. **网络错误**
   ```
   操作: 断开网络 → 执行各种操作
   检查:
   - [ ] 显示网络错误提示
   - [ ] 提供重试选项
   - [ ] 数据不丢失
   ```

2. **API错误**
   ```
   操作: 
   - 使用无效Token
   - 模拟服务器错误
   检查:
   - [ ] 错误处理正确
   - [ ] 提示友好
   ```

3. **表单验证**
   ```
   操作: 输入无效数据 → 尝试提交
   检查:
   - [ ] 验证错误提示清晰
   - [ ] 不允许提交
   ```

---

#### 2.10 边界条件测试

**测试时间**: 30分钟

**测试步骤**:

1. **空数据**
   ```
   操作: 使用新账号 → 查看空列表
   检查:
   - [ ] 显示空状态提示
   - [ ] 提供操作引导
   ```

2. **大量数据**
   ```
   操作: 创建大量数据（10+） → 查看列表
   检查:
   - [ ] 列表正常显示
   - [ ] 性能可接受
   ```

---

### 阶段五：移动端和兼容性测试（第7天）

#### 2.11 移动端测试

**测试时间**: 60分钟

**测试步骤**:

1. **移动端布局**
   ```
   操作: 使用移动设备或浏览器开发者工具 → 打开应用
   检查:
   - [ ] 布局适配移动端
   - [ ] 按钮大小适合触摸
   - [ ] 文字大小合适
   ```

2. **移动端功能**
   ```
   操作: 测试所有主要功能
   检查:
   - [ ] 所有功能可用
   - [ ] 触摸交互正常
   ```

---

## 📊 三、测试结果记录

### 3.1 使用测试记录表

在测试过程中，使用以下格式记录测试结果：

```markdown
## 测试记录 - [日期]

### 测试模块: [模块名称]
**测试时间**: [开始时间] - [结束时间]
**测试人员**: [姓名]

#### 测试用例: [用例编号] - [用例名称]
- **状态**: ✅ 通过 / ❌ 失败 / ⚠️ 部分通过 / ⬜ 未测试
- **实际结果**: [描述实际结果]
- **发现问题**: [如有问题，详细描述]
- **截图**: [如有截图，附上路径]

#### 问题汇总
1. [问题编号] - [问题描述] - [优先级]
2. ...
```

### 3.2 问题记录模板

```markdown
## 问题记录

**问题编号**: BUG-XXX
**发现时间**: YYYY-MM-DD HH:MM
**测试人员**: [姓名]
**功能模块**: [模块名称]
**测试用例**: [用例编号]

**问题描述**: 
[详细描述问题现象]

**复现步骤**:
1. [步骤1]
2. [步骤2]
3. [步骤3]

**预期结果**: 
[描述预期结果]

**实际结果**: 
[描述实际结果]

**环境信息**:
- 浏览器: [浏览器及版本]
- 操作系统: [操作系统及版本]
- 设备: [设备信息]

**优先级**: 
- [ ] P0 阻塞 - 必须立即修复
- [ ] P1 重要 - 需要尽快修复
- [ ] P2 一般 - 可以延后修复

**状态**: 
- [ ] 待修复
- [ ] 修复中
- [ ] 已修复
- [ ] 已验证

**截图/日志**: 
[如有截图或日志，附上]
```

---

## 🔍 四、测试检查点

### 4.1 功能检查点

每个功能测试时，检查以下方面：

- [ ] **功能完整性**: 功能是否按预期工作
- [ ] **数据正确性**: 数据是否正确保存和显示
- [ ] **状态管理**: 状态是否正确更新
- [ ] **错误处理**: 错误情况是否处理得当
- [ ] **用户体验**: 操作是否流畅、直观

### 4.2 UI检查点

- [ ] **布局**: 布局是否合理、美观
- [ ] **响应式**: 是否适配不同屏幕
- [ ] **交互**: 按钮、链接是否可点击
- [ ] **反馈**: 操作是否有及时反馈
- [ ] **一致性**: UI风格是否一致

### 4.3 性能检查点

- [ ] **加载速度**: 页面加载是否快速
- [ ] **响应速度**: 操作响应是否及时
- [ ] **流畅度**: 动画和过渡是否流畅
- [ ] **资源使用**: 内存和CPU使用是否合理

---

## 🚨 五、问题处理流程

### 5.1 发现问题时

1. **立即记录**
   - 使用问题记录模板
   - 截图或录屏
   - 记录详细步骤

2. **判断优先级**
   - P0: 阻塞核心功能，必须立即修复
   - P1: 影响用户体验，需要尽快修复
   - P2: 小问题，可以延后修复

3. **通知相关人员**
   - 开发人员
   - 项目经理
   - 测试负责人

### 5.2 阻塞性问题处理

如果发现P0问题：

1. **暂停相关测试**
   - 暂停该功能模块的测试
   - 等待问题修复

2. **继续其他测试**
   - 测试其他不受影响的功能
   - 记录测试进度

3. **验证修复**
   - 问题修复后，重新测试
   - 验证修复是否完整

---

## 📈 六、测试进度跟踪

### 6.1 每日测试总结

每天测试结束后，填写以下总结：

```markdown
## 测试总结 - [日期]

**测试人员**: [姓名]
**测试时间**: [小时数]

**完成测试**:
- [ ] 用户认证
- [ ] 世界管理
- [ ] 场景管理
- [ ] 角色管理
- [ ] 对话功能
- [ ] 剧本构建器
- [ ] 日记功能
- [ ] 设置功能
- [ ] 会员功能
- [ ] 错误处理
- [ ] 移动端测试

**发现问题**:
- P0问题: [数量]
- P1问题: [数量]
- P2问题: [数量]

**测试进度**: [百分比]%

**明日计划**: [计划内容]
```

### 6.2 测试报告

测试完成后，生成测试报告：

```markdown
# 前端功能测试报告

**测试日期**: [开始日期] - [结束日期]
**测试人员**: [姓名]
**测试环境**: [环境信息]

## 测试概览
- 总用例数: [数量]
- 已执行: [数量]
- 通过: [数量]
- 失败: [数量]
- 阻塞: [数量]
- 通过率: [百分比]%

## 问题汇总
[列出所有问题]

## 测试结论
[测试结论和建议]
```

---

## 🎯 七、测试执行时间表

### 建议时间安排

**第1天**: 
- 上午: 环境准备 + 用户认证测试
- 下午: 世界管理和场景管理测试

**第2天**: 
- 上午: 角色管理测试
- 下午: 对话功能测试（基础）

**第3天**: 
- 上午: 对话功能测试（剧本模式）
- 下午: 剧本构建器测试

**第4天**: 
- 上午: 日记功能测试
- 下午: 设置和会员功能测试

**第5天**: 
- 上午: 错误处理测试
- 下午: 边界条件测试

**第6天**: 
- 上午: 移动端测试
- 下午: 兼容性测试

**第7天**: 
- 上午: 回归测试
- 下午: 测试报告整理

---

## 📝 八、测试执行检查清单

### 每日开始前
- [ ] 检查测试环境
- [ ] 检查测试账号
- [ ] 查看测试计划
- [ ] 准备测试数据

### 测试过程中
- [ ] 按照测试用例执行
- [ ] 记录测试结果
- [ ] 记录发现问题
- [ ] 截图保存证据

### 每日结束后
- [ ] 整理测试记录
- [ ] 提交问题报告
- [ ] 更新测试进度
- [ ] 计划明日测试

---

## 🚀 开始测试

现在您可以开始执行测试了！

1. **第一步**: 完成"测试前准备"部分的所有检查
2. **第二步**: 按照"测试执行流程"开始测试
3. **第三步**: 使用"测试结果记录"模板记录结果
4. **第四步**: 发现问题时使用"问题记录模板"

**祝测试顺利！** 🎉

---

**文档版本**: v1.0  
**创建日期**: 2025年12月  
**最后更新**: 2025年12月





