# 创建共享配置使用指南

**文档版本**: V1.0  
**更新日期**: 2025-12-28

---

## 一、快速开始

### 1.1 使用ShareButton组件

**最简单的方式**：在需要的地方添加 `ShareButton` 组件

```tsx
import { ShareButton } from '@/components/heartsphere-share/ShareButton';

function MyComponent() {
  return (
    <div>
      {/* 按钮样式 */}
      <ShareButton variant="button" />
      
      {/* 或图标样式 */}
      <ShareButton variant="icon" />
      
      {/* 或文本样式 */}
      <ShareButton variant="text" />
    </div>
  );
}
```

### 1.2 创建流程

1. **点击"共享心域"按钮**
   - 如果已有配置：显示配置详情
   - 如果没有配置：打开创建界面

2. **第一步：选择共享范围**
   - 全部共享（推荐）
   - 按世界共享
   - 按场景共享

3. **第二步：设置权限和描述**
   - 选择访问权限（需要审批/自由连接）
   - 填写共享描述（可选）
   - 预览效果

4. **保存配置**
   - 系统自动生成共享码
   - 显示分享链接和二维码

---

## 二、详细步骤

### 步骤1：添加ShareButton组件

**在个人中心添加**：

```tsx
// frontend/components/UserProfile.tsx
import { ShareButton } from './heartsphere-share/ShareButton';

function UserProfile() {
  return (
    <div className="user-profile">
      <h1>个人中心</h1>
      
      {/* 添加共享按钮 */}
      <div className="mb-4">
        <ShareButton variant="button" />
      </div>
      
      {/* 其他内容 */}
    </div>
  );
}
```

**在设置页面添加**：

```tsx
// frontend/components/SettingsModal.tsx
import { ShareButton } from './heartsphere-share/ShareButton';

function SettingsModal() {
  return (
    <div>
      <h2>设置</h2>
      
      <div className="settings-section">
        <h3>心域共享</h3>
        <ShareButton variant="button" />
      </div>
    </div>
  );
}
```

### 步骤2：用户操作流程

1. **点击"共享心域"按钮**
   ```
   用户点击 → 系统检查配置 → 打开创建/编辑界面
   ```

2. **选择共享范围**
   - **全部共享**：共享所有世界和场景（推荐）
   - **按世界共享**：选择要共享的世界
   - **按场景共享**：精确选择要共享的场景

3. **设置访问权限**
   - **需要审批**：其他人需要请求，你同意后才能进入（推荐）
   - **自由连接**：任何人可以直接进入，无需审批

4. **填写描述（可选）**
   - 介绍你的心域
   - 最多200字

5. **保存配置**
   - 系统自动生成共享码（格式：HS-XXXXXX）
   - 生成分享链接和二维码

### 步骤3：获取分享链接

创建成功后，会显示：
- **共享码**：`HS-A3B7C9`（可直接复制）
- **分享链接**：`http://localhost:5173/share/HS-A3B7C9`（可直接复制）
- **二维码**：扫描二维码快速访问

---

## 三、集成示例

### 3.1 在UserProfile中集成

```tsx
// frontend/components/UserProfile.tsx
import React from 'react';
import { ShareButton } from './heartsphere-share/ShareButton';

export const UserProfile: React.FC = () => {
  return (
    <div className="p-6">
      <h1 className="text-2xl font-bold mb-6">个人中心</h1>
      
      {/* 心域共享部分 */}
      <div className="mb-8">
        <h2 className="text-xl font-semibold mb-4">心域共享</h2>
        <p className="text-gray-400 mb-4">
          分享你的心域，让其他人可以体验你的世界和场景
        </p>
        <ShareButton variant="button" />
      </div>
      
      {/* 其他个人中心内容 */}
    </div>
  );
};
```

### 3.2 在SettingsModal中集成

```tsx
// frontend/components/SettingsModal.tsx
import { ShareButton } from './heartsphere-share/ShareButton';

function SettingsModal() {
  return (
    <div className="settings-modal">
      <h2>设置</h2>
      
      <div className="settings-section">
        <h3>心域共享</h3>
        <p>管理你的心域共享配置</p>
        <ShareButton variant="button" className="mt-4" />
      </div>
    </div>
  );
}
```

### 3.3 在导航栏中集成

```tsx
// 在导航栏组件中
import { ShareButton } from '@/components/heartsphere-share/ShareButton';

function NavigationBar() {
  return (
    <nav className="navbar">
      {/* 其他导航项 */}
      <ShareButton variant="icon" />
    </nav>
  );
}
```

---

## 四、配置选项说明

### 4.1 共享范围

| 选项 | 说明 | 适用场景 |
|------|------|----------|
| 全部共享 | 共享所有世界和场景 | 完全开放的心域 |
| 按世界共享 | 选择要共享的世界 | 部分开放 |
| 按场景共享 | 精确选择要共享的场景 | 精确控制 |

### 4.2 访问权限

| 选项 | 说明 | 适用场景 |
|------|------|----------|
| 需要审批 | 其他人需要请求，你同意后才能进入 | 推荐，更安全 |
| 自由连接 | 任何人可以直接进入 | 完全开放 |

---

## 五、使用场景

### 场景1：完全开放的心域

**配置**：
- 共享范围：全部共享
- 访问权限：自由连接

**结果**：
- 任何人可以通过分享链接直接进入体验

### 场景2：部分开放的心域

**配置**：
- 共享范围：按世界共享（选择特定世界）
- 访问权限：需要审批

**结果**：
- 只共享选定的世界
- 需要你审批后才能进入

### 场景3：精确控制的心域

**配置**：
- 共享范围：按场景共享（选择特定场景）
- 访问权限：需要审批

**结果**：
- 只共享选定的场景
- 需要你审批后才能进入

---

## 六、常见问题

### Q1: 如何修改共享配置？

**A**: 点击"共享心域"按钮，如果已有配置，会显示配置详情，可以点击"编辑"或重新打开配置模态框进行修改。

### Q2: 如何重新生成共享码？

**A**: 在共享配置详情页面，点击"重新生成共享码"按钮。注意：旧的共享码将失效。

### Q3: 如何查看连接请求？

**A**: 在共享配置详情页面，会显示连接请求列表，可以批准或拒绝请求。

### Q4: 如何停止共享？

**A**: 可以删除共享配置，或暂停共享（在配置中设置状态为"暂停"）。

---

## 七、代码示例

### 完整示例：在个人中心添加

```tsx
// frontend/components/UserProfile.tsx
import React from 'react';
import { ShareButton } from './heartsphere-share/ShareButton';

export const UserProfile: React.FC = () => {
  return (
    <div className="min-h-screen bg-gray-900 p-6">
      <div className="max-w-4xl mx-auto">
        <h1 className="text-3xl font-bold text-white mb-8">个人中心</h1>
        
        {/* 心域共享卡片 */}
        <div className="bg-gray-800 rounded-lg p-6 mb-6">
          <div className="flex items-center justify-between mb-4">
            <div>
              <h2 className="text-xl font-semibold text-white mb-2">心域共享</h2>
              <p className="text-gray-400 text-sm">
                分享你的心域，让其他人可以体验你的世界和场景
              </p>
            </div>
            <ShareButton variant="button" />
          </div>
        </div>
        
        {/* 其他个人中心内容 */}
      </div>
    </div>
  );
};
```

---

## 八、下一步

创建共享配置后：

1. **复制分享链接**：分享给其他人
2. **查看连接请求**：在配置详情中查看
3. **管理连接**：批准或拒绝连接请求
4. **查看统计**：查看查看次数、请求次数等

---

**文档维护**: 如有变更，请及时更新本文档




