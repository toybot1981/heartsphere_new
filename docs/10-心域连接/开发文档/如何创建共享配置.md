# 如何创建共享配置

**快速指南** - 2025-12-28

---

## 方法一：使用ShareButton组件（推荐）

### 步骤1：在组件中添加ShareButton

```tsx
import { ShareButton } from '@/components/heartsphere-share/ShareButton';

function MyComponent() {
  return (
    <div>
      <ShareButton variant="button" />
    </div>
  );
}
```

### 步骤2：用户点击按钮

1. 点击"共享心域"按钮
2. 如果已有配置：显示配置详情
3. 如果没有配置：自动打开创建界面

### 步骤3：创建配置

**第一步：选择共享范围**
- ✅ 全部共享（推荐）- 共享所有世界和场景
- ✅ 按世界共享 - 选择要共享的世界
- ✅ 按场景共享 - 精确选择要共享的场景

**第二步：设置权限和描述**
- ✅ 访问权限：
  - 需要审批（推荐）- 其他人需要请求，你同意后才能进入
  - 自由连接 - 任何人可以直接进入
- ✅ 共享描述（可选）- 介绍你的心域，最多200字

**第三步：保存**
- 点击"保存并开启共享"
- 系统自动生成共享码（格式：HS-XXXXXX）
- 显示分享链接和二维码

---

## 方法二：直接使用ShareConfigModal

```tsx
import { ShareConfigModal } from '@/components/heartsphere-share/ShareConfigModal';

function MyComponent() {
  const [showModal, setShowModal] = useState(false);
  
  return (
    <>
      <button onClick={() => setShowModal(true)}>
        创建共享配置
      </button>
      
      <ShareConfigModal
        isOpen={showModal}
        onClose={() => setShowModal(false)}
        onSuccess={() => {
          console.log('配置创建成功');
          setShowModal(false);
        }}
      />
    </>
  );
}
```

---

## 集成位置建议

### 1. 个人中心（UserProfile）

在个人中心添加一个"心域共享"区域：

```tsx
// 在 UserProfile.tsx 中添加
import { ShareButton } from './heartsphere-share/ShareButton';

// 在return中添加
<div className="profile-section">
  <h3>心域共享</h3>
  <p>分享你的心域，让其他人可以体验</p>
  <ShareButton variant="button" />
</div>
```

### 2. 设置页面（SettingsModal）

在设置页面添加共享配置入口：

```tsx
// 在 SettingsModal.tsx 中添加
import { ShareButton } from './heartsphere-share/ShareButton';

// 在设置项中添加
<div className="settings-item">
  <h4>心域共享</h4>
  <ShareButton variant="button" />
</div>
```

### 3. 导航栏

在导航栏添加共享图标：

```tsx
import { ShareButton } from '@/components/heartsphere-share/ShareButton';

<nav>
  <ShareButton variant="icon" />
</nav>
```

---

## 创建后的操作

### 1. 获取分享链接

创建成功后，会显示：
- **共享码**：`HS-A3B7C9`（可直接复制）
- **分享链接**：`http://localhost:5173/share/HS-A3B7C9`（可直接复制）
- **二维码**：扫描二维码快速访问

### 2. 分享给他人

- 复制分享链接发送给朋友
- 或分享二维码图片
- 或直接告诉对方共享码

### 3. 管理连接请求

- 在共享配置详情中查看连接请求
- 批准或拒绝请求
- 查看统计信息（查看次数、请求次数等）

---

## 快速测试

### 测试步骤：

1. **添加ShareButton到任意组件**：
   ```tsx
   <ShareButton variant="button" />
   ```

2. **点击按钮**：
   - 首次点击会打开创建界面
   - 创建后再次点击会显示配置详情

3. **创建配置**：
   - 选择"全部共享"
   - 选择"需要审批"
   - 点击"保存并开启共享"

4. **获取分享链接**：
   - 复制分享链接
   - 在新标签页打开测试

---

## 代码示例

### 完整示例

```tsx
import React, { useState } from 'react';
import { ShareButton } from '@/components/heartsphere-share/ShareButton';

function MyProfilePage() {
  return (
    <div className="profile-page">
      <h1>个人中心</h1>
      
      {/* 心域共享区域 */}
      <div className="share-section">
        <h2>心域共享</h2>
        <p>分享你的心域，让其他人可以体验你的世界和场景</p>
        <ShareButton variant="button" />
      </div>
      
      {/* 其他内容 */}
    </div>
  );
}
```

---

## 常见问题

**Q: 如何修改共享配置？**  
A: 点击"共享心域"按钮，如果已有配置，会显示配置详情，可以重新打开配置模态框进行修改。

**Q: 如何停止共享？**  
A: 可以删除共享配置，或暂停共享（在配置中设置状态为"暂停"）。

**Q: 如何查看谁访问了我的心域？**  
A: 在共享配置详情中，可以查看连接请求列表和统计信息。

---

**详细文档**: 查看 `创建共享配置指南.md` 获取更多信息




