# 温度感系统页面访问指南

**完成日期**: 2025-12-28

---

## 🚀 快速启动

### 1. 启动前端服务

```bash
cd frontend
npm install  # 如果还没安装依赖
npm run dev
```

### 2. 访问地址

启动后，在浏览器中访问：
- **本地地址**: http://localhost:3000
- **网络地址**: 根据终端输出显示（通常是 http://0.0.0.0:3000）

---

## 📱 功能位置

### ✅ 主聊天窗口（已自动集成）

**位置**: 应用主界面 → 聊天窗口  
**说明**: 情绪和记忆系统已自动集成到 `ChatWindow` 组件中

**功能**:
- ✅ **自动情绪分析**: 发送消息时自动分析情绪
- ✅ **自动记忆提取**: 自动从对话中提取记忆
- ✅ **个性化问候**: 根据情绪和记忆生成个性化问候
- ✅ **记忆上下文增强**: 使用相关记忆增强AI回复

**如何使用**:
1. 启动前端服务
2. 打开应用（http://localhost:3000）
3. 进入聊天窗口
4. 发送消息，系统会自动：
   - 分析你的情绪
   - 提取重要记忆
   - 生成个性化回应

---

## 🎨 可视化组件

### 1. 情绪时间线

**组件**: `EmotionTimeline`  
**位置**: `/components/emotion/EmotionTimeline.tsx`  
**功能**: 显示情绪历史时间线图表

### 2. 情绪统计

**组件**: `EmotionStatistics`  
**位置**: `/components/emotion/EmotionStatistics.tsx`  
**功能**: 显示情绪统计图表（饼图、柱状图等）

### 3. 记忆列表

**组件**: `MemoryList`  
**位置**: `/components/memory/MemoryList.tsx`  
**功能**: 显示和管理用户记忆列表

**使用方式**: 需要在应用中导入并使用这些组件

---

## 🧪 演示组件（可选）

### EmotionMemoryDemo

**位置**: `/components/examples/EmotionMemoryDemo.tsx`  
**说明**: 独立的演示组件，用于测试和展示功能

**功能**:
- ✅ 情绪分析演示
- ✅ 记忆提取演示
- ✅ 个性化回应演示
- ✅ 情绪趋势查看
- ✅ 情绪统计查看

**如何集成到页面**:

#### 方式1: 在现有页面中添加

```tsx
import { EmotionMemoryDemo } from './components/examples/EmotionMemoryDemo';

// 在组件中使用
<EmotionMemoryDemo userId={userProfile?.id || 0} />
```

#### 方式2: 创建独立演示页面

在 `App.tsx` 中添加路由：

```tsx
// 添加演示路由
{showDemo && (
  <div className="demo-page">
    <EmotionMemoryDemo userId={userProfile?.id || 0} />
  </div>
)}
```

---

## 🔍 查看功能

### 在聊天窗口中查看

1. **启动服务**
   ```bash
   cd frontend
   npm run dev
   ```

2. **打开浏览器**
   - 访问: http://localhost:3000

3. **进入聊天窗口**
   - 选择角色
   - 开始对话

4. **查看功能**
   - 打开浏览器开发者工具（F12）
   - 查看 Console 标签
   - 可以看到：
     - `[ChatWindow] 情绪感知系统分析:` - 情绪分析结果
     - `[ChatWindow] 记忆提取:` - 提取的记忆
     - `[ChatWindow] 相关记忆:` - 检索到的相关记忆

### 查看可视化

如果需要查看情绪和记忆的可视化组件，需要：

1. **导入组件**
   ```tsx
   import { EmotionTimeline } from './components/emotion/EmotionTimeline';
   import { EmotionStatistics } from './components/emotion/EmotionStatistics';
   import { MemoryList } from './components/memory/MemoryList';
   ```

2. **在页面中使用**
   ```tsx
   <EmotionTimeline userId={userId} />
   <EmotionStatistics userId={userId} />
   <MemoryList userId={userId} />
   ```

---

## 📊 调试信息

### 查看控制台日志

打开浏览器开发者工具（F12），在Console中可以看到：

```
[ChatWindow] 情绪感知系统分析: {primaryEmotion: "happy", ...}
[ChatWindow] 记忆提取 (用户输入): [...]
[ChatWindow] 相关记忆: [...]
```

### 查看网络请求

在Network标签中查看：
- `/api/emotions/analyze` - 情绪分析API
- `/api/emotions/current` - 当前情绪
- `/api/emotions/history` - 情绪历史
- `/api/emotions/trend` - 情绪趋势
- `/api/emotions/statistics` - 情绪统计

---

## ⚙️ 配置

### 后端API地址

确保后端服务已启动（默认端口8080）

### 环境变量

检查 `.env.local` 文件，确保配置了必要的API密钥

---

## 🎯 快速测试

### 测试情绪分析

1. 在聊天窗口发送消息：
   - "我今天非常开心！" → 应该识别为 happy
   - "今天工作很累" → 应该识别为 tired/sad

2. 查看控制台输出，确认情绪分析结果

### 测试记忆提取

1. 发送包含个人信息的消息：
   - "我叫张三，喜欢看电影"
   - "我今年25岁"

2. 查看控制台输出，确认记忆提取结果

---

## 📝 注意事项

1. **首次使用**: 可能没有历史数据，需要先进行对话
2. **用户认证**: 某些功能需要用户登录
3. **后端服务**: 确保后端服务已启动
4. **数据持久化**: 情绪和记忆数据会保存到后端数据库

---

## 🔗 相关文件

- **主应用**: `frontend/App.tsx`
- **聊天窗口**: `frontend/components/ChatWindow.tsx`
- **演示组件**: `frontend/components/examples/EmotionMemoryDemo.tsx`
- **可视化组件**: 
  - `frontend/components/emotion/EmotionTimeline.tsx`
  - `frontend/components/emotion/EmotionStatistics.tsx`
  - `frontend/components/memory/MemoryList.tsx`

---

**完成人**: AI助手  
**完成时间**: 2025-12-28

