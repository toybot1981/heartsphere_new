# æ¸©åº¦æ„Ÿç³»ç»Ÿå¿«é€Ÿå¯åŠ¨æŒ‡å—

## ğŸš€ ç«‹å³å¼€å§‹ï¼ˆ5åˆ†é’Ÿï¼‰

### æ­¥éª¤1ï¼šåˆ›å»ºé…ç½®ç³»ç»Ÿï¼ˆ2åˆ†é’Ÿï¼‰

åˆ›å»ºæ–‡ä»¶ï¼š`frontend/services/temperature/TemperatureConfig.ts`

```typescript
export interface TemperatureConfig {
  enabled: boolean;
  features: {
    characterExpression: boolean;
    characterAction: boolean;
    greeting: boolean;
    dialogueOptimization: boolean;
    warmUI: boolean;
  };
}

export const defaultTemperatureConfig: TemperatureConfig = {
  enabled: true,
  features: {
    characterExpression: true,
    characterAction: true,
    greeting: true,
    dialogueOptimization: true,
    warmUI: true,
  },
};
```

### æ­¥éª¤2ï¼šåˆ›å»ºé…ç½®Hookï¼ˆ2åˆ†é’Ÿï¼‰

åˆ›å»ºæ–‡ä»¶ï¼š`frontend/services/temperature/useTemperatureConfig.ts`

```typescript
import { useState, useEffect } from 'react';
import { TemperatureConfig, defaultTemperatureConfig } from './TemperatureConfig';

export function useTemperatureConfig() {
  const [config, setConfig] = useState<TemperatureConfig>(() => {
    const saved = localStorage.getItem('temperature_config');
    return saved ? JSON.parse(saved) : defaultTemperatureConfig;
  });
  
  useEffect(() => {
    localStorage.setItem('temperature_config', JSON.stringify(config));
  }, [config]);
  
  return { config, setConfig };
}
```

### æ­¥éª¤3ï¼šåœ¨App.tsxä¸­åº”ç”¨ï¼ˆ1åˆ†é’Ÿï¼‰

```typescript
// App.tsx
import { useTemperatureConfig } from './services/temperature/useTemperatureConfig';
import './src/tokens.css'; // ç¡®ä¿å¯¼å…¥æ ·å¼

function App() {
  const { config } = useTemperatureConfig();
  
  return (
    <div className={config.enabled ? 'temperature-warm' : ''}>
      {/* ç°æœ‰å†…å®¹ */}
    </div>
  );
}
```

---

## ğŸ“‹ åˆ†é˜¶æ®µå®æ–½æ¸…å•

### âœ… é˜¶æ®µä¸€ï¼šåŸºç¡€è®¾æ–½ï¼ˆä»Šå¤©å®Œæˆï¼‰

- [ ] åˆ›å»ºTemperatureConfig.ts
- [ ] åˆ›å»ºuseTemperatureConfig.ts
- [ ] åˆ›å»ºcomponents/ui/index.tsç»Ÿä¸€å¯¼å‡º
- [ ] åœ¨App.tsxä¸­å¯¼å…¥tokens.css
- [ ] åœ¨App.tsxä¸­åº”ç”¨temperature-warmç±»

### ğŸ¯ é˜¶æ®µäºŒï¼šæ ¸å¿ƒé›†æˆï¼ˆæœ¬å‘¨å®Œæˆï¼‰

#### ChatWindowé›†æˆ
- [ ] å¯¼å…¥Characterç»„ä»¶
- [ ] å¯¼å…¥useCharacterController
- [ ] åœ¨æ¶ˆæ¯å‘é€æ—¶æ›´æ–°è§’è‰²è¡¨æƒ…
- [ ] åœ¨AIå“åº”æ—¶æ›´æ–°è§’è‰²åŠ¨ä½œ
- [ ] æ·»åŠ è§’è‰²æ˜¾ç¤ºåŒºåŸŸ

#### EntryPointé›†æˆ
- [ ] å¯¼å…¥WarmButtonå’ŒWarmCard
- [ ] å¯¼å…¥GreetingService
- [ ] æ˜¾ç¤ºé—®å€™è¯­
- [ ] åº”ç”¨æ¸©åº¦æ„Ÿæ ·å¼

#### å¯¹è¯ç³»ç»Ÿé›†æˆ
- [ ] å¯¹è¯å¼€å§‹æ—¶æ˜¾ç¤ºé—®å€™
- [ ] å¯¹è¯ç»“æŸæ—¶æ˜¾ç¤ºç¥ç¦
- [ ] é›†æˆå¯¹è¯ä¼˜åŒ–é€»è¾‘

### ğŸ¨ é˜¶æ®µä¸‰ï¼šå…¨é¢åº”ç”¨ï¼ˆä¸‹å‘¨å®Œæˆï¼‰

- [ ] æ›¿æ¢æ‰€æœ‰åŠ è½½çŠ¶æ€ä¸ºLoadingç»„ä»¶
- [ ] æ›¿æ¢æ‰€æœ‰é”™è¯¯çŠ¶æ€ä¸ºErrorStateç»„ä»¶
- [ ] æ›¿æ¢æ‰€æœ‰ç©ºçŠ¶æ€ä¸ºEmptyStateç»„ä»¶
- [ ] é€æ­¥æ›¿æ¢Buttonä¸ºWarmButton
- [ ] æ·»åŠ é¡µé¢è¿‡æ¸¡åŠ¨ç”»

---

## ğŸ”§ å¿«é€Ÿé›†æˆç¤ºä¾‹

### ç¤ºä¾‹1ï¼šåœ¨ChatWindowä¸­æ·»åŠ è§’è‰²

```typescript
// ChatWindow.tsx
import { Character, useCharacterController } from '../components/character';
import { useTemperatureConfig } from '../services/temperature/useTemperatureConfig';

function ChatWindow({ character, history, ... }) {
  const { config } = useTemperatureConfig();
  const characterController = useCharacterController();
  
  // å¤„ç†æ¶ˆæ¯æ—¶æ›´æ–°è§’è‰²
  const handleSendMessage = (message: string) => {
    if (config.features.characterExpression) {
      characterController.processMessage(message);
    }
    // ... åŸæœ‰é€»è¾‘
  };
  
  return (
    <div className="chat-window">
      {/* è§’è‰²æ˜¾ç¤º */}
      {config.features.characterExpression && (
        <div className="character-display fixed top-4 left-4">
          <Character size={100} />
        </div>
      )}
      
      {/* åŸæœ‰å¯¹è¯å†…å®¹ */}
      {/* ... */}
    </div>
  );
}
```

### ç¤ºä¾‹2ï¼šåœ¨EntryPointä¸­æ·»åŠ é—®å€™

```typescript
// EntryPoint.tsx
import { WarmButton, WarmCard, FadeIn } from '../components/ui';
import GreetingService from '../services/GreetingService';
import { useTemperatureConfig } from '../services/temperature/useTemperatureConfig';

function EntryPoint() {
  const { config } = useTemperatureConfig();
  const [greeting, setGreeting] = useState('');
  
  useEffect(() => {
    if (config.features.greeting) {
      const context = GreetingService.buildGreetingContext({
        currentTime: new Date(),
      });
      setGreeting(GreetingService.selectGreeting(context));
    }
  }, [config.features.greeting]);
  
  return (
    <FadeIn>
      <div className="entry-point">
        {greeting && (
          <WarmCard className="mb-4">
            <p className="text-lg">{greeting}</p>
          </WarmCard>
        )}
        
        <WarmButton variant="primary" onClick={handleEnter}>
          è¿›å…¥å¿ƒåŸŸ
        </WarmButton>
      </div>
    </FadeIn>
  );
}
```

### ç¤ºä¾‹3ï¼šç»Ÿä¸€åŠ è½½çŠ¶æ€

```typescript
// ä»»ä½•éœ€è¦åŠ è½½çš„ç»„ä»¶
import { Loading } from '../components/ui';

function MyComponent() {
  const [loading, setLoading] = useState(false);
  
  if (loading) {
    return <Loading message="æ­£åœ¨åŠ è½½..." />;
  }
  
  return <div>å†…å®¹</div>;
}
```

---

## âš™ï¸ é…ç½®é€‰é¡¹

### åœ¨SettingsModalä¸­æ·»åŠ æ¸©åº¦æ„Ÿé…ç½®

```typescript
// SettingsModal.tsx
import { useTemperatureConfig } from '../services/temperature/useTemperatureConfig';

function SettingsModal() {
  const { config, setConfig } = useTemperatureConfig();
  
  return (
    <div>
      <h3>æ¸©åº¦æ„Ÿè®¾ç½®</h3>
      
      <label>
        <input
          type="checkbox"
          checked={config.enabled}
          onChange={(e) => setConfig({ ...config, enabled: e.target.checked })}
        />
        å¯ç”¨æ¸©åº¦æ„Ÿç³»ç»Ÿ
      </label>
      
      <label>
        <input
          type="checkbox"
          checked={config.features.characterExpression}
          onChange={(e) => setConfig({
            ...config,
            features: {
              ...config.features,
              characterExpression: e.target.checked,
            },
          })}
        />
        è§’è‰²è¡¨æƒ…
      </label>
      
      {/* æ›´å¤šé…ç½®é€‰é¡¹ */}
    </div>
  );
}
```

---

## ğŸ› å¸¸è§é—®é¢˜

### Q1: æ ·å¼ä¸ç”Ÿæ•ˆï¼Ÿ

**A**: ç¡®ä¿ï¼š
1. å·²å¯¼å…¥`tokens.css`
2. åœ¨æ ¹å…ƒç´ æ·»åŠ äº†`temperature-warm`ç±»
3. Tailwindé…ç½®å·²æ›´æ–°

### Q2: ç»„ä»¶å†²çªï¼Ÿ

**A**: ä½¿ç”¨åˆ«åå¯¼å…¥ï¼š
```typescript
import { Button as WarmButton } from './components/ui/Button';
```

### Q3: æ€§èƒ½é—®é¢˜ï¼Ÿ

**A**: 
1. æ£€æŸ¥æ˜¯å¦å¯ç”¨äº†æ‡’åŠ è½½
2. å‡å°‘åŠ¨ç”»å¤æ‚åº¦
3. ä½¿ç”¨`will-change`ä¼˜åŒ–åŠ¨ç”»

### Q4: å¦‚ä½•å›é€€ï¼Ÿ

**A**: åœ¨é…ç½®ä¸­å…³é—­æ¸©åº¦æ„Ÿï¼š
```typescript
setConfig({ ...config, enabled: false });
```

---

## ğŸ“š ä¸‹ä¸€æ­¥

1. é˜…è¯»[é‡æ–°è§„åˆ’å®æ–½æ–¹æ¡ˆ](./æ¸©åº¦æ„Ÿç³»ç»Ÿé‡æ–°è§„åˆ’å®æ–½æ–¹æ¡ˆ.md)
2. æŸ¥çœ‹[ä½¿ç”¨æŒ‡å—](./æ¸©åº¦æ„Ÿç³»ç»Ÿä½¿ç”¨æŒ‡å—.md)
3. å‚è€ƒ[å®æ–½æ€»ç»“](./æ¸©åº¦æ„Ÿç³»ç»Ÿå®æ–½æ€»ç»“.md)

---

**å¼€å§‹æ—¶é—´**ï¼šç°åœ¨  
**é¢„è®¡å®Œæˆ**ï¼š2-3å‘¨  
**ä¼˜å…ˆçº§**ï¼šP0ï¼ˆæ ¸å¿ƒåŠŸèƒ½ï¼‰

