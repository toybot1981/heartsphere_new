# 记忆系统快速验证指南

**文档版本**: V1.0  
**编写日期**: 2025-12-28

---

## 🚀 快速验证步骤

### 1. 环境检查（5分钟）

```bash
# 检查Redis
redis-cli ping
# 应该返回: PONG

# 检查MongoDB
mongosh --eval "db.version()"
# 应该返回MongoDB版本号

# 检查服务端口
lsof -i :6379  # Redis
lsof -i :27017 # MongoDB
```

### 2. 编译项目（2分钟）

```bash
cd backend
mvn clean compile
# 应该成功编译，无错误
```

### 3. 运行基础测试（5分钟）

```bash
# 运行单元测试
mvn test -Dtest=RedisShortMemoryServiceTest
mvn test -Dtest=TemperatureMemoryServiceTest

# 应该所有测试通过
```

### 4. 手动验证（10分钟）

#### 4.1 验证Redis连接

```bash
redis-cli
> SET memory:test "hello"
> GET memory:test
> DEL memory:test
```

#### 4.2 验证MongoDB连接

```bash
mongosh heartsphere
> db.user_memories.insertOne({
    userId: "test-user",
    type: "EMOTION_PATTERN",
    content: "测试记忆",
    importance: "NORMAL",
    createdAt: new Date()
  })
> db.user_memories.find({userId: "test-user"})
> db.user_memories.deleteMany({userId: "test-user"})
```

### 5. 启动应用验证（5分钟）

```bash
cd backend
mvn spring-boot:run

# 在另一个终端测试API
curl http://localhost:8081/actuator/health
# 应该返回健康状态
```

---

## ✅ 验证检查清单

### 基础功能

- [ ] Redis连接正常
- [ ] MongoDB连接正常
- [ ] 项目编译成功
- [ ] 单元测试通过
- [ ] 应用启动成功

### 核心功能

- [ ] 短期记忆服务可用
- [ ] 长期记忆服务可用
- [ ] 记忆管理器可用
- [ ] 温度感记忆服务可用

### 集成功能

- [ ] 与温度感系统集成正常
- [ ] 记忆提取功能正常
- [ ] 记忆检索功能正常

---

## 🔧 常见问题排查

### 问题1: Redis连接失败

**症状**: `Connection refused`

**解决**:
```bash
# 启动Redis
redis-server

# 或使用brew
brew services start redis
```

### 问题2: MongoDB连接失败

**症状**: `Connection refused`

**解决**:
```bash
# 启动MongoDB
mongod --config /usr/local/etc/mongod.conf --fork

# 或使用brew
brew services start mongodb-community
```

### 问题3: 编译错误

**症状**: `Cannot resolve symbol`

**解决**:
```bash
# 清理并重新编译
mvn clean
mvn compile

# 刷新IDE
# IntelliJ: File -> Invalidate Caches / Restart
```

### 问题4: 测试失败

**症状**: `Test failed`

**解决**:
1. 检查数据库是否运行
2. 检查测试数据是否清理
3. 检查配置文件是否正确

---

## 📊 验证结果记录

### 验证日期: ___________

### 环境信息
- Redis版本: ___________
- MongoDB版本: ___________
- Java版本: ___________
- Spring Boot版本: ___________

### 验证结果
- [ ] 环境检查: ✅ / ❌
- [ ] 编译测试: ✅ / ❌
- [ ] 单元测试: ✅ / ❌
- [ ] 集成测试: ✅ / ❌
- [ ] 手动验证: ✅ / ❌

### 问题记录
1. ___________
2. ___________
3. ___________

---

## 🎯 下一步

验证通过后，可以：
1. 开始实现MemoryExtractor
2. 实现REST API
3. 编写更多测试用例
4. 进行性能测试

---

**验证完成！** ✅

