# 心域连接后台管理 - 快速测试指南

## 🚀 快速开始

### 1. 启动后端服务

```bash
# 进入后端目录
cd backend

# 使用 Maven 启动（需要 Java 17+）
mvn spring-boot:run

# 或者使用 IDE 运行主类
# 主类: com.heartsphere.HeartSphereApplication
```

**验证后端启动成功**:
- 看到 "Started HeartSphereApplication" 日志
- 访问 http://localhost:8081/api/health 返回正常

### 2. 启动前端服务

```bash
# 进入前端目录
cd frontend

# 安装依赖（首次运行）
npm install

# 启动开发服务器
npm run dev
```

**验证前端启动成功**:
- 浏览器自动打开或访问 http://localhost:3001
- 看到应用界面

### 3. 运行 API 测试脚本

```bash
# 在项目根目录运行
./scripts/test-heartconnect-admin.sh [admin_username] [admin_password]

# 示例
./scripts/test-heartconnect-admin.sh admin admin123
```

## 📋 手动测试步骤

### 步骤 1: 访问管理后台

1. 打开浏览器访问: `http://localhost:3001/admin.html`
2. 使用管理员账号登录
3. 验证登录成功

### 步骤 2: 测试共享配置管理

1. 点击左侧菜单"心域连接管理"
2. 选择"共享配置管理"标签页
3. 观察：
   - ✅ 是否显示加载动画
   - ✅ 数据是否正常加载
   - ✅ 空状态或错误状态是否正常显示

### 步骤 3: 测试操作功能

1. 尝试点击"启用"、"禁用"等按钮
2. 观察：
   - ✅ 是否显示确认对话框
   - ✅ 按钮是否显示"处理中..."状态
   - ✅ 操作成功后是否显示提示
   - ✅ 列表是否自动刷新

### 步骤 4: 测试错误处理

1. 打开浏览器开发者工具（F12）
2. 切换到 Network 标签页
3. 在浏览器中禁用网络（或断开网络）
4. 尝试加载数据
5. 观察：
   - ✅ 是否显示错误状态组件
   - ✅ 是否显示友好的错误提示
   - ✅ 是否提供重试按钮

### 步骤 5: 测试其他功能模块

依次测试：
- 连接请求管理
- 访问记录管理
- 留言管理
- 数据统计
- 异常处理

## 🔍 检查清单

### 功能检查
- [ ] 所有页面可以正常加载
- [ ] 数据列表可以正常显示
- [ ] 筛选功能正常工作
- [ ] 操作按钮正常工作
- [ ] 分页功能正常工作

### 用户体验检查
- [ ] 加载状态显示正常
- [ ] 空状态提示友好
- [ ] 错误状态显示正常
- [ ] 操作反馈及时
- [ ] 按钮状态正确

### 错误处理检查
- [ ] 网络错误处理正常
- [ ] 401 错误处理正常
- [ ] 403 错误处理正常
- [ ] 404 错误处理正常
- [ ] 500 错误处理正常

## 🐛 常见问题

### 问题 1: 后端无法启动

**可能原因**:
- 端口 8081 被占用
- 数据库连接失败
- Java 版本不匹配

**解决方法**:
```bash
# 检查端口占用
lsof -i :8081

# 检查 Java 版本
java -version  # 需要 Java 17+

# 查看详细错误日志
cd backend
mvn spring-boot:run
```

### 问题 2: 前端无法连接后端

**可能原因**:
- 后端服务未启动
- API 地址配置错误
- CORS 配置问题

**解决方法**:
```bash
# 检查后端是否运行
curl http://localhost:8081/api/health

# 检查前端 API 配置
# 文件: frontend/services/api/base/request.ts
# 确认 API_BASE_URL = 'http://localhost:8081/api'
```

### 问题 3: 登录失败

**可能原因**:
- 管理员账号不存在
- 密码错误
- Token 生成失败

**解决方法**:
```bash
# 检查数据库中的管理员账号
# 或创建新的管理员账号

# 查看后端日志
# 查找登录相关的错误信息
```

### 问题 4: API 返回 401 错误

**可能原因**:
- Token 过期
- Token 格式错误
- Token 验证失败

**解决方法**:
```bash
# 重新登录获取新 Token
# 检查 Token 是否正确传递
# 查看浏览器 Network 标签页中的请求头
```

## 📊 测试报告

测试完成后，请填写以下信息：

```
测试日期: ___________
测试人员: ___________
测试环境: ___________

功能测试结果:
- 共享配置管理: ✅ / ❌
- 连接请求管理: ✅ / ❌
- 访问记录管理: ✅ / ❌
- 留言管理: ✅ / ❌
- 数据统计: ✅ / ❌
- 异常处理: ✅ / ❌

发现的问题:
1. _________________________________
2. _________________________________

建议:
1. _________________________________
2. _________________________________
```

## 🎯 下一步

测试完成后：
1. 记录发现的问题
2. 修复 bug
3. 优化用户体验
4. 完善功能
5. 性能优化

## 📚 相关文档

- [API 测试指南](./心域连接后台管理API测试指南.md)
- [测试步骤](./心域连接后台管理测试步骤.md)
- [优化总结](./心域连接后台管理优化总结.md)



