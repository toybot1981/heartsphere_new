# å¢åŠ ç³»ç»Ÿæ¸©åº¦æ„Ÿéœ€æ±‚åˆ†ææ–‡æ¡£ - ç¬¬å››é˜¶æ®µ

**æ–‡æ¡£ç‰ˆæœ¬**: V1.0  
**ç¼–å†™æ—¥æœŸ**: 2025-12-22  
**äº§å“å®šä½**: å¿ƒåŸŸ - åˆ©ç”¨AIèƒ½åŠ›ä¸ºç”¨æˆ·æä¾›å¿ƒçµåœæ”¾çš„æ¸¯æ¹¾  
**ç›®æ ‡**: å®ç°æƒ…æ„Ÿè¡¨è¾¾æ‰©å±•å’Œç¤¾äº¤æ¸©åº¦æå‡ï¼Œè®©ç”¨æˆ·ä¹‹é—´çš„è¿æ¥æ›´æœ‰æ¸©åº¦

---

## ä¸€ã€éœ€æ±‚æ¦‚è¿°

### 1.1 èƒŒæ™¯

è¦è®©å¿ƒåŸŸæˆä¸ºä¸€ä¸ªçœŸæ­£æœ‰æ¸©åº¦çš„å¿ƒçµæ¸¯æ¹¾ï¼Œä¸ä»…éœ€è¦ç³»ç»Ÿå¯¹ç”¨æˆ·æœ‰æ¸©åº¦ï¼Œè¿˜éœ€è¦ï¼š
1. **ä¸°å¯Œçš„æƒ…æ„Ÿè¡¨è¾¾**ï¼šæä¾›æ›´å¤šæ–¹å¼è®©ç”¨æˆ·è¡¨è¾¾æƒ…æ„Ÿ
2. **æ¸©æš–çš„ç¤¾äº¤è¿æ¥**ï¼šè®©ç”¨æˆ·ä¹‹é—´çš„è¿æ¥æ›´æœ‰æ¸©åº¦ï¼Œå½¢æˆæ¸©æš–çš„ç¤¾åŒº

### 1.2 æ ¸å¿ƒç›®æ ‡

- âœ… **æƒ…æ„Ÿè¡¨è¾¾æ‰©å±•**ï¼šæä¾›æ›´å¤šå…ƒåŒ–çš„æƒ…æ„Ÿè¡¨è¾¾æ–¹å¼
- âœ… **ç¤¾äº¤æ¸©åº¦æå‡**ï¼šè®©ç”¨æˆ·ä¹‹é—´çš„äº’åŠ¨æ›´æœ‰æ¸©åº¦
- âœ… **ç¤¾åŒºæ°›å›´**ï¼šè¥é€ æ¸©æš–ã€æ”¯æŒæ€§çš„ç¤¾åŒºæ°›å›´
- âœ… **æƒ…æ„Ÿå…±é¸£**ï¼šä¿ƒè¿›ç”¨æˆ·ä¹‹é—´çš„æƒ…æ„Ÿå…±é¸£
- âœ… **æ¸©æš–ä¼ æ’­**ï¼šè®©æ¸©æš–åœ¨ç¤¾åŒºä¸­ä¼ æ’­

---

## äºŒã€æƒ…æ„Ÿè¡¨è¾¾æ‰©å±•

### 2.1 å¤šå…ƒåŒ–è¡¨è¾¾æ–¹å¼

#### 2.1.1 è§†è§‰è¡¨è¾¾æ‰©å±•

**åŠŸèƒ½æè¿°**: æä¾›æ›´å¤šè§†è§‰è¡¨è¾¾æ–¹å¼

**è¯¦ç»†éœ€æ±‚**:

1. **è¡¨æƒ…ç¬¦å·æ‰©å±•**
   - **ä¸°å¯Œè¡¨æƒ…åº“**ï¼šæä¾›ä¸°å¯Œçš„è¡¨æƒ…ç¬¦å·åº“
   - **è‡ªå®šä¹‰è¡¨æƒ…**ï¼šæ”¯æŒç”¨æˆ·è‡ªå®šä¹‰è¡¨æƒ…ï¼ˆå¯é€‰ï¼‰
   - **è¡¨æƒ…ç»„åˆ**ï¼šæ”¯æŒè¡¨æƒ…ç¬¦å·ç»„åˆ
   - **åŠ¨æ€è¡¨æƒ…**ï¼šæ”¯æŒåŠ¨æ€è¡¨æƒ…ï¼ˆGIF/åŠ¨ç”»ï¼‰

2. **è´´çº¸ç³»ç»Ÿ**
   - **ä¸»é¢˜è´´çº¸**ï¼šä¸åŒä¸»é¢˜çš„è´´çº¸åŒ…
   - **æƒ…æ„Ÿè´´çº¸**ï¼šä¸“é—¨è¡¨è¾¾æƒ…æ„Ÿçš„è´´çº¸
   - **èŠ‚æ—¥è´´çº¸**ï¼šèŠ‚æ—¥ä¸»é¢˜è´´çº¸
   - **ä¸ªæ€§åŒ–è´´çº¸**ï¼šç”¨æˆ·ä¸ªæ€§åŒ–çš„è´´çº¸ï¼ˆå¯é€‰ï¼‰

3. **è¡¨æƒ…åŒ…ç³»ç»Ÿ**
   - **è¡¨æƒ…åŒ…åº“**ï¼šæä¾›è¡¨æƒ…åŒ…åº“
   - **ä¸»é¢˜è¡¨æƒ…åŒ…**ï¼šä¸åŒä¸»é¢˜çš„è¡¨æƒ…åŒ…
   - **è‡ªå®šä¹‰è¡¨æƒ…åŒ…**ï¼šç”¨æˆ·å¯ä»¥åˆ›å»ºè‡ªå®šä¹‰è¡¨æƒ…åŒ…ï¼ˆå¯é€‰ï¼‰
   - **è¡¨æƒ…åŒ…åˆ†äº«**ï¼šç”¨æˆ·å¯ä»¥åˆ†äº«è¡¨æƒ…åŒ…

4. **æ‰‹ç»˜æ¶‚é¸¦**
   - **ç®€å•æ¶‚é¸¦**ï¼šæä¾›ç®€å•çš„æ¶‚é¸¦å·¥å…·
   - **æ‰‹ç»˜è¡¨æƒ…**ï¼šæ‰‹ç»˜è¡¨æƒ…å’Œå›¾æ¡ˆ
   - **æ¶‚é¸¦åˆ†äº«**ï¼šåˆ†äº«æ¶‚é¸¦ä½œå“ï¼ˆå¯é€‰ï¼‰

#### 2.1.2 æ–‡å­—è¡¨è¾¾æ‰©å±•

**åŠŸèƒ½æè¿°**: æä¾›æ›´å¤šæ–‡å­—è¡¨è¾¾æ–¹å¼

**è¯¦ç»†éœ€æ±‚**:

1. **æ–‡å­—æ ·å¼**
   - **å­—ä½“é€‰æ‹©**ï¼šæä¾›å¤šç§å­—ä½“é€‰æ‹©
   - **æ–‡å­—é¢œè‰²**ï¼šä¸°å¯Œçš„æ–‡å­—é¢œè‰²é€‰æ‹©
   - **æ–‡å­—å¤§å°**ï¼šå¯è°ƒèŠ‚æ–‡å­—å¤§å°
   - **æ–‡å­—ç‰¹æ•ˆ**ï¼šæ–‡å­—ç‰¹æ•ˆï¼ˆå¦‚å‘å…‰ã€é˜´å½±ç­‰ï¼‰

2. **æ–‡å­—è£…é¥°**
   - **è¾¹æ¡†è£…é¥°**ï¼šæ–‡å­—è¾¹æ¡†è£…é¥°
   - **èƒŒæ™¯è£…é¥°**ï¼šæ–‡å­—èƒŒæ™¯è£…é¥°
   - **åˆ†éš”çº¿**ï¼šè£…é¥°æ€§åˆ†éš”çº¿
   - **æ–‡å­—æ’ç‰ˆ**ï¼šä¸°å¯Œçš„æ–‡å­—æ’ç‰ˆé€‰é¡¹

3. **æ–‡å­—æ¨¡æ¿**
   - **æƒ…æ„Ÿæ¨¡æ¿**ï¼šè¡¨è¾¾æƒ…æ„Ÿçš„æ–‡å­—æ¨¡æ¿
   - **é—®å€™æ¨¡æ¿**ï¼šé—®å€™è¯­çš„æ¨¡æ¿
   - **é¼“åŠ±æ¨¡æ¿**ï¼šé¼“åŠ±è¯­çš„æ¨¡æ¿
   - **è‡ªå®šä¹‰æ¨¡æ¿**ï¼šç”¨æˆ·å¯ä»¥ä¿å­˜è‡ªå®šä¹‰æ¨¡æ¿

#### 2.1.3 å¤šåª’ä½“è¡¨è¾¾

**åŠŸèƒ½æè¿°**: æ”¯æŒå¤šåª’ä½“è¡¨è¾¾æ–¹å¼

**è¯¦ç»†éœ€æ±‚**:

1. **å›¾ç‰‡è¡¨è¾¾**
   - **å›¾ç‰‡ä¸Šä¼ **ï¼šä¸Šä¼ å›¾ç‰‡è¡¨è¾¾æƒ…æ„Ÿ
   - **å›¾ç‰‡ç¼–è¾‘**ï¼šç®€å•çš„å›¾ç‰‡ç¼–è¾‘åŠŸèƒ½
   - **å›¾ç‰‡æ»¤é•œ**ï¼šå›¾ç‰‡æ»¤é•œæ•ˆæœ
   - **å›¾ç‰‡æ ‡æ³¨**ï¼šåœ¨å›¾ç‰‡ä¸Šæ·»åŠ æ–‡å­—æˆ–æ ‡æ³¨

2. **è¯­éŸ³è¡¨è¾¾**
   - **è¯­éŸ³æ¶ˆæ¯**ï¼šå‘é€è¯­éŸ³æ¶ˆæ¯
   - **è¯­éŸ³æ—¶é•¿**ï¼šæ”¯æŒè¾ƒé•¿çš„è¯­éŸ³ï¼ˆå¦‚60ç§’ï¼‰
   - **è¯­éŸ³è½¬æ–‡å­—**ï¼šè¯­éŸ³è½¬æ–‡å­—ï¼ˆå¯é€‰ï¼‰
   - **è¯­éŸ³ç‰¹æ•ˆ**ï¼šè¯­éŸ³ç‰¹æ•ˆï¼ˆå¦‚å˜å£°ç­‰ï¼Œå¯é€‰ï¼‰

3. **è§†é¢‘è¡¨è¾¾**ï¼ˆå¯é€‰ï¼‰
   - **çŸ­è§†é¢‘**ï¼šå‘é€çŸ­è§†é¢‘æ¶ˆæ¯
   - **è§†é¢‘æ—¶é•¿**ï¼šé™åˆ¶è§†é¢‘æ—¶é•¿ï¼ˆå¦‚30ç§’ï¼‰
   - **è§†é¢‘ç¼–è¾‘**ï¼šç®€å•çš„è§†é¢‘ç¼–è¾‘åŠŸèƒ½
   - **è§†é¢‘æ»¤é•œ**ï¼šè§†é¢‘æ»¤é•œæ•ˆæœ

4. **éŸ³ä¹è¡¨è¾¾**ï¼ˆå¯é€‰ï¼‰
   - **éŸ³ä¹åˆ†äº«**ï¼šåˆ†äº«éŸ³ä¹è¡¨è¾¾æƒ…æ„Ÿ
   - **éŸ³ä¹æ¨è**ï¼šåŸºäºæƒ…æ„Ÿæ¨èéŸ³ä¹
   - **éŸ³ä¹æ’­æ”¾**ï¼šåœ¨æ¶ˆæ¯ä¸­æ’­æ”¾éŸ³ä¹

#### 2.1.4 åˆ›æ„è¡¨è¾¾

**åŠŸèƒ½æè¿°**: æ”¯æŒåˆ›æ„è¡¨è¾¾æ–¹å¼

**è¯¦ç»†éœ€æ±‚**:

1. **è¯—æ­Œåˆ›ä½œ**
   - **è¯—æ­Œç”Ÿæˆ**ï¼šAIè¾…åŠ©ç”Ÿæˆè¯—æ­Œ
   - **è¯—æ­Œæ¨¡æ¿**ï¼šè¯—æ­Œæ¨¡æ¿
   - **è¯—æ­Œåˆ†äº«**ï¼šåˆ†äº«è¯—æ­Œä½œå“
   - **è¯—æ­Œæ”¶è—**ï¼šæ”¶è—å–œæ¬¢çš„è¯—æ­Œ

2. **å¡ç‰‡åˆ¶ä½œ**
   - **ç”µå­å¡ç‰‡**ï¼šåˆ¶ä½œç”µå­å¡ç‰‡
   - **å¡ç‰‡æ¨¡æ¿**ï¼šä¸°å¯Œçš„å¡ç‰‡æ¨¡æ¿
   - **å¡ç‰‡å®šåˆ¶**ï¼šå®šåˆ¶å¡ç‰‡å†…å®¹
   - **å¡ç‰‡å‘é€**ï¼šå‘é€å¡ç‰‡ç»™ä»–äºº

3. **æ•…äº‹åˆ›ä½œ**ï¼ˆå¯é€‰ï¼‰
   - **çŸ­æ•…äº‹**ï¼šåˆ›ä½œçŸ­æ•…äº‹è¡¨è¾¾æƒ…æ„Ÿ
   - **æ•…äº‹åˆ†äº«**ï¼šåˆ†äº«æ•…äº‹
   - **æ•…äº‹äº’åŠ¨**ï¼šå…¶ä»–äººå¯ä»¥å¯¹æ•…äº‹è¿›è¡Œäº’åŠ¨

### 2.2 æƒ…æ„Ÿè¡¨è¾¾åœºæ™¯

#### 2.2.1 å¯¹è¯è¡¨è¾¾

**åŠŸèƒ½æè¿°**: åœ¨å¯¹è¯ä¸­ä¸°å¯Œæƒ…æ„Ÿè¡¨è¾¾

**è¯¦ç»†éœ€æ±‚**:

1. **å¯¹è¯å¢å¼º**
   - **è¡¨æƒ…å›å¤**ï¼šåœ¨å¯¹è¯ä¸­ä½¿ç”¨è¡¨æƒ…å›å¤
   - **è´´çº¸å›å¤**ï¼šä½¿ç”¨è´´çº¸å›å¤
   - **è¯­éŸ³å›å¤**ï¼šä½¿ç”¨è¯­éŸ³å›å¤
   - **å›¾ç‰‡åˆ†äº«**ï¼šåœ¨å¯¹è¯ä¸­åˆ†äº«å›¾ç‰‡

2. **æƒ…æ„Ÿæ ‡æ³¨**
   - **æƒ…æ„Ÿæ ‡ç­¾**ï¼šä¸ºæ¶ˆæ¯æ·»åŠ æƒ…æ„Ÿæ ‡ç­¾
   - **æƒ…æ„Ÿå¼ºåº¦**ï¼šæ ‡æ³¨æƒ…æ„Ÿå¼ºåº¦
   - **æƒ…æ„Ÿå¯è§†åŒ–**ï¼šå¯è§†åŒ–æ˜¾ç¤ºæƒ…æ„Ÿ

3. **æƒ…æ„Ÿå›åº”**
   - **å¿«é€Ÿå›åº”**ï¼šå¿«é€Ÿæƒ…æ„Ÿå›åº”ï¼ˆå¦‚ç‚¹èµã€æ‹¥æŠ±ç­‰ï¼‰
   - **æƒ…æ„Ÿå…±é¸£**ï¼šè¡¨è¾¾æƒ…æ„Ÿå…±é¸£
   - **æƒ…æ„Ÿæ”¯æŒ**ï¼šè¡¨è¾¾æƒ…æ„Ÿæ”¯æŒ

#### 2.2.2 æ—¥è®°è¡¨è¾¾

**åŠŸèƒ½æè¿°**: åœ¨æ—¥è®°ä¸­ä¸°å¯Œæƒ…æ„Ÿè¡¨è¾¾

**è¯¦ç»†éœ€æ±‚**:

1. **æ—¥è®°å¢å¼º**
   - **å¯Œæ–‡æœ¬ç¼–è¾‘**ï¼šæ”¯æŒå¯Œæ–‡æœ¬ç¼–è¾‘
   - **å¤šåª’ä½“æ’å…¥**ï¼šæ’å…¥å›¾ç‰‡ã€éŸ³é¢‘ç­‰
   - **è¡¨æƒ…ä½¿ç”¨**ï¼šåœ¨æ—¥è®°ä¸­ä½¿ç”¨è¡¨æƒ…
   - **æ‰‹ç»˜æ¶‚é¸¦**ï¼šåœ¨æ—¥è®°ä¸­æ·»åŠ æ¶‚é¸¦

2. **æƒ…æ„Ÿæ ‡è®°**
   - **æƒ…æ„Ÿæ ‡ç­¾**ï¼šä¸ºæ—¥è®°æ·»åŠ æƒ…æ„Ÿæ ‡ç­¾
   - **æƒ…ç»ªè®°å½•**ï¼šè®°å½•å†™æ—¥è®°æ—¶çš„æƒ…ç»ª
   - **æƒ…æ„Ÿå¯è§†åŒ–**ï¼šå¯è§†åŒ–æ—¥è®°çš„æƒ…æ„Ÿå˜åŒ–

3. **æ—¥è®°åˆ†äº«**ï¼ˆå¯é€‰ï¼‰
   - **åˆ†äº«åŠŸèƒ½**ï¼šåˆ†äº«æ—¥è®°ç»™ä»–äºº
   - **åŒ¿ååˆ†äº«**ï¼šåŒ¿ååˆ†äº«æ—¥è®°
   - **åˆ†äº«è®¾ç½®**ï¼šæ§åˆ¶åˆ†äº«èŒƒå›´

#### 2.2.3 ç•™è¨€è¡¨è¾¾

**åŠŸèƒ½æè¿°**: åœ¨ç•™è¨€ä¸­ä¸°å¯Œæƒ…æ„Ÿè¡¨è¾¾ï¼ˆå¦‚å¿ƒåŸŸè¿æ¥åŠŸèƒ½çš„æš–å¿ƒç•™è¨€ï¼‰

**è¯¦ç»†éœ€æ±‚**:

1. **ç•™è¨€å¢å¼º**
   - **å¤šåª’ä½“ç•™è¨€**ï¼šæ”¯æŒå¤šåª’ä½“ç•™è¨€
   - **è¡¨æƒ…ä½¿ç”¨**ï¼šä½¿ç”¨è¡¨æƒ…å’Œè´´çº¸
   - **å¡ç‰‡ç•™è¨€**ï¼šä½¿ç”¨å¡ç‰‡ç•™è¨€
   - **è¯­éŸ³ç•™è¨€**ï¼šè¯­éŸ³ç•™è¨€

2. **ç•™è¨€æ¨¡æ¿**
   - **ç•™è¨€æ¨¡æ¿åº“**ï¼šæä¾›ç•™è¨€æ¨¡æ¿
   - **ä¸ªæ€§åŒ–æ¨¡æ¿**ï¼šä¸ªæ€§åŒ–ç•™è¨€æ¨¡æ¿
   - **å¿«é€Ÿç•™è¨€**ï¼šå¿«é€Ÿé€‰æ‹©æ¨¡æ¿ç•™è¨€

3. **ç•™è¨€äº’åŠ¨**
   - **ç•™è¨€å›å¤**ï¼šå›å¤ç•™è¨€
   - **ç•™è¨€ç‚¹èµ**ï¼šä¸ºç•™è¨€ç‚¹èµ
   - **ç•™è¨€è½¬å‘**ï¼šè½¬å‘ç•™è¨€ï¼ˆå¦‚æœæ”¯æŒï¼‰

### 2.3 æƒ…æ„Ÿè¡¨è¾¾å·¥å…·

#### 2.3.1 è¡¨æƒ…é€‰æ‹©å™¨è¯¦ç»†è®¾è®¡

**åŠŸèƒ½æè¿°**: æ–¹ä¾¿ã€ç›´è§‚çš„è¡¨æƒ…é€‰æ‹©å·¥å…·ï¼Œæ”¯æŒå¤šç§è¡¨æƒ…ç±»å‹å’Œå¿«é€Ÿé€‰æ‹©

**è¯¦ç»†éœ€æ±‚**:

1. **è¡¨æƒ…é€‰æ‹©ç•Œé¢è®¾è®¡**

   **å®Œæ•´ç•Œé¢å¸ƒå±€**:
   ```
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚  é€‰æ‹©è¡¨æƒ…                            [Ã— å…³é—­]   â”‚
   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
   â”‚  [æœ€è¿‘] [å¸¸ç”¨] [è¡¨æƒ…] [è´´çº¸] [è¡¨æƒ…åŒ…] [è‡ªå®šä¹‰] â”‚
   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
   â”‚  ğŸ” [æœç´¢è¡¨æƒ…...]                              â”‚
   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
   â”‚                                                  â”‚
   â”‚  ğŸ˜Š ğŸ˜„ ğŸ˜ ğŸ˜† ğŸ˜… ğŸ˜‚ ğŸ¤£ ğŸ˜Š ğŸ˜‡ ğŸ˜              â”‚
   â”‚  ğŸ¥° ğŸ˜˜ ğŸ˜— ğŸ˜™ ğŸ˜š ğŸ˜‹ ğŸ˜› ğŸ˜ ğŸ˜œ ğŸ¤ª              â”‚
   â”‚  ğŸ¤¨ ğŸ§ ğŸ¤“ ğŸ˜ ğŸ¤© ğŸ¥³ ğŸ˜ ğŸ˜’ ğŸ˜ ğŸ˜”              â”‚
   â”‚  ğŸ˜Ÿ ğŸ˜• ğŸ™ â˜¹ï¸ ğŸ˜£ ğŸ˜– ğŸ˜« ğŸ˜© ğŸ¥º ğŸ˜¢              â”‚
   â”‚  ğŸ˜­ ğŸ˜¤ ğŸ˜  ğŸ˜¡ ğŸ¤¬ ğŸ¤¯ ğŸ˜³ ğŸ¥µ ğŸ¥¶ ğŸ˜±              â”‚
   â”‚                                                  â”‚
   â”‚  [é¢„è§ˆåŒºåŸŸ]                                      â”‚
   â”‚  ğŸ˜Š - å¾®ç¬‘                                       â”‚
   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
   â”‚              [å–æ¶ˆ]        [ç¡®è®¤ä½¿ç”¨]            â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
   ```

   **ç»„ä»¶æ•°æ®ç»“æ„**:
   ```typescript
   interface Emoji {
     id: string;
     code: string; // Unicodeä»£ç æˆ–æ ‡è¯†ç¬¦
     name: string; // è¡¨æƒ…åç§°
     category: EmojiCategory; // åˆ†ç±»
     keywords: string[]; // æœç´¢å…³é”®è¯
     skinTones?: string[]; // è‚¤è‰²å˜ä½“ï¼ˆå¦‚æœé€‚ç”¨ï¼‰
     isCustom: boolean; // æ˜¯å¦è‡ªå®šä¹‰
     creatorId?: number; // åˆ›å»ºè€…IDï¼ˆè‡ªå®šä¹‰è¡¨æƒ…ï¼‰
   }
   
   enum EmojiCategory {
     SMILEYS = 'smileys', // ç¬‘è„¸å’Œäººç‰©
     ANIMALS = 'animals', // åŠ¨ç‰©å’Œè‡ªç„¶
     FOOD = 'food', // é£Ÿç‰©å’Œé¥®æ–™
     ACTIVITIES = 'activities', // æ´»åŠ¨
     TRAVEL = 'travel', // æ—…è¡Œå’Œåœ°ç‚¹
     OBJECTS = 'objects', // ç‰©å“
     SYMBOLS = 'symbols', // ç¬¦å·
     FLAGS = 'flags', // æ——å¸œ
     CUSTOM = 'custom' // è‡ªå®šä¹‰
   }
   
   interface EmojiPickerProps {
     onSelect: (emoji: Emoji) => void;
     onClose: () => void;
     multiSelect?: boolean; // æ˜¯å¦å¤šé€‰
     maxSelection?: number; // æœ€å¤§é€‰æ‹©æ•°é‡
     showPreview?: boolean; // æ˜¾ç¤ºé¢„è§ˆ
   }
   ```

   **Reactç»„ä»¶å®ç°**:
   ```typescript
   // EmojiPicker.tsx
   const EmojiPicker: React.FC<EmojiPickerProps> = ({
     onSelect,
     onClose,
     multiSelect = false,
     maxSelection,
     showPreview = true
   }) => {
     const [selectedCategory, setSelectedCategory] = useState<EmojiCategory>(
       EmojiCategory.SMILEYS
     );
     const [searchQuery, setSearchQuery] = useState('');
     const [selectedEmojis, setSelectedEmojis] = useState<Emoji[]>([]);
     const [hoveredEmoji, setHoveredEmoji] = useState<Emoji | null>(null);
     
     // è·å–è¡¨æƒ…åˆ—è¡¨
     const { emojis, loading } = useEmojis(selectedCategory, searchQuery);
     // è·å–å¸¸ç”¨è¡¨æƒ…
     const { frequentEmojis } = useFrequentEmojis();
     // è·å–æœ€è¿‘ä½¿ç”¨
     const { recentEmojis } = useRecentEmojis();
     
     const handleEmojiClick = (emoji: Emoji) => {
       if (multiSelect) {
         if (selectedEmojis.find(e => e.id === emoji.id)) {
           setSelectedEmojis(selectedEmojis.filter(e => e.id !== emoji.id));
         } else {
           if (maxSelection && selectedEmojis.length >= maxSelection) {
             return; // è¾¾åˆ°æœ€å¤§é€‰æ‹©æ•°
           }
           setSelectedEmojis([...selectedEmojis, emoji]);
         }
       } else {
         onSelect(emoji);
         onClose();
       }
     };
     
     const handleConfirm = () => {
       if (selectedEmojis.length > 0) {
         // å¤šé€‰æ¨¡å¼ï¼Œè¿”å›æ‰€æœ‰é€‰ä¸­çš„è¡¨æƒ…
         selectedEmojis.forEach(emoji => onSelect(emoji));
         // è®°å½•ä½¿ç”¨
         selectedEmojis.forEach(emoji => recordEmojiUsage(emoji.id));
         onClose();
       }
     };
     
     return (
       <div className="emoji-picker-overlay" onClick={onClose}>
         <div className="emoji-picker-container" onClick={e => e.stopPropagation()}>
           {/* å¤´éƒ¨ */}
           <div className="emoji-picker-header">
             <h3>é€‰æ‹©è¡¨æƒ…</h3>
             <button className="close-button" onClick={onClose}>Ã—</button>
           </div>
           
           {/* åˆ†ç±»æ ‡ç­¾ */}
           <div className="emoji-category-tabs">
             <button
               className={selectedCategory === 'recent' ? 'active' : ''}
               onClick={() => setSelectedCategory('recent' as any)}
             >
               æœ€è¿‘
             </button>
             <button
               className={selectedCategory === 'frequent' ? 'active' : ''}
               onClick={() => setSelectedCategory('frequent' as any)}
             >
               å¸¸ç”¨
             </button>
             {Object.values(EmojiCategory).map(category => (
               <button
                 key={category}
                 className={selectedCategory === category ? 'active' : ''}
                 onClick={() => setSelectedCategory(category)}
               >
                 {getCategoryIcon(category)}
               </button>
             ))}
           </div>
           
           {/* æœç´¢æ¡† */}
           <div className="emoji-search">
             <input
               type="text"
               placeholder="æœç´¢è¡¨æƒ…..."
               value={searchQuery}
               onChange={(e) => setSearchQuery(e.target.value)}
             />
           </div>
           
           {/* è¡¨æƒ…ç½‘æ ¼ */}
           <div className="emoji-grid">
             {emojis.map(emoji => (
               <button
                 key={emoji.id}
                 className={`emoji-item ${
                   selectedEmojis.find(e => e.id === emoji.id) ? 'selected' : ''
                 }`}
                 onClick={() => handleEmojiClick(emoji)}
                 onMouseEnter={() => setHoveredEmoji(emoji)}
                 onMouseLeave={() => setHoveredEmoji(null)}
                 title={emoji.name}
               >
                 {emoji.code}
               </button>
             ))}
           </div>
           
           {/* é¢„è§ˆåŒºåŸŸ */}
           {showPreview && hoveredEmoji && (
             <div className="emoji-preview">
               <span className="emoji-preview-icon">{hoveredEmoji.code}</span>
               <span className="emoji-preview-name">{hoveredEmoji.name}</span>
             </div>
           )}
           
           {/* åº•éƒ¨æ“ä½œ */}
           {multiSelect && (
             <div className="emoji-picker-footer">
               <span className="selection-count">
                 å·²é€‰æ‹© {selectedEmojis.length}
                 {maxSelection && ` / ${maxSelection}`}
               </span>
               <button
                 className="confirm-button"
                 onClick={handleConfirm}
                 disabled={selectedEmojis.length === 0}
               >
                 ç¡®è®¤ä½¿ç”¨
               </button>
             </div>
           )}
         </div>
       </div>
     );
   };
   ```

   **æ ·å¼è®¾è®¡**:
   ```css
   .emoji-picker-overlay {
     position: fixed;
     top: 0;
     left: 0;
     right: 0;
     bottom: 0;
     background: rgba(0, 0, 0, 0.3);
     display: flex;
     align-items: center;
     justify-content: center;
     z-index: 1000;
   }
   
   .emoji-picker-container {
     background: white;
     border-radius: 16px;
     box-shadow: 0 8px 32px rgba(0, 0, 0, 0.15);
     width: 480px;
     max-height: 600px;
     display: flex;
     flex-direction: column;
     overflow: hidden;
   }
   
   .emoji-picker-header {
     display: flex;
     justify-content: space-between;
     align-items: center;
     padding: 16px 20px;
     border-bottom: 1px solid #f0f0f0;
   }
   
   .emoji-picker-header h3 {
     margin: 0;
     font-size: 18px;
     font-weight: 600;
     color: #333;
   }
   
   .close-button {
     background: none;
     border: none;
     font-size: 24px;
     color: #999;
     cursor: pointer;
     padding: 0;
     width: 32px;
     height: 32px;
     display: flex;
     align-items: center;
     justify-content: center;
     border-radius: 4px;
     transition: all 0.2s;
   }
   
   .close-button:hover {
     background: #f5f5f5;
     color: #666;
   }
   
   .emoji-category-tabs {
     display: flex;
     padding: 12px 20px;
     border-bottom: 1px solid #f0f0f0;
     gap: 8px;
     overflow-x: auto;
   }
   
   .emoji-category-tabs button {
     background: none;
     border: none;
     padding: 8px 12px;
     border-radius: 8px;
     cursor: pointer;
     font-size: 14px;
     color: #666;
     transition: all 0.2s;
     white-space: nowrap;
   }
   
   .emoji-category-tabs button:hover {
     background: #f5f5f5;
   }
   
   .emoji-category-tabs button.active {
     background: #FF9999;
     color: white;
   }
   
   .emoji-search {
     padding: 12px 20px;
     border-bottom: 1px solid #f0f0f0;
   }
   
   .emoji-search input {
     width: 100%;
     padding: 8px 12px;
     border: 1px solid #e0e0e0;
     border-radius: 8px;
     font-size: 14px;
     outline: none;
     transition: border-color 0.2s;
   }
   
   .emoji-search input:focus {
     border-color: #FF9999;
   }
   
   .emoji-grid {
     flex: 1;
     overflow-y: auto;
     padding: 16px 20px;
     display: grid;
     grid-template-columns: repeat(10, 1fr);
     gap: 8px;
   }
   
   .emoji-item {
     background: none;
     border: none;
     font-size: 28px;
     width: 36px;
     height: 36px;
     display: flex;
     align-items: center;
     justify-content: center;
     border-radius: 8px;
     cursor: pointer;
     transition: all 0.2s;
     padding: 4px;
   }
   
   .emoji-item:hover {
     background: #f5f5f5;
     transform: scale(1.2);
   }
   
   .emoji-item.selected {
     background: #FFE5E5;
     border: 2px solid #FF9999;
   }
   
   .emoji-preview {
     padding: 12px 20px;
     border-top: 1px solid #f0f0f0;
     display: flex;
     align-items: center;
     gap: 12px;
   }
   
   .emoji-preview-icon {
     font-size: 32px;
   }
   
   .emoji-preview-name {
     font-size: 14px;
     color: #666;
   }
   
   .emoji-picker-footer {
     padding: 12px 20px;
     border-top: 1px solid #f0f0f0;
     display: flex;
     justify-content: space-between;
     align-items: center;
   }
   
   .selection-count {
     font-size: 14px;
     color: #666;
   }
   
   .confirm-button {
     padding: 8px 20px;
     background: #FF9999;
     color: white;
     border: none;
     border-radius: 8px;
     font-size: 14px;
     font-weight: 500;
     cursor: pointer;
     transition: background 0.2s;
   }
   
   .confirm-button:hover:not(:disabled) {
     background: #FF8888;
   }
   
   .confirm-button:disabled {
     background: #e0e0e0;
     color: #999;
     cursor: not-allowed;
   }
   ```

2. **åŠŸèƒ½ç‰¹æ€§è¯¦ç»†å®ç°**

   **æœç´¢åŠŸèƒ½**:
   ```typescript
   function searchEmojis(emojis: Emoji[], query: string): Emoji[] {
     if (!query.trim()) return emojis;
     
     const lowerQuery = query.toLowerCase();
     return emojis.filter(emoji => 
       emoji.name.toLowerCase().includes(lowerQuery) ||
       emoji.keywords.some(keyword => keyword.toLowerCase().includes(lowerQuery))
     );
   }
   ```

   **å¸¸ç”¨è¡¨æƒ…ç»Ÿè®¡**:
   ```typescript
   interface EmojiUsage {
     emojiId: string;
     userId: number;
     usageCount: number;
     lastUsedAt: number;
   }
   
   // è·å–ç”¨æˆ·å¸¸ç”¨è¡¨æƒ…ï¼ˆåŸºäºä½¿ç”¨é¢‘ç‡ï¼‰
   async function getFrequentEmojis(userId: number, limit: number = 20): Promise<Emoji[]> {
     const usageRecords = await emojiUsageRepository.findByUserIdOrderByUsageCountDesc(
       userId,
       limit
     );
     const emojiIds = usageRecords.map(r => r.emojiId);
     return emojiRepository.findByIds(emojiIds);
   }
   ```

   **æœ€è¿‘ä½¿ç”¨è¡¨æƒ…**:
   ```typescript
   // è·å–æœ€è¿‘ä½¿ç”¨çš„è¡¨æƒ…
   async function getRecentEmojis(userId: number, limit: number = 20): Promise<Emoji[]> {
     const usageRecords = await emojiUsageRepository.findByUserIdOrderByLastUsedAtDesc(
       userId,
       limit
     );
     const emojiIds = usageRecords.map(r => r.emojiId);
     return emojiRepository.findByIds(emojiIds);
   }
   
   // è®°å½•è¡¨æƒ…ä½¿ç”¨
   async function recordEmojiUsage(userId: number, emojiId: string, context?: string) {
     const existing = await emojiUsageRepository.findByUserIdAndEmojiId(userId, emojiId);
     
     if (existing) {
       existing.usageCount++;
       existing.lastUsedAt = Date.now();
       await emojiUsageRepository.save(existing);
     } else {
       const usage = EmojiUsage.builder()
         .userId(userId)
         .emojiId(emojiId)
         .usageCount(1)
         .lastUsedAt(Date.now())
         .build();
       await emojiUsageRepository.save(usage);
     }
   }
   ```

#### 2.3.2 å¡ç‰‡åˆ¶ä½œå·¥å…·è¯¦ç»†è®¾è®¡

**åŠŸèƒ½æè¿°**: åŠŸèƒ½å®Œå–„çš„ç”µå­å¡ç‰‡åˆ¶ä½œå·¥å…·ï¼Œæ”¯æŒå¤šç§æ¨¡æ¿å’Œè‡ªå®šä¹‰è®¾è®¡

**è¯¦ç»†éœ€æ±‚**:

1. **å¡ç‰‡åˆ¶ä½œç•Œé¢è®¾è®¡**

   **å®Œæ•´ç•Œé¢å¸ƒå±€**:
   ```
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚  åˆ¶ä½œå¡ç‰‡                            [Ã— å…³é—­]   â”‚
   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
   â”‚  [æ¨¡æ¿] [è‡ªå®šä¹‰]                                â”‚
   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
   â”‚  â”‚             â”‚  â”‚  å¡ç‰‡å†…å®¹ç¼–è¾‘              â”‚â”‚
   â”‚  â”‚  æ¨¡æ¿é€‰æ‹©   â”‚  â”‚                           â”‚â”‚
   â”‚  â”‚             â”‚  â”‚  æ ‡é¢˜: [____________]      â”‚â”‚
   â”‚  â”‚  [é—®å€™]     â”‚  â”‚                           â”‚â”‚
   â”‚  â”‚  [ç¥ç¦]     â”‚  â”‚  å†…å®¹:                    â”‚â”‚
   â”‚  â”‚  [æ„Ÿè°¢]     â”‚  â”‚  [________________]       â”‚â”‚
   â”‚  â”‚  [é¼“åŠ±]     â”‚  â”‚  [________________]       â”‚â”‚
   â”‚  â”‚             â”‚  â”‚                           â”‚â”‚
   â”‚  â”‚             â”‚  â”‚  æ ·å¼è®¾ç½®:                â”‚â”‚
   â”‚  â”‚             â”‚  â”‚  èƒŒæ™¯: [é¢œè‰²é€‰æ‹©å™¨]       â”‚â”‚
   â”‚  â”‚             â”‚  â”‚  å­—ä½“: [Arial â–¼]         â”‚â”‚
   â”‚  â”‚             â”‚  â”‚  æ–‡å­—é¢œè‰²: [é¢œè‰²]         â”‚â”‚
   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚                           â”‚â”‚
   â”‚                    â”‚  [é¢„è§ˆå¡ç‰‡]               â”‚â”‚
   â”‚                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
   â”‚          [å–æ¶ˆ]           [ä¿å­˜]  [å‘é€]        â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
   ```

   **æ•°æ®ç»“æ„å®šä¹‰**:
   ```typescript
   interface CardTemplate {
     id: string;
     name: string;
     type: CardType;
     category: string;
     previewImage: string; // é¢„è§ˆå›¾URL
     background: {
       type: 'color' | 'image' | 'gradient';
       value: string; // é¢œè‰²å€¼ã€å›¾ç‰‡URLæˆ–æ¸å˜é…ç½®
     };
     layout: CardLayout;
     defaultStyle: {
       titleFont: string;
       titleColor: string;
       titleSize: number;
       contentFont: string;
       contentColor: string;
       contentSize: number;
     };
   }
   
   enum CardType {
     GREETING = 'greeting', // é—®å€™
     BLESSING = 'blessing', // ç¥ç¦
     THANKS = 'thanks', // æ„Ÿè°¢
     ENCOURAGEMENT = 'encouragement', // é¼“åŠ±
     CONGRATULATION = 'congratulation', // ç¥è´º
     SYMPATHY = 'sympathy', // æ…°é—®
     CUSTOM = 'custom' // è‡ªå®šä¹‰
   }
   
   interface CardLayout {
     type: 'simple' | 'centered' | 'split' | 'framed';
     titlePosition: 'top' | 'center' | 'bottom';
     contentPosition: 'top' | 'center' | 'bottom';
     imagePosition?: 'left' | 'right' | 'center' | 'background';
   }
   
   interface Card {
     id: string;
     userId: number;
     templateId?: string;
     type: CardType;
     title: string;
     content: string;
     background: {
       type: 'color' | 'image' | 'gradient';
       value: string;
     };
     style: {
       titleFont: string;
       titleColor: string;
       titleSize: number;
       contentFont: string;
       contentColor: string;
       contentSize: number;
       layout: CardLayout;
     };
     decorations?: {
       emojis?: string[]; // è£…é¥°è¡¨æƒ…
       images?: string[]; // è£…é¥°å›¾ç‰‡
       patterns?: string[]; // è£…é¥°å›¾æ¡ˆ
     };
     createdAt: number;
   }
   
   interface CardMakerProps {
     templateId?: string; // é¢„è®¾æ¨¡æ¿ID
     initialCard?: Partial<Card>; // åˆå§‹å¡ç‰‡æ•°æ®
     onSave?: (card: Card) => void;
     onSend?: (card: Card, recipientId: number) => void;
     onClose: () => void;
   }
   ```

   **Reactç»„ä»¶å®ç°**:
   ```typescript
   // CardMaker.tsx
   const CardMaker: React.FC<CardMakerProps> = ({
     templateId,
     initialCard,
     onSave,
     onSend,
     onClose
   }) => {
     const [selectedTemplate, setSelectedTemplate] = useState<CardTemplate | null>(null);
     const [card, setCard] = useState<Partial<Card>>({
       type: CardType.GREETING,
       title: '',
       content: '',
       background: { type: 'color', value: '#FFE5E5' },
       style: {
         titleFont: 'Arial',
         titleColor: '#333',
         titleSize: 24,
         contentFont: 'Arial',
         contentColor: '#666',
         contentSize: 16,
         layout: {
           type: 'centered',
           titlePosition: 'top',
           contentPosition: 'center'
         }
       },
       ...initialCard
     });
     const [previewMode, setPreviewMode] = useState(false);
     
     // åŠ è½½æ¨¡æ¿åˆ—è¡¨
     const { templates } = useCardTemplates();
     // åŠ è½½é¢„è®¾æ¨¡æ¿
     useEffect(() => {
       if (templateId) {
         const template = templates.find(t => t.id === templateId);
         if (template) {
           applyTemplate(template);
         }
       }
     }, [templateId, templates]);
     
     const applyTemplate = (template: CardTemplate) => {
       setSelectedTemplate(template);
       setCard({
         ...card,
         type: template.type,
         templateId: template.id,
         background: template.background,
         style: {
           ...card.style!,
           ...template.defaultStyle,
           layout: template.layout
         }
       });
     };
     
     const handleSave = async () => {
       const savedCard = await createCard(card as Card);
       onSave?.(savedCard);
       onClose();
     };
     
     const handleSend = async (recipientId: number) => {
       const savedCard = await createCard(card as Card);
       onSend?.(savedCard, recipientId);
       onClose();
     };
     
     return (
       <div className="card-maker-overlay" onClick={onClose}>
         <div className="card-maker-container" onClick={e => e.stopPropagation()}>
           {/* å¤´éƒ¨ */}
           <div className="card-maker-header">
             <h3>åˆ¶ä½œå¡ç‰‡</h3>
             <button className="close-button" onClick={onClose}>Ã—</button>
           </div>
           
           <div className="card-maker-body">
             {/* å·¦ä¾§ï¼šæ¨¡æ¿é€‰æ‹© */}
             <div className="card-maker-sidebar">
               <div className="tab-buttons">
                 <button className="active">æ¨¡æ¿</button>
                 <button>è‡ªå®šä¹‰</button>
               </div>
               
               <div className="template-list">
                 {templates.map(template => (
                   <div
                     key={template.id}
                     className={`template-item ${
                       selectedTemplate?.id === template.id ? 'selected' : ''
                     }`}
                     onClick={() => applyTemplate(template)}
                   >
                     <img src={template.previewImage} alt={template.name} />
                     <span>{template.name}</span>
                   </div>
                 ))}
               </div>
             </div>
             
             {/* ä¸­é—´ï¼šå¡ç‰‡é¢„è§ˆ/ç¼–è¾‘åŒº */}
             <div className="card-maker-main">
               {previewMode ? (
                 <CardPreview card={card as Card} />
               ) : (
                 <CardEditor
                   card={card}
                   onChange={setCard}
                   selectedTemplate={selectedTemplate}
                 />
               )}
               
               <div className="preview-toggle">
                 <button onClick={() => setPreviewMode(!previewMode)}>
                   {previewMode ? 'ç¼–è¾‘' : 'é¢„è§ˆ'}
                 </button>
               </div>
             </div>
           </div>
           
           {/* åº•éƒ¨æ“ä½œ */}
           <div className="card-maker-footer">
             <button className="cancel-button" onClick={onClose}>å–æ¶ˆ</button>
             <button className="save-button" onClick={handleSave}>ä¿å­˜</button>
             <button className="send-button" onClick={() => {/* æ‰“å¼€å‘é€å¯¹è¯æ¡† */}}>
               å‘é€
             </button>
           </div>
         </div>
       </div>
     );
   };
   
   // CardEditor.tsx - å¡ç‰‡ç¼–è¾‘å™¨ç»„ä»¶
   const CardEditor: React.FC<{
     card: Partial<Card>;
     onChange: (card: Partial<Card>) => void;
     selectedTemplate?: CardTemplate | null;
   }> = ({ card, onChange, selectedTemplate }) => {
     return (
       <div className="card-editor">
         {/* æ ‡é¢˜è¾“å…¥ */}
         <div className="editor-field">
           <label>æ ‡é¢˜</label>
           <input
             type="text"
             value={card.title || ''}
             onChange={(e) => onChange({ ...card, title: e.target.value })}
             placeholder="è¾“å…¥å¡ç‰‡æ ‡é¢˜..."
           />
         </div>
         
         {/* å†…å®¹è¾“å…¥ */}
         <div className="editor-field">
           <label>å†…å®¹</label>
           <textarea
             value={card.content || ''}
             onChange={(e) => onChange({ ...card, content: e.target.value })}
             placeholder="è¾“å…¥å¡ç‰‡å†…å®¹..."
             rows={6}
           />
         </div>
         
         {/* æ ·å¼è®¾ç½® */}
         <div className="editor-section">
           <h4>æ ·å¼è®¾ç½®</h4>
           
           {/* èƒŒæ™¯è®¾ç½® */}
           <div className="editor-field">
             <label>èƒŒæ™¯</label>
             <ColorPicker
               value={card.background?.value || '#FFE5E5'}
               onChange={(color) =>
                 onChange({
                   ...card,
                   background: { type: 'color', value: color }
                 })
               }
             />
             <button>é€‰æ‹©å›¾ç‰‡</button>
             <button>é€‰æ‹©æ¸å˜</button>
           </div>
           
           {/* æ ‡é¢˜æ ·å¼ */}
           <div className="editor-field">
             <label>æ ‡é¢˜å­—ä½“</label>
             <select
               value={card.style?.titleFont || 'Arial'}
               onChange={(e) =>
                 onChange({
                   ...card,
                   style: { ...card.style!, titleFont: e.target.value }
                 })
               }
             >
               <option value="Arial">Arial</option>
               <option value="Microsoft YaHei">å¾®è½¯é›…é»‘</option>
               <option value="SimSun">å®‹ä½“</option>
               <option value="KaiTi">æ¥·ä½“</option>
             </select>
             
             <label>æ ‡é¢˜é¢œè‰²</label>
             <ColorPicker
               value={card.style?.titleColor || '#333'}
               onChange={(color) =>
                 onChange({
                   ...card,
                   style: { ...card.style!, titleColor: color }
                 })
               }
             />
             
             <label>æ ‡é¢˜å¤§å°</label>
             <input
               type="number"
               value={card.style?.titleSize || 24}
               onChange={(e) =>
                 onChange({
                   ...card,
                   style: { ...card.style!, titleSize: parseInt(e.target.value) }
                 })
               }
               min={12}
               max={72}
             />
           </div>
           
           {/* å†…å®¹æ ·å¼ */}
           <div className="editor-field">
             <label>å†…å®¹å­—ä½“</label>
             <select
               value={card.style?.contentFont || 'Arial'}
               onChange={(e) =>
                 onChange({
                   ...card,
                   style: { ...card.style!, contentFont: e.target.value }
                 })
               }
             >
               <option value="Arial">Arial</option>
               <option value="Microsoft YaHei">å¾®è½¯é›…é»‘</option>
               <option value="SimSun">å®‹ä½“</option>
             </select>
             
             <label>å†…å®¹é¢œè‰²</label>
             <ColorPicker
               value={card.style?.contentColor || '#666'}
               onChange={(color) =>
                 onChange({
                   ...card,
                   style: { ...card.style!, contentColor: color }
                 })
               }
             />
             
             <label>å†…å®¹å¤§å°</label>
             <input
               type="number"
               value={card.style?.contentSize || 16}
               onChange={(e) =>
                 onChange({
                   ...card,
                   style: { ...card.style!, contentSize: parseInt(e.target.value) }
                 })
               }
               min={12}
               max={36}
             />
           </div>
         </div>
         
         {/* è£…é¥°å…ƒç´  */}
         <div className="editor-section">
           <h4>è£…é¥°</h4>
           <EmojiPicker
             onSelect={(emoji) => {
               const emojis = card.decorations?.emojis || [];
               onChange({
                 ...card,
                 decorations: { ...card.decorations, emojis: [...emojis, emoji.code] }
               });
             }}
           />
         </div>
       </div>
     );
   };
   
   // CardPreview.tsx - å¡ç‰‡é¢„è§ˆç»„ä»¶
   const CardPreview: React.FC<{ card: Card }> = ({ card }) => {
     return (
       <div
         className="card-preview"
         style={{
           background:
             card.background.type === 'color'
               ? card.background.value
               : card.background.type === 'image'
               ? `url(${card.background.value})`
               : card.background.value,
           backgroundSize: 'cover',
           backgroundPosition: 'center'
         }}
       >
         <div
           className="card-content"
           style={{
             textAlign: card.style.layout.contentPosition === 'center' ? 'center' : 'left'
           }}
         >
           {card.title && (
             <h2
               style={{
                 fontFamily: card.style.titleFont,
                 color: card.style.titleColor,
                 fontSize: `${card.style.titleSize}px`
               }}
             >
               {card.title}
             </h2>
           )}
           <p
             style={{
               fontFamily: card.style.contentFont,
               color: card.style.contentColor,
               fontSize: `${card.style.contentSize}px`
             }}
           >
             {card.content}
           </p>
           {card.decorations?.emojis && (
             <div className="card-decorations">
               {card.decorations.emojis.map((emoji, index) => (
                 <span key={index}>{emoji}</span>
               ))}
             </div>
           )}
         </div>
       </div>
     );
   };
   ```

   **æ ·å¼è®¾è®¡**:
   ```css
   .card-maker-overlay {
     position: fixed;
     top: 0;
     left: 0;
     right: 0;
     bottom: 0;
     background: rgba(0, 0, 0, 0.5);
     display: flex;
     align-items: center;
     justify-content: center;
     z-index: 1000;
   }
   
   .card-maker-container {
     background: white;
     border-radius: 16px;
     box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);
     width: 90%;
     max-width: 1200px;
     height: 90vh;
     max-height: 800px;
     display: flex;
     flex-direction: column;
     overflow: hidden;
   }
   
   .card-maker-body {
     flex: 1;
     display: flex;
     overflow: hidden;
   }
   
   .card-maker-sidebar {
     width: 250px;
     border-right: 1px solid #f0f0f0;
     display: flex;
     flex-direction: column;
   }
   
   .template-list {
     flex: 1;
     overflow-y: auto;
     padding: 12px;
   }
   
   .template-item {
     padding: 12px;
     border-radius: 8px;
     cursor: pointer;
     margin-bottom: 8px;
     transition: background 0.2s;
   }
   
   .template-item:hover {
     background: #f5f5f5;
   }
   
   .template-item.selected {
     background: #FFE5E5;
     border: 2px solid #FF9999;
   }
   
   .template-item img {
     width: 100%;
     border-radius: 4px;
     margin-bottom: 8px;
   }
   
   .card-maker-main {
     flex: 1;
     display: flex;
     flex-direction: column;
     padding: 24px;
     overflow-y: auto;
   }
   
   .card-preview {
     width: 100%;
     aspect-ratio: 16 / 9;
     border-radius: 12px;
     box-shadow: 0 4px 16px rgba(0, 0, 0, 0.1);
     display: flex;
     align-items: center;
     justify-content: center;
     padding: 40px;
   }
   
   .card-editor {
     display: flex;
     flex-direction: column;
     gap: 20px;
   }
   
   .editor-field {
     display: flex;
     flex-direction: column;
     gap: 8px;
   }
   
   .editor-field label {
     font-size: 14px;
     font-weight: 500;
     color: #666;
   }
   
   .editor-field input,
   .editor-field textarea,
   .editor-field select {
     padding: 8px 12px;
     border: 1px solid #e0e0e0;
     border-radius: 8px;
     font-size: 14px;
     outline: none;
     transition: border-color 0.2s;
   }
   
   .editor-field input:focus,
   .editor-field textarea:focus,
   .editor-field select:focus {
     border-color: #FF9999;
   }
   
   .card-maker-footer {
     padding: 16px 24px;
     border-top: 1px solid #f0f0f0;
     display: flex;
     justify-content: flex-end;
     gap: 12px;
   }
   
   .card-maker-footer button {
     padding: 8px 24px;
     border: none;
     border-radius: 8px;
     font-size: 14px;
     font-weight: 500;
     cursor: pointer;
     transition: all 0.2s;
   }
   
   .cancel-button {
     background: #f5f5f5;
     color: #666;
   }
   
   .cancel-button:hover {
     background: #e0e0e0;
   }
   
   .save-button {
     background: #7FB8D1;
     color: white;
   }
   
   .save-button:hover {
     background: #6FA8C1;
   }
   
   .send-button {
     background: #FF9999;
     color: white;
   }
   
   .send-button:hover {
     background: #FF8888;
   }
   ```

2. **å¡ç‰‡ç±»å‹è¯¦ç»†å®šä¹‰**

   **é¢„è®¾æ¨¡æ¿åº“**:
   ```typescript
   const cardTemplates: CardTemplate[] = [
     {
       id: 'greeting-001',
       name: 'æ—©å®‰é—®å€™',
       type: CardType.GREETING,
       category: 'greeting',
       previewImage: '/templates/greeting-001.png',
       background: {
         type: 'gradient',
         value: 'linear-gradient(135deg, #FFE5E5 0%, #FFB3B3 100%)'
       },
       layout: {
         type: 'centered',
         titlePosition: 'top',
         contentPosition: 'center'
       },
       defaultStyle: {
         titleFont: 'Microsoft YaHei',
         titleColor: '#333',
         titleSize: 32,
         contentFont: 'Microsoft YaHei',
         contentColor: '#666',
         contentSize: 18
       }
     },
     {
       id: 'encouragement-001',
       name: 'é¼“åŠ±å¡ç‰‡',
       type: CardType.ENCOURAGEMENT,
       category: 'encouragement',
       previewImage: '/templates/encouragement-001.png',
       background: {
         type: 'color',
         value: '#FFF8E1'
       },
       layout: {
         type: 'centered',
         titlePosition: 'center',
         contentPosition: 'center'
       },
       defaultStyle: {
         titleFont: 'KaiTi',
         titleColor: '#FF6F00',
         titleSize: 36,
         contentFont: 'Microsoft YaHei',
         contentColor: '#FF8F00',
         contentSize: 20
       }
     }
     // ... æ›´å¤šæ¨¡æ¿
   ];
   ```

#### 2.3.3 è¯­éŸ³å½•åˆ¶å·¥å…·

**åŠŸèƒ½æè¿°**: å½•åˆ¶è¯­éŸ³æ¶ˆæ¯çš„å·¥å…·

**è¯¦ç»†éœ€æ±‚**:

1. **å½•åˆ¶åŠŸèƒ½**
   - **å¼€å§‹å½•åˆ¶**ï¼šç‚¹å‡»å¼€å§‹å½•åˆ¶
   - **å½•åˆ¶æ—¶é•¿**ï¼šæ˜¾ç¤ºå½•åˆ¶æ—¶é•¿
   - **åœæ­¢å½•åˆ¶**ï¼šåœæ­¢å½•åˆ¶
   - **é‡æ–°å½•åˆ¶**ï¼šé‡æ–°å½•åˆ¶

2. **å½•åˆ¶ç•Œé¢**
   - **æ³¢å½¢æ˜¾ç¤º**ï¼šæ˜¾ç¤ºéŸ³é¢‘æ³¢å½¢
   - **æ—¶é•¿æ˜¾ç¤º**ï¼šæ˜¾ç¤ºå½•åˆ¶æ—¶é•¿
   - **å–æ¶ˆ/ç¡®è®¤**ï¼šå–æ¶ˆæˆ–ç¡®è®¤å½•åˆ¶

---

## ä¸‰ã€ç¤¾äº¤æ¸©åº¦æå‡

### 3.1 ç”¨æˆ·äº’åŠ¨å¢å¼º

#### 3.1.1 äº’åŠ¨æ–¹å¼æ‰©å±•

**åŠŸèƒ½æè¿°**: æä¾›æ›´å¤šç”¨æˆ·äº’åŠ¨æ–¹å¼

**è¯¦ç»†éœ€æ±‚**:

1. **ç‚¹èµç³»ç»Ÿ**
   - **å†…å®¹ç‚¹èµ**ï¼šä¸ºå†…å®¹ç‚¹èµ
   - **ç‚¹èµåŠ¨ç”»**ï¼šç‚¹èµæ—¶çš„åŠ¨ç”»æ•ˆæœ
   - **ç‚¹èµç»Ÿè®¡**ï¼šæ˜¾ç¤ºç‚¹èµæ•°é‡
   - **ç‚¹èµåˆ—è¡¨**ï¼šæŸ¥çœ‹ç‚¹èµç”¨æˆ·åˆ—è¡¨ï¼ˆå¯é€‰ï¼‰

2. **è¯„è®ºç³»ç»Ÿ**
   - **è¯„è®ºåŠŸèƒ½**ï¼šè¯„è®ºå†…å®¹
   - **å›å¤è¯„è®º**ï¼šå›å¤è¯„è®º
   - **è¯„è®ºç‚¹èµ**ï¼šä¸ºè¯„è®ºç‚¹èµ
   - **è¯„è®ºç®¡ç†**ï¼šç®¡ç†è¯„è®ºï¼ˆåˆ é™¤ã€ä¸¾æŠ¥ç­‰ï¼‰

3. **åˆ†äº«ç³»ç»Ÿ**
   - **å†…å®¹åˆ†äº«**ï¼šåˆ†äº«å†…å®¹
   - **åˆ†äº«ç»Ÿè®¡**ï¼šç»Ÿè®¡åˆ†äº«æ¬¡æ•°
   - **åˆ†äº«æ¸ é“**ï¼šå¤šç§åˆ†äº«æ¸ é“ï¼ˆç«™å†…ã€å¤–é“¾ç­‰ï¼‰

4. **æ”¶è—ç³»ç»Ÿ**
   - **å†…å®¹æ”¶è—**ï¼šæ”¶è—å†…å®¹
   - **æ”¶è—å¤¹**ï¼šç®¡ç†æ”¶è—å¤¹
   - **æ”¶è—åˆ†ç±»**ï¼šæ”¶è—åˆ†ç±»ç®¡ç†

#### 3.1.2 äº’åŠ¨åé¦ˆ

**åŠŸèƒ½æè¿°**: å¢å¼ºäº’åŠ¨åé¦ˆ

**è¯¦ç»†éœ€æ±‚**:

1. **åé¦ˆåŠ¨ç”»**
   - **ç‚¹èµåŠ¨ç”»**ï¼šç‚¹èµæ—¶çš„åŠ¨ç”»æ•ˆæœ
   - **è¯„è®ºåŠ¨ç”»**ï¼šè¯„è®ºæ—¶çš„åŠ¨ç”»æ•ˆæœ
   - **åˆ†äº«åŠ¨ç”»**ï¼šåˆ†äº«æ—¶çš„åŠ¨ç”»æ•ˆæœ
   - **æ”¶è—åŠ¨ç”»**ï¼šæ”¶è—æ—¶çš„åŠ¨ç”»æ•ˆæœ

2. **åé¦ˆé€šçŸ¥**
   - **äº’åŠ¨é€šçŸ¥**ï¼šé€šçŸ¥ç”¨æˆ·æœ‰æ–°çš„äº’åŠ¨
   - **é€šçŸ¥ç±»å‹**ï¼šä¸åŒç±»å‹çš„é€šçŸ¥
   - **é€šçŸ¥è®¾ç½®**ï¼šç”¨æˆ·è®¾ç½®é€šçŸ¥åå¥½

3. **åé¦ˆå¯è§†åŒ–**
   - **äº’åŠ¨ç»Ÿè®¡**ï¼šå¯è§†åŒ–æ˜¾ç¤ºäº’åŠ¨ç»Ÿè®¡
   - **äº’åŠ¨è¶‹åŠ¿**ï¼šæ˜¾ç¤ºäº’åŠ¨è¶‹åŠ¿
   - **äº’åŠ¨çƒ­åŠ›**ï¼šæ˜¾ç¤ºäº’åŠ¨çƒ­åŠ›å›¾

### 3.2 ç¤¾åŒºåŠŸèƒ½

#### 3.2.1 ç¤¾åŒºç©ºé—´

**åŠŸèƒ½æè¿°**: åˆ›å»ºæ¸©æš–çš„ç¤¾åŒºç©ºé—´

**è¯¦ç»†éœ€æ±‚**:

1. **ä¸»é¢˜ç¤¾åŒº**
   - **ç¤¾åŒºåˆ†ç±»**ï¼šæŒ‰ä¸»é¢˜åˆ†ç±»çš„ç¤¾åŒº
   - **ç¤¾åŒºåŠ å…¥**ï¼šåŠ å…¥æ„Ÿå…´è¶£çš„ç¤¾åŒº
   - **ç¤¾åŒºåˆ›å»º**ï¼šç”¨æˆ·å¯ä»¥åˆ›å»ºç¤¾åŒºï¼ˆå¯é€‰ï¼‰
   - **ç¤¾åŒºç®¡ç†**ï¼šç¤¾åŒºç®¡ç†åŠŸèƒ½

2. **ç¤¾åŒºå†…å®¹**
   - **å†…å®¹å‘å¸ƒ**ï¼šåœ¨ç¤¾åŒºå‘å¸ƒå†…å®¹
   - **å†…å®¹æµè§ˆ**ï¼šæµè§ˆç¤¾åŒºå†…å®¹
   - **å†…å®¹ç­›é€‰**ï¼šæŒ‰ç±»å‹ã€æ—¶é—´ç­‰ç­›é€‰å†…å®¹
   - **å†…å®¹æ¨è**ï¼šæ¨èä¼˜è´¨å†…å®¹

3. **ç¤¾åŒºäº’åŠ¨**
   - **ç¤¾åŒºè®¨è®º**ï¼šåœ¨ç¤¾åŒºè®¨è®º
   - **ç¤¾åŒºæ´»åŠ¨**ï¼šç¤¾åŒºæ´»åŠ¨ï¼ˆå¯é€‰ï¼‰
   - **ç¤¾åŒºæŠ•ç¥¨**ï¼šç¤¾åŒºæŠ•ç¥¨ï¼ˆå¯é€‰ï¼‰
   - **ç¤¾åŒºåˆ†äº«**ï¼šåˆ†äº«ç¤¾åŒºå†…å®¹

#### 3.2.2 æ¸©æš–äº’åŠ¨

**åŠŸèƒ½æè¿°**: ä¿ƒè¿›æ¸©æš–çš„ç”¨æˆ·äº’åŠ¨

**è¯¦ç»†éœ€æ±‚**:

1. **äº’åŠ©åŠŸèƒ½**
   - **æ±‚åŠ©å‘å¸ƒ**ï¼šå‘å¸ƒæ±‚åŠ©ä¿¡æ¯
   - **å¸®åŠ©æä¾›**ï¼šæä¾›å¸®åŠ©
   - **äº’åŠ©åŒ¹é…**ï¼šåŒ¹é…éœ€è¦å¸®åŠ©å’Œå¯ä»¥æä¾›å¸®åŠ©çš„ç”¨æˆ·
   - **äº’åŠ©è®°å½•**ï¼šè®°å½•äº’åŠ©å†å²

2. **é¼“åŠ±åŠŸèƒ½**
   - **é¼“åŠ±æ¶ˆæ¯**ï¼šå‘é€é¼“åŠ±æ¶ˆæ¯
   - **é¼“åŠ±å¡ç‰‡**ï¼šå‘é€é¼“åŠ±å¡ç‰‡
   - **é¼“åŠ±ç»Ÿè®¡**ï¼šç»Ÿè®¡æ”¶åˆ°çš„é¼“åŠ±
   - **é¼“åŠ±å±•ç¤º**ï¼šå±•ç¤ºæ”¶åˆ°çš„é¼“åŠ±

3. **æ”¯æŒåŠŸèƒ½**
   - **æƒ…æ„Ÿæ”¯æŒ**ï¼šæä¾›æƒ…æ„Ÿæ”¯æŒ
   - **æ”¯æŒå°ç»„**ï¼šå½¢æˆæ”¯æŒå°ç»„ï¼ˆå¯é€‰ï¼‰
   - **æ”¯æŒè®°å½•**ï¼šè®°å½•æ”¯æŒè¡Œä¸º

#### 3.2.3 æ¸©æš–æ°›å›´è¥é€ 

**åŠŸèƒ½æè¿°**: è¥é€ æ¸©æš–ã€æ”¯æŒæ€§çš„ç¤¾åŒºæ°›å›´

**è¯¦ç»†éœ€æ±‚**:

1. **ç¤¾åŒºè§„åˆ™**
   - **è¡Œä¸ºå‡†åˆ™**ï¼šåˆ¶å®šç¤¾åŒºè¡Œä¸ºå‡†åˆ™
   - **æ¸©æš–å€¡å¯¼**ï¼šå€¡å¯¼æ¸©æš–ã€å‹å–„çš„äº’åŠ¨
   - **è§„åˆ™æ‰§è¡Œ**ï¼šæ‰§è¡Œç¤¾åŒºè§„åˆ™

2. **æ­£èƒ½é‡ä¼ æ’­**
   - **æ­£èƒ½é‡å†…å®¹**ï¼šæ¨å¹¿æ­£èƒ½é‡å†…å®¹
   - **æ¸©æš–æ•…äº‹**ï¼šåˆ†äº«æ¸©æš–æ•…äº‹
   - **é¼“åŠ±æ–‡åŒ–**ï¼šé¼“åŠ±æ–‡åŒ–ä¼ æ’­

3. **å†²çªå¤„ç†**
   - **å†²çªé¢„é˜²**ï¼šé¢„é˜²å†²çª
   - **å†²çªè°ƒè§£**ï¼šè°ƒè§£å†²çª
   - **ä¸¾æŠ¥æœºåˆ¶**ï¼šä¸¾æŠ¥ä¸å½“è¡Œä¸º

### 3.3 ç”¨æˆ·è¿æ¥

#### 3.3.1 å…³æ³¨ç³»ç»Ÿ

**åŠŸèƒ½æè¿°**: ç”¨æˆ·å¯ä»¥å…³æ³¨å…¶ä»–ç”¨æˆ·

**è¯¦ç»†éœ€æ±‚**:

1. **å…³æ³¨åŠŸèƒ½**
   - **å…³æ³¨ç”¨æˆ·**ï¼šå…³æ³¨æ„Ÿå…´è¶£çš„ç”¨æˆ·
   - **å–æ¶ˆå…³æ³¨**ï¼šå–æ¶ˆå…³æ³¨
   - **å…³æ³¨åˆ—è¡¨**ï¼šæŸ¥çœ‹å…³æ³¨åˆ—è¡¨
   - **ç²‰ä¸åˆ—è¡¨**ï¼šæŸ¥çœ‹ç²‰ä¸åˆ—è¡¨

2. **å…³æ³¨åŠ¨æ€**
   - **åŠ¨æ€æ¨é€**ï¼šæ¨é€å…³æ³¨ç”¨æˆ·çš„åŠ¨æ€
   - **åŠ¨æ€ç­›é€‰**ï¼šç­›é€‰å…³æ³¨ç”¨æˆ·çš„åŠ¨æ€
   - **åŠ¨æ€æé†’**ï¼šæé†’æ–°åŠ¨æ€

3. **å…³æ³¨äº’åŠ¨**
   - **äº’ç›¸å…³æ³¨**ï¼šäº’ç›¸å…³æ³¨æˆä¸ºå¥½å‹ï¼ˆå¯é€‰ï¼‰
   - **å…³æ³¨æ¨è**ï¼šæ¨èå…³æ³¨ç”¨æˆ·
   - **å…³æ³¨ç»Ÿè®¡**ï¼šå…³æ³¨å’Œç²‰ä¸ç»Ÿè®¡

#### 3.3.2 å¥½å‹ç³»ç»Ÿï¼ˆå¯é€‰ï¼‰

**åŠŸèƒ½æè¿°**: å»ºç«‹å¥½å‹å…³ç³»

**è¯¦ç»†éœ€æ±‚**:

1. **å¥½å‹å…³ç³»**
   - **å¥½å‹ç”³è¯·**ï¼šç”³è¯·æ·»åŠ å¥½å‹
   - **å¥½å‹ç¡®è®¤**ï¼šç¡®è®¤å¥½å‹ç”³è¯·
   - **å¥½å‹åˆ—è¡¨**ï¼šç®¡ç†å¥½å‹åˆ—è¡¨
   - **å¥½å‹åˆ†ç»„**ï¼šå¥½å‹åˆ†ç»„ç®¡ç†ï¼ˆå¯é€‰ï¼‰

2. **å¥½å‹äº’åŠ¨**
   - **å¥½å‹åŠ¨æ€**ï¼šæŸ¥çœ‹å¥½å‹åŠ¨æ€
   - **å¥½å‹ç§ä¿¡**ï¼šä¸å¥½å‹ç§ä¿¡ï¼ˆå¯é€‰ï¼‰
   - **å¥½å‹æ¨è**ï¼šæ¨èå¥½å‹

3. **å¥½å‹åŠŸèƒ½**
   - **å¥½å‹ç”Ÿæ—¥æé†’**ï¼šå¥½å‹ç”Ÿæ—¥æé†’
   - **å¥½å‹æˆå°±**ï¼šæŸ¥çœ‹å¥½å‹æˆå°±
   - **å¥½å‹æˆé•¿**ï¼šæŸ¥çœ‹å¥½å‹æˆé•¿ï¼ˆå¦‚æœå…è®¸ï¼‰

#### 3.3.3 æ¨èç³»ç»Ÿ

**åŠŸèƒ½æè¿°**: æ¨èæœ‰å…±åŒå…´è¶£çš„ç”¨æˆ·

**è¯¦ç»†éœ€æ±‚**:

1. **æ¨èç®—æ³•**
   - **å…´è¶£åŒ¹é…**ï¼šåŸºäºå…´è¶£åŒ¹é…æ¨è
   - **è¡Œä¸ºç›¸ä¼¼**ï¼šåŸºäºè¡Œä¸ºç›¸ä¼¼æ¨è
   - **å†…å®¹ç›¸ä¼¼**ï¼šåŸºäºå†…å®¹ç›¸ä¼¼æ¨è
   - **å¥½å‹æ¨è**ï¼šåŸºäºå¥½å‹å…³ç³»æ¨è

2. **æ¨èå±•ç¤º**
   - **æ¨èåˆ—è¡¨**ï¼šæ˜¾ç¤ºæ¨èç”¨æˆ·åˆ—è¡¨
   - **æ¨èç†ç”±**ï¼šæ˜¾ç¤ºæ¨èç†ç”±
   - **æ¨èåˆ·æ–°**ï¼šåˆ·æ–°æ¨èåˆ—è¡¨

3. **æ¨èä¼˜åŒ–**
   - **ç”¨æˆ·åé¦ˆ**ï¼šæ”¶é›†ç”¨æˆ·åé¦ˆ
   - **æ¨èä¼˜åŒ–**ï¼šä¼˜åŒ–æ¨èç®—æ³•
   - **ä¸ªæ€§åŒ–æ¨è**ï¼šä¸ªæ€§åŒ–æ¨è

### 3.4 æ¸©æš–ä¼ æ’­æœºåˆ¶

#### 3.4.1 æ¸©æš–ä¼ é€’

**åŠŸèƒ½æè¿°**: è®©æ¸©æš–åœ¨ç”¨æˆ·ä¹‹é—´ä¼ é€’

**è¯¦ç»†éœ€æ±‚**:

1. **æ¸©æš–ä¼ é€’**
   - **æ¸©æš–å¡ç‰‡**ï¼šå‘é€æ¸©æš–å¡ç‰‡
   - **æ¸©æš–ç•™è¨€**ï¼šç•™ä¸‹æ¸©æš–ç•™è¨€
   - **æ¸©æš–åˆ†äº«**ï¼šåˆ†äº«æ¸©æš–å†…å®¹
   - **æ¸©æš–æ¥åŠ›**ï¼šæ¸©æš–æ¥åŠ›æ´»åŠ¨ï¼ˆå¯é€‰ï¼‰

2. **æ¸©æš–è®°å½•**
   - **ä¼ é€’è®°å½•**ï¼šè®°å½•æ¸©æš–ä¼ é€’
   - **ä¼ é€’ç»Ÿè®¡**ï¼šç»Ÿè®¡æ¸©æš–ä¼ é€’
   - **ä¼ é€’å¯è§†åŒ–**ï¼šå¯è§†åŒ–æ¸©æš–ä¼ é€’ç½‘ç»œ

#### 3.4.2 æ¸©æš–æ•…äº‹

**åŠŸèƒ½æè¿°**: åˆ†äº«å’Œä¼ æ’­æ¸©æš–æ•…äº‹

**è¯¦ç»†éœ€æ±‚**:

1. **æ•…äº‹åˆ†äº«**
   - **æ•…äº‹å‘å¸ƒ**ï¼šå‘å¸ƒæ¸©æš–æ•…äº‹
   - **æ•…äº‹æµè§ˆ**ï¼šæµè§ˆæ¸©æš–æ•…äº‹
   - **æ•…äº‹æ¨è**ï¼šæ¨èä¼˜è´¨æ•…äº‹
   - **æ•…äº‹æ”¶è—**ï¼šæ”¶è—å–œæ¬¢çš„æ•…äº‹

2. **æ•…äº‹äº’åŠ¨**
   - **æ•…äº‹ç‚¹èµ**ï¼šä¸ºæ•…äº‹ç‚¹èµ
   - **æ•…äº‹è¯„è®º**ï¼šè¯„è®ºæ•…äº‹
   - **æ•…äº‹åˆ†äº«**ï¼šåˆ†äº«æ•…äº‹
   - **æ•…äº‹è½¬å‘**ï¼šè½¬å‘æ•…äº‹

3. **æ•…äº‹ä¼ æ’­**
   - **æ•…äº‹æ¨å¹¿**ï¼šæ¨å¹¿ä¼˜è´¨æ•…äº‹
   - **æ•…äº‹åˆé›†**ï¼šç¼–è¾‘æ•…äº‹åˆé›†
   - **æ•…äº‹çºªå¿µ**ï¼šçºªå¿µç‰¹åˆ«çš„æ•…äº‹

#### 3.4.3 æ¸©æš–æ´»åŠ¨

**åŠŸèƒ½æè¿°**: ç»„ç»‡æ¸©æš–çš„æ´»åŠ¨

**è¯¦ç»†éœ€æ±‚**:

1. **æ´»åŠ¨ç±»å‹**
   - **ä¸»é¢˜è®¨è®º**ï¼šç»„ç»‡ä¸»é¢˜è®¨è®ºæ´»åŠ¨
   - **åˆ†äº«ä¼š**ï¼šç»„ç»‡åˆ†äº«ä¼š
   - **äº’åŠ©æ´»åŠ¨**ï¼šç»„ç»‡äº’åŠ©æ´»åŠ¨
   - **åº†ç¥æ´»åŠ¨**ï¼šåº†ç¥æ´»åŠ¨ï¼ˆå¦‚ç”Ÿæ—¥ã€èŠ‚æ—¥ï¼‰

2. **æ´»åŠ¨ç»„ç»‡**
   - **æ´»åŠ¨åˆ›å»º**ï¼šåˆ›å»ºæ´»åŠ¨
   - **æ´»åŠ¨æ¨å¹¿**ï¼šæ¨å¹¿æ´»åŠ¨
   - **æ´»åŠ¨å‚ä¸**ï¼šå‚ä¸æ´»åŠ¨
   - **æ´»åŠ¨è®°å½•**ï¼šè®°å½•æ´»åŠ¨

3. **æ´»åŠ¨æ•ˆæœ**
   - **æ´»åŠ¨åé¦ˆ**ï¼šæ”¶é›†æ´»åŠ¨åé¦ˆ
   - **æ´»åŠ¨æ€»ç»“**ï¼šæ€»ç»“æ´»åŠ¨
   - **æ´»åŠ¨å»¶ç»­**ï¼šå»¶ç»­æ´»åŠ¨æ•ˆæœ

---

## å››ã€æƒ…æ„Ÿè¡¨è¾¾ä¸ç¤¾äº¤çš„èåˆ

### 4.1 æƒ…æ„Ÿè¡¨è¾¾åœ¨ç¤¾äº¤ä¸­çš„åº”ç”¨

**åŠŸèƒ½æè¿°**: åœ¨ç¤¾äº¤äº’åŠ¨ä¸­ä½¿ç”¨ä¸°å¯Œçš„æƒ…æ„Ÿè¡¨è¾¾

**è¯¦ç»†éœ€æ±‚**:

1. **è¯„è®ºæƒ…æ„Ÿè¡¨è¾¾**
   - **è¯„è®ºè¡¨æƒ…**ï¼šåœ¨è¯„è®ºä¸­ä½¿ç”¨è¡¨æƒ…
   - **è¯„è®ºè´´çº¸**ï¼šä½¿ç”¨è´´çº¸è¯„è®º
   - **è¯„è®ºå¡ç‰‡**ï¼šä½¿ç”¨å¡ç‰‡è¯„è®º
   - **è¯„è®ºè¯­éŸ³**ï¼šè¯­éŸ³è¯„è®º

2. **åˆ†äº«æƒ…æ„Ÿè¡¨è¾¾**
   - **åˆ†äº«å¡ç‰‡**ï¼šåˆ†äº«å¡ç‰‡æ—¶æ·»åŠ æƒ…æ„Ÿè¡¨è¾¾
   - **åˆ†äº«ç•™è¨€**ï¼šåˆ†äº«æ—¶æ·»åŠ ç•™è¨€
   - **åˆ†äº«æ ‡ç­¾**ï¼šæ·»åŠ æƒ…æ„Ÿæ ‡ç­¾

3. **äº’åŠ¨æƒ…æ„Ÿè¡¨è¾¾**
   - **äº’åŠ¨è¡¨æƒ…**ï¼šäº’åŠ¨æ—¶ä½¿ç”¨è¡¨æƒ…
   - **äº’åŠ¨å¡ç‰‡**ï¼šå‘é€äº’åŠ¨å¡ç‰‡
   - **äº’åŠ¨è¯­éŸ³**ï¼šè¯­éŸ³äº’åŠ¨

### 4.2 ç¤¾äº¤ä¸­çš„æ¸©æš–ä¼ æ’­

**åŠŸèƒ½æè¿°**: é€šè¿‡ç¤¾äº¤ä¼ æ’­æ¸©æš–

**è¯¦ç»†éœ€æ±‚**:

1. **æ¸©æš–å†…å®¹ä¼ æ’­**
   - **å†…å®¹åˆ†äº«**ï¼šåˆ†äº«æ¸©æš–å†…å®¹
   - **å†…å®¹è½¬å‘**ï¼šè½¬å‘æ¸©æš–å†…å®¹
   - **å†…å®¹æ¨è**ï¼šæ¨èæ¸©æš–å†…å®¹

2. **æ¸©æš–äº’åŠ¨ä¼ æ’­**
   - **äº’åŠ¨ä¼ é€’**ï¼šé€šè¿‡äº’åŠ¨ä¼ é€’æ¸©æš–
   - **äº’åŠ¨é“¾**ï¼šå½¢æˆäº’åŠ¨é“¾
   - **äº’åŠ¨å½±å“**ï¼šæ‰©å¤§äº’åŠ¨å½±å“

3. **æ¸©æš–ç¤¾åŒºå½¢æˆ**
   - **ç¤¾åŒºæ°›å›´**ï¼šè¥é€ æ¸©æš–ç¤¾åŒºæ°›å›´
   - **ç¤¾åŒºæ–‡åŒ–**ï¼šå½¢æˆæ¸©æš–ç¤¾åŒºæ–‡åŒ–
   - **ç¤¾åŒºå½±å“**ï¼šæ‰©å¤§ç¤¾åŒºå½±å“

---

## äº”ã€æŠ€æœ¯å®ç°æ–¹æ¡ˆ

### 5.1 æƒ…æ„Ÿè¡¨è¾¾å®ç°

#### 5.1.1 è¡¨æƒ…ç³»ç»Ÿå®ç°

```java
@Service
public class EmojiService {
    
    /**
     * è·å–è¡¨æƒ…åˆ—è¡¨
     */
    public List<Emoji> getEmojis(String category) {
        // ä»æ•°æ®åº“æˆ–é…ç½®è·å–è¡¨æƒ…
        return emojiRepository.findByCategory(category);
    }
    
    /**
     * è·å–ç”¨æˆ·å¸¸ç”¨è¡¨æƒ…
     */
    public List<Emoji> getFrequentEmojis(Long userId) {
        // ç»Ÿè®¡ç”¨æˆ·ä½¿ç”¨é¢‘ç‡
        return emojiUsageRepository.findFrequentByUserId(userId, 10);
    }
    
    /**
     * è®°å½•è¡¨æƒ…ä½¿ç”¨
     */
    public void recordEmojiUsage(Long userId, String emojiId) {
        EmojiUsage usage = EmojiUsage.builder()
            .userId(userId)
            .emojiId(emojiId)
            .usedAt(System.currentTimeMillis())
            .build();
        emojiUsageRepository.save(usage);
    }
}
```

#### 5.1.2 å¡ç‰‡ç³»ç»Ÿå®ç°

```java
@Service
public class CardService {
    
    /**
     * åˆ›å»ºå¡ç‰‡
     */
    public Card createCard(Long userId, CardTemplate template, CardContent content) {
        Card card = Card.builder()
            .userId(userId)
            .templateId(template.getId())
            .content(content)
            .createdAt(System.currentTimeMillis())
            .build();
        return cardRepository.save(card);
    }
    
    /**
     * å‘é€å¡ç‰‡
     */
    public void sendCard(Long senderId, Long recipientId, Long cardId, String message) {
        CardMessage cardMessage = CardMessage.builder()
            .senderId(senderId)
            .recipientId(recipientId)
            .cardId(cardId)
            .message(message)
            .sentAt(System.currentTimeMillis())
            .build();
        cardMessageRepository.save(cardMessage);
        
        // å‘é€é€šçŸ¥
        notificationService.sendNotification(recipientId, 
            NotificationType.CARD_RECEIVED, cardMessage);
    }
}
```

### 5.2 ç¤¾äº¤åŠŸèƒ½å®ç°

#### 5.2.1 äº’åŠ¨ç³»ç»Ÿå®ç°

```java
@Service
public class InteractionService {
    
    /**
     * ç‚¹èµå†…å®¹
     */
    public void likeContent(Long userId, String contentType, String contentId) {
        // æ£€æŸ¥æ˜¯å¦å·²ç»ç‚¹èµ
        if (likeRepository.existsByUserIdAndContent(userId, contentType, contentId)) {
            throw new BusinessException("å·²ç»ç‚¹èµè¿‡äº†");
        }
        
        Like like = Like.builder()
            .userId(userId)
            .contentType(contentType)
            .contentId(contentId)
            .createdAt(System.currentTimeMillis())
            .build();
        likeRepository.save(like);
        
        // æ›´æ–°å†…å®¹ç‚¹èµæ•°
        updateContentLikeCount(contentType, contentId, 1);
        
        // å‘é€é€šçŸ¥
        notificationService.sendLikeNotification(userId, contentType, contentId);
    }
    
    /**
     * è¯„è®ºå†…å®¹
     */
    public Comment commentContent(Long userId, String contentType, String contentId, 
                                  String content, String emotionExpression) {
        Comment comment = Comment.builder()
            .userId(userId)
            .contentType(contentType)
            .contentId(contentId)
            .content(content)
            .emotionExpression(emotionExpression) // æƒ…æ„Ÿè¡¨è¾¾ï¼ˆè¡¨æƒ…ã€è´´çº¸ç­‰ï¼‰
            .createdAt(System.currentTimeMillis())
            .build();
        comment = commentRepository.save(comment);
        
        // å‘é€é€šçŸ¥
        notificationService.sendCommentNotification(userId, contentType, contentId);
        
        return comment;
    }
}
```

#### 5.2.2 ç¤¾åŒºç³»ç»Ÿå®ç°

```java
@Service
public class CommunityService {
    
    /**
     * åˆ›å»ºç¤¾åŒº
     */
    public Community createCommunity(Long userId, String name, String description, 
                                     String category) {
        Community community = Community.builder()
            .creatorId(userId)
            .name(name)
            .description(description)
            .category(category)
            .memberCount(1)
            .createdAt(System.currentTimeMillis())
            .build();
        community = communityRepository.save(community);
        
        // åˆ›å»ºè€…è‡ªåŠ¨åŠ å…¥ç¤¾åŒº
        joinCommunity(userId, community.getId());
        
        return community;
    }
    
    /**
     * å‘å¸ƒç¤¾åŒºå†…å®¹
     */
    public CommunityPost publishPost(Long userId, Long communityId, String content, 
                                     List<String> emotionExpressions) {
        CommunityPost post = CommunityPost.builder()
            .userId(userId)
            .communityId(communityId)
            .content(content)
            .emotionExpressions(emotionExpressions)
            .likeCount(0)
            .commentCount(0)
            .createdAt(System.currentTimeMillis())
            .build();
        return communityPostRepository.save(post);
    }
}
```

### 5.3 æ•°æ®åº“è®¾è®¡

```sql
-- è¡¨æƒ…è¡¨
CREATE TABLE emojis (
  id BIGINT PRIMARY KEY AUTO_INCREMENT,
  emoji_code VARCHAR(50) NOT NULL COMMENT 'è¡¨æƒ…ä»£ç ',
  emoji_name VARCHAR(100) COMMENT 'è¡¨æƒ…åç§°',
  category VARCHAR(50) COMMENT 'è¡¨æƒ…åˆ†ç±»',
  is_custom BOOLEAN DEFAULT FALSE COMMENT 'æ˜¯å¦è‡ªå®šä¹‰',
  creator_id BIGINT COMMENT 'åˆ›å»ºè€…IDï¼ˆè‡ªå®šä¹‰è¡¨æƒ…ï¼‰',
  created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
  UNIQUE KEY uk_emoji_code (emoji_code),
  INDEX idx_category (category)
);

-- è¡¨æƒ…ä½¿ç”¨è®°å½•è¡¨
CREATE TABLE emoji_usage (
  id BIGINT PRIMARY KEY AUTO_INCREMENT,
  user_id BIGINT NOT NULL COMMENT 'ç”¨æˆ·ID',
  emoji_id BIGINT NOT NULL COMMENT 'è¡¨æƒ…ID',
  context VARCHAR(50) COMMENT 'ä½¿ç”¨åœºæ™¯ï¼šconversation, comment, message',
  context_id VARCHAR(100) COMMENT 'åœºæ™¯ID',
  used_at DATETIME DEFAULT CURRENT_TIMESTAMP,
  FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,
  FOREIGN KEY (emoji_id) REFERENCES emojis(id) ON DELETE CASCADE,
  INDEX idx_user_time (user_id, used_at DESC)
);

-- å¡ç‰‡è¡¨
CREATE TABLE cards (
  id BIGINT PRIMARY KEY AUTO_INCREMENT,
  user_id BIGINT NOT NULL COMMENT 'åˆ›å»ºè€…ID',
  template_id BIGINT COMMENT 'æ¨¡æ¿ID',
  card_type VARCHAR(50) NOT NULL COMMENT 'å¡ç‰‡ç±»å‹',
  title VARCHAR(200) COMMENT 'å¡ç‰‡æ ‡é¢˜',
  content TEXT COMMENT 'å¡ç‰‡å†…å®¹',
  background_url VARCHAR(500) COMMENT 'èƒŒæ™¯å›¾URL',
  created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
  FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE
);

-- å¡ç‰‡æ¶ˆæ¯è¡¨
CREATE TABLE card_messages (
  id BIGINT PRIMARY KEY AUTO_INCREMENT,
  sender_id BIGINT NOT NULL COMMENT 'å‘é€è€…ID',
  recipient_id BIGINT NOT NULL COMMENT 'æ¥æ”¶è€…ID',
  card_id BIGINT NOT NULL COMMENT 'å¡ç‰‡ID',
  message TEXT COMMENT 'é™„åŠ æ¶ˆæ¯',
  is_read BOOLEAN DEFAULT FALSE COMMENT 'æ˜¯å¦å·²è¯»',
  sent_at DATETIME DEFAULT CURRENT_TIMESTAMP,
  read_at DATETIME NULL,
  FOREIGN KEY (sender_id) REFERENCES users(id) ON DELETE CASCADE,
  FOREIGN KEY (recipient_id) REFERENCES users(id) ON DELETE CASCADE,
  FOREIGN KEY (card_id) REFERENCES cards(id) ON DELETE CASCADE,
  INDEX idx_recipient_read (recipient_id, is_read),
  INDEX idx_sent_at (sent_at DESC)
);

-- ç‚¹èµè¡¨
CREATE TABLE likes (
  id BIGINT PRIMARY KEY AUTO_INCREMENT,
  user_id BIGINT NOT NULL COMMENT 'ç”¨æˆ·ID',
  content_type VARCHAR(50) NOT NULL COMMENT 'å†…å®¹ç±»å‹ï¼špost, comment, story, card',
  content_id VARCHAR(100) NOT NULL COMMENT 'å†…å®¹ID',
  created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
  FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,
  UNIQUE KEY uk_user_content (user_id, content_type, content_id),
  INDEX idx_content (content_type, content_id)
);

-- è¯„è®ºè¡¨
CREATE TABLE comments (
  id BIGINT PRIMARY KEY AUTO_INCREMENT,
  user_id BIGINT NOT NULL COMMENT 'ç”¨æˆ·ID',
  content_type VARCHAR(50) NOT NULL COMMENT 'å†…å®¹ç±»å‹',
  content_id VARCHAR(100) NOT NULL COMMENT 'å†…å®¹ID',
  parent_id BIGINT COMMENT 'çˆ¶è¯„è®ºIDï¼ˆå›å¤è¯„è®ºï¼‰',
  content TEXT NOT NULL COMMENT 'è¯„è®ºå†…å®¹',
  emotion_expressions TEXT COMMENT 'æƒ…æ„Ÿè¡¨è¾¾ï¼ˆJSONæ•°ç»„ï¼‰',
  like_count INT DEFAULT 0 COMMENT 'ç‚¹èµæ•°',
  created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
  FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,
  FOREIGN KEY (parent_id) REFERENCES comments(id) ON DELETE CASCADE,
  INDEX idx_content (content_type, content_id),
  INDEX idx_user (user_id)
);

-- ç¤¾åŒºè¡¨
CREATE TABLE communities (
  id BIGINT PRIMARY KEY AUTO_INCREMENT,
  creator_id BIGINT NOT NULL COMMENT 'åˆ›å»ºè€…ID',
  name VARCHAR(200) NOT NULL COMMENT 'ç¤¾åŒºåç§°',
  description TEXT COMMENT 'ç¤¾åŒºæè¿°',
  category VARCHAR(50) COMMENT 'ç¤¾åŒºåˆ†ç±»',
  avatar_url VARCHAR(500) COMMENT 'ç¤¾åŒºå¤´åƒ',
  member_count INT DEFAULT 0 COMMENT 'æˆå‘˜æ•°',
  post_count INT DEFAULT 0 COMMENT 'å¸–å­æ•°',
  created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
  FOREIGN KEY (creator_id) REFERENCES users(id) ON DELETE CASCADE,
  INDEX idx_category (category)
);

-- ç¤¾åŒºæˆå‘˜è¡¨
CREATE TABLE community_members (
  id BIGINT PRIMARY KEY AUTO_INCREMENT,
  community_id BIGINT NOT NULL COMMENT 'ç¤¾åŒºID',
  user_id BIGINT NOT NULL COMMENT 'ç”¨æˆ·ID',
  role VARCHAR(20) DEFAULT 'member' COMMENT 'è§’è‰²ï¼šcreator, admin, member',
  joined_at DATETIME DEFAULT CURRENT_TIMESTAMP,
  FOREIGN KEY (community_id) REFERENCES communities(id) ON DELETE CASCADE,
  FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,
  UNIQUE KEY uk_community_user (community_id, user_id),
  INDEX idx_user (user_id)
);

-- ç¤¾åŒºå¸–å­è¡¨
CREATE TABLE community_posts (
  id BIGINT PRIMARY KEY AUTO_INCREMENT,
  community_id BIGINT NOT NULL COMMENT 'ç¤¾åŒºID',
  user_id BIGINT NOT NULL COMMENT 'å‘å¸ƒè€…ID',
  title VARCHAR(200) COMMENT 'å¸–å­æ ‡é¢˜',
  content TEXT NOT NULL COMMENT 'å¸–å­å†…å®¹',
  emotion_expressions TEXT COMMENT 'æƒ…æ„Ÿè¡¨è¾¾ï¼ˆJSONæ•°ç»„ï¼‰',
  like_count INT DEFAULT 0 COMMENT 'ç‚¹èµæ•°',
  comment_count INT DEFAULT 0 COMMENT 'è¯„è®ºæ•°',
  created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
  FOREIGN KEY (community_id) REFERENCES communities(id) ON DELETE CASCADE,
  FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,
  INDEX idx_community_time (community_id, created_at DESC),
  INDEX idx_user (user_id)
);

-- å…³æ³¨è¡¨
CREATE TABLE follows (
  id BIGINT PRIMARY KEY AUTO_INCREMENT,
  follower_id BIGINT NOT NULL COMMENT 'å…³æ³¨è€…ID',
  following_id BIGINT NOT NULL COMMENT 'è¢«å…³æ³¨è€…ID',
  created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
  FOREIGN KEY (follower_id) REFERENCES users(id) ON DELETE CASCADE,
  FOREIGN KEY (following_id) REFERENCES users(id) ON DELETE CASCADE,
  UNIQUE KEY uk_follower_following (follower_id, following_id),
  INDEX idx_follower (follower_id),
  INDEX idx_following (following_id)
);
```

### 5.4 APIæ¥å£è®¾è®¡

**åç«¯æ¥å£**:

1. `GET /api/emojis` - è·å–è¡¨æƒ…åˆ—è¡¨
   - è¯·æ±‚å‚æ•°ï¼š`category`, `page`, `size`
   - è¿”å›ï¼šè¡¨æƒ…åˆ—è¡¨

2. `GET /api/emojis/frequent` - è·å–å¸¸ç”¨è¡¨æƒ…
   - è¿”å›ï¼šå¸¸ç”¨è¡¨æƒ…åˆ—è¡¨

3. `POST /api/emojis/usage` - è®°å½•è¡¨æƒ…ä½¿ç”¨
   - è¯·æ±‚ä½“ï¼š`{ emojiId, context, contextId }`
   - è¿”å›ï¼šæ“ä½œç»“æœ

4. `GET /api/cards/templates` - è·å–å¡ç‰‡æ¨¡æ¿
   - è¯·æ±‚å‚æ•°ï¼š`type`, `category`
   - è¿”å›ï¼šå¡ç‰‡æ¨¡æ¿åˆ—è¡¨

5. `POST /api/cards` - åˆ›å»ºå¡ç‰‡
   - è¯·æ±‚ä½“ï¼š`{ templateId, content, ... }`
   - è¿”å›ï¼šåˆ›å»ºçš„å¡ç‰‡

6. `POST /api/cards/send` - å‘é€å¡ç‰‡
   - è¯·æ±‚ä½“ï¼š`{ recipientId, cardId, message }`
   - è¿”å›ï¼šæ“ä½œç»“æœ

7. `GET /api/cards/received` - è·å–æ”¶åˆ°çš„å¡ç‰‡
   - è¯·æ±‚å‚æ•°ï¼š`page`, `size`, `unreadOnly`
   - è¿”å›ï¼šæ”¶åˆ°çš„å¡ç‰‡åˆ—è¡¨

8. `POST /api/interactions/like` - ç‚¹èµå†…å®¹
   - è¯·æ±‚ä½“ï¼š`{ contentType, contentId }`
   - è¿”å›ï¼šæ“ä½œç»“æœ

9. `DELETE /api/interactions/like` - å–æ¶ˆç‚¹èµ
   - è¯·æ±‚å‚æ•°ï¼š`contentType`, `contentId`
   - è¿”å›ï¼šæ“ä½œç»“æœ

10. `POST /api/interactions/comment` - è¯„è®ºå†…å®¹
    - è¯·æ±‚ä½“ï¼š`{ contentType, contentId, content, emotionExpressions, parentId? }`
    - è¿”å›ï¼šåˆ›å»ºçš„è¯„è®º

11. `GET /api/interactions/comments` - è·å–è¯„è®ºåˆ—è¡¨
    - è¯·æ±‚å‚æ•°ï¼š`contentType`, `contentId`, `page`, `size`
    - è¿”å›ï¼šè¯„è®ºåˆ—è¡¨

12. `POST /api/communities` - åˆ›å»ºç¤¾åŒº
    - è¯·æ±‚ä½“ï¼š`{ name, description, category }`
    - è¿”å›ï¼šåˆ›å»ºçš„ç¤¾åŒº

13. `GET /api/communities` - è·å–ç¤¾åŒºåˆ—è¡¨
    - è¯·æ±‚å‚æ•°ï¼š`category`, `page`, `size`
    - è¿”å›ï¼šç¤¾åŒºåˆ—è¡¨

14. `POST /api/communities/{id}/join` - åŠ å…¥ç¤¾åŒº
    - è¿”å›ï¼šæ“ä½œç»“æœ

15. `POST /api/communities/{id}/posts` - å‘å¸ƒç¤¾åŒºå¸–å­
    - è¯·æ±‚ä½“ï¼š`{ title, content, emotionExpressions }`
    - è¿”å›ï¼šåˆ›å»ºçš„å¸–å­

16. `GET /api/communities/{id}/posts` - è·å–ç¤¾åŒºå¸–å­
    - è¯·æ±‚å‚æ•°ï¼š`page`, `size`
    - è¿”å›ï¼šå¸–å­åˆ—è¡¨

17. `POST /api/follows` - å…³æ³¨ç”¨æˆ·
    - è¯·æ±‚ä½“ï¼š`{ followingId }`
    - è¿”å›ï¼šæ“ä½œç»“æœ

18. `DELETE /api/follows/{followingId}` - å–æ¶ˆå…³æ³¨
    - è¿”å›ï¼šæ“ä½œç»“æœ

19. `GET /api/follows/followers` - è·å–ç²‰ä¸åˆ—è¡¨
    - è¯·æ±‚å‚æ•°ï¼š`userId`, `page`, `size`
    - è¿”å›ï¼šç²‰ä¸åˆ—è¡¨

20. `GET /api/follows/following` - è·å–å…³æ³¨åˆ—è¡¨
    - è¯·æ±‚å‚æ•°ï¼š`userId`, `page`, `size`
    - è¿”å›ï¼šå…³æ³¨åˆ—è¡¨

21. `GET /api/recommendations/users` - è·å–æ¨èç”¨æˆ·
    - è¯·æ±‚å‚æ•°ï¼š`limit`
    - è¿”å›ï¼šæ¨èç”¨æˆ·åˆ—è¡¨

---

## å…­ã€å®æ–½è®¡åˆ’

### 6.1 ç¬¬ä¸€é˜¶æ®µï¼šæƒ…æ„Ÿè¡¨è¾¾æ‰©å±•åŸºç¡€ï¼ˆ2å‘¨ï¼‰

- [ ] è®¾è®¡è¡¨æƒ…ç³»ç»Ÿ
- [ ] å®ç°è¡¨æƒ…é€‰æ‹©å™¨
- [ ] å®ç°è¡¨æƒ…ä½¿ç”¨è®°å½•
- [ ] é›†æˆè¡¨æƒ…åˆ°å¯¹è¯å’Œç•™è¨€

### 6.2 ç¬¬äºŒé˜¶æ®µï¼šå¡ç‰‡å’Œå¤šåª’ä½“è¡¨è¾¾ï¼ˆ2å‘¨ï¼‰

- [ ] è®¾è®¡å¡ç‰‡ç³»ç»Ÿ
- [ ] å®ç°å¡ç‰‡åˆ¶ä½œå·¥å…·
- [ ] å®ç°å¡ç‰‡å‘é€åŠŸèƒ½
- [ ] å®ç°è¯­éŸ³æ¶ˆæ¯åŠŸèƒ½ï¼ˆå¯é€‰ï¼‰

### 6.3 ç¬¬ä¸‰é˜¶æ®µï¼šäº’åŠ¨ç³»ç»Ÿï¼ˆ2å‘¨ï¼‰

- [ ] å®ç°ç‚¹èµç³»ç»Ÿ
- [ ] å®ç°è¯„è®ºç³»ç»Ÿ
- [ ] å®ç°åˆ†äº«ç³»ç»Ÿ
- [ ] å®ç°æ”¶è—ç³»ç»Ÿ

### 6.4 ç¬¬å››é˜¶æ®µï¼šç¤¾åŒºåŠŸèƒ½ï¼ˆ2å‘¨ï¼‰

- [ ] è®¾è®¡ç¤¾åŒºç³»ç»Ÿ
- [ ] å®ç°ç¤¾åŒºåˆ›å»ºå’Œç®¡ç†
- [ ] å®ç°ç¤¾åŒºå†…å®¹å‘å¸ƒ
- [ ] å®ç°ç¤¾åŒºäº’åŠ¨åŠŸèƒ½

### 6.5 ç¬¬äº”é˜¶æ®µï¼šå…³æ³¨å’Œæ¨èï¼ˆ1-2å‘¨ï¼‰

- [ ] å®ç°å…³æ³¨ç³»ç»Ÿ
- [ ] å®ç°æ¨èç³»ç»Ÿ
- [ ] å®ç°ç”¨æˆ·è¿æ¥åŠŸèƒ½

### 6.6 ç¬¬å…­é˜¶æ®µï¼šæ¸©æš–ä¼ æ’­ï¼ˆ1-2å‘¨ï¼‰

- [ ] å®ç°æ¸©æš–ä¼ é€’åŠŸèƒ½
- [ ] å®ç°æ¸©æš–æ•…äº‹åŠŸèƒ½
- [ ] å®ç°æ¸©æš–æ´»åŠ¨åŠŸèƒ½
- [ ] ä¼˜åŒ–ç¤¾åŒºæ°›å›´

### 6.7 ç¬¬ä¸ƒé˜¶æ®µï¼šæµ‹è¯•å’Œä¼˜åŒ–ï¼ˆ1å‘¨ï¼‰

- [ ] åŠŸèƒ½æµ‹è¯•
- [ ] æ€§èƒ½ä¼˜åŒ–
- [ ] ç”¨æˆ·ä½“éªŒä¼˜åŒ–
- [ ] Bugä¿®å¤

---

## ä¸ƒã€é¢„æœŸæ•ˆæœ

1. **ä¸°å¯Œè¡¨è¾¾**ï¼šç”¨æˆ·å¯ä»¥æ›´ä¸°å¯Œåœ°è¡¨è¾¾æƒ…æ„Ÿ
2. **æ¸©æš–äº’åŠ¨**ï¼šç”¨æˆ·ä¹‹é—´çš„äº’åŠ¨æ›´æœ‰æ¸©åº¦
3. **ç¤¾åŒºæ°›å›´**ï¼šå½¢æˆæ¸©æš–ã€æ”¯æŒæ€§çš„ç¤¾åŒºæ°›å›´
4. **æƒ…æ„Ÿå…±é¸£**ï¼šä¿ƒè¿›ç”¨æˆ·ä¹‹é—´çš„æƒ…æ„Ÿå…±é¸£
5. **æ¸©æš–ä¼ æ’­**ï¼šè®©æ¸©æš–åœ¨ç¤¾åŒºä¸­ä¼ æ’­

---

## å…«ã€æƒ…æ„Ÿè¡¨è¾¾ç¤ºä¾‹

### 8.1 è¡¨æƒ…è¡¨è¾¾ç¤ºä¾‹

**å¯¹è¯ä¸­ä½¿ç”¨**:
- ç”¨æˆ·å‘é€ï¼š"ä»Šå¤©å¾ˆå¼€å¿ƒï¼ğŸ˜Š"
- E-SOULå›å¤ï¼š"å¬åˆ°ä½ å¼€å¿ƒï¼Œæˆ‘ä¹Ÿå¾ˆé«˜å…´ï¼âœ¨ğŸ‰"

**è¯„è®ºä¸­ä½¿ç”¨**:
- ç”¨æˆ·è¯„è®ºï¼š"è¿™ä¸ªæƒ³æ³•å¤ªæ£’äº†ï¼ğŸ‘ğŸŒŸ"
- ä½¿ç”¨è´´çº¸è¡¨è¾¾ï¼š"ğŸ’™ğŸ’šğŸ’›ğŸ’œ"

### 8.2 å¡ç‰‡è¡¨è¾¾ç¤ºä¾‹

**é—®å€™å¡ç‰‡**:
- "æ—©ä¸Šå¥½ï¼å¸Œæœ›ä½ ä»Šå¤©è¿‡å¾—æ„‰å¿«~ â˜€ï¸"

**é¼“åŠ±å¡ç‰‡**:
- "åŠ æ²¹ï¼æˆ‘ç›¸ä¿¡ä½ ä¸€å®šèƒ½åšåˆ°ï¼ğŸ’ªâœ¨"

**æ„Ÿè°¢å¡ç‰‡**:
- "è°¢è°¢ä½ ä¸€ç›´ä»¥æ¥çš„é™ªä¼´ï¼ğŸ’™"

### 8.3 è¯­éŸ³è¡¨è¾¾ç¤ºä¾‹

**è¯­éŸ³æ¶ˆæ¯**:
- ç”¨æˆ·å¯ä»¥å½•åˆ¶è¯­éŸ³æ¶ˆæ¯ï¼Œä¼ è¾¾æ›´çœŸå®çš„æƒ…æ„Ÿ
- E-SOULä¹Ÿå¯ä»¥ä½¿ç”¨è¯­éŸ³å›å¤ï¼ˆå¦‚æœæ”¯æŒTTSï¼‰

---

**æ–‡æ¡£å®Œæˆ**: å››ä¸ªé˜¶æ®µçš„å¢åŠ ç³»ç»Ÿæ¸©åº¦æ„Ÿéœ€æ±‚åˆ†ææ–‡æ¡£å…¨éƒ¨å®Œæˆ

- **ç¬¬ä¸€é˜¶æ®µ**ï¼šåŸºç¡€æƒ…æ„ŸåŒ–è®¾è®¡ï¼ˆç•Œé¢ã€è§’è‰²ã€å¯¹è¯ï¼‰
- **ç¬¬äºŒé˜¶æ®µ**ï¼šæƒ…ç»ªæ„ŸçŸ¥ç³»ç»Ÿã€ä¸ªæ€§åŒ–è®°å¿†ç³»ç»Ÿ
- **ç¬¬ä¸‰é˜¶æ®µ**ï¼šé™ªä¼´å¼äº¤äº’ã€æˆé•¿è®°å½•ç³»ç»Ÿ
- **ç¬¬å››é˜¶æ®µ**ï¼šæƒ…æ„Ÿè¡¨è¾¾æ‰©å±•ã€ç¤¾äº¤æ¸©åº¦æå‡

