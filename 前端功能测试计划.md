# 心域(HeartSphere) - 前端功能测试计划

## 📋 测试概述

本文档专门针对前端应用进行全面的功能测试，涵盖所有React组件、用户交互、状态管理和数据流。

**测试范围**: 前端Web应用（PC端 + 移动端）  
**测试重点**: 功能完整性、用户体验、状态管理、错误处理  
**测试方法**: 手动测试 + 自动化测试（建议）

---

## 🎯 一、核心组件功能测试

### 1.1 App.tsx - 主应用组件

#### 功能点
- 应用初始化
- 状态管理
- 路由/屏幕切换
- 数据加载和持久化
- 设备检测（PC/移动端）

#### 测试用例

**TC-APP-001: 应用初始化**
- **步骤**: 
  1. 打开应用
  2. 检查初始状态
- **预期**: 
  - 应用正常加载
  - 显示加载状态（如果有）
  - 根据用户状态显示相应屏幕（profileSetup 或 entryPoint）

**TC-APP-002: 数据加载**
- **步骤**: 
  1. 打开应用（已有本地数据）
  2. 观察数据加载过程
- **预期**: 
  - 从localStorage加载数据
  - 合并默认设置
  - 恢复用户状态

**TC-APP-003: 设备检测**
- **步骤**: 
  1. 在PC浏览器打开
  2. 在移动浏览器打开
  3. 调整浏览器窗口大小
- **预期**: 
  - PC端显示PC界面
  - 移动端自动切换到MobileApp
  - 窗口大小变化时正确响应

**TC-APP-004: 屏幕切换**
- **步骤**: 
  1. 测试各个屏幕之间的切换
  2. 检查状态是否正确保存
- **预期**: 
  - 屏幕切换流畅
  - 状态正确传递
  - 无数据丢失

---

### 1.2 EntryPoint.tsx - 入口点组件

#### 功能点
- 世界选择
- 场景选择入口
- 导航功能

#### 测试用例

**TC-ENTRY-001: 显示世界列表**
- **步骤**: 
  1. 登录后进入入口点
  2. 查看世界列表
- **预期**: 
  - 显示用户的所有世界
  - 显示世界名称和描述
  - 可以点击进入世界

**TC-ENTRY-002: 创建新世界**
- **步骤**: 
  1. 点击"创建世界"按钮
  2. 填写世界信息
  3. 保存
- **预期**: 
  - 显示创建对话框
  - 创建成功后显示在世界列表
  - 可以立即使用

**TC-ENTRY-003: 进入世界**
- **步骤**: 
  1. 点击一个世界
  2. 观察页面跳转
- **预期**: 
  - 跳转到真实世界页面
  - 显示该世界的场景列表

---

### 1.3 RealWorldScreen.tsx - 真实世界页面

#### 功能点
- 场景列表显示
- 日记列表显示
- 创建场景
- 创建日记
- 场景和日记的切换

#### 测试用例

**TC-REAL-001: 显示场景列表**
- **步骤**: 
  1. 进入真实世界页面
  2. 查看场景列表
- **预期**: 
  - 显示该世界的所有场景
  - 显示场景卡片（名称、描述、封面图）
  - 可以点击进入场景

**TC-REAL-002: 创建场景**
- **步骤**: 
  1. 点击"创建场景"按钮
  2. 填写场景信息
  3. 上传封面图
  4. 保存
- **预期**: 
  - 打开场景创建模态框
  - 可以填写所有信息
  - 图片上传成功
  - 场景创建成功并显示在列表

**TC-REAL-003: 显示日记列表**
- **步骤**: 
  1. 切换到"日记"标签
  2. 查看日记列表
- **预期**: 
  - 显示所有日记
  - 按时间排序
  - 显示标题、日期、标签

**TC-REAL-004: 创建日记**
- **步骤**: 
  1. 点击"写日记"按钮
  2. 输入标题和内容
  3. 添加图片（可选）
  4. 添加标签（可选）
  5. 保存
- **预期**: 
  - 打开日记编辑界面
  - 可以输入所有信息
  - 保存成功
  - 显示在日记列表中

**TC-REAL-005: 编辑日记**
- **步骤**: 
  1. 点击一篇日记
  2. 修改内容
  3. 保存
- **预期**: 
  - 打开编辑界面
  - 显示原有内容
  - 修改保存成功

**TC-REAL-006: 删除日记**
- **步骤**: 
  1. 选择一篇日记
  2. 点击删除按钮
  3. 确认删除
- **预期**: 
  - 显示确认对话框
  - 删除成功
  - 从列表中移除

**TC-REAL-007: 日记探索功能**
- **步骤**: 
  1. 选择一篇日记
  2. 点击"探索"按钮
  3. 选择探索类型（镜像洞察/角色回响）
  4. 等待生成
- **预期**: 
  - 显示生成进度
  - 生成结果正确
  - 如果失败，显示友好提示

---

### 1.4 EraSelectionModal.tsx - 场景选择模态框

#### 功能点
- 显示预置场景
- 显示用户场景
- 场景筛选
- 选择场景

#### 测试用例

**TC-ERA-SEL-001: 显示场景列表**
- **步骤**: 
  1. 打开场景选择模态框
  2. 查看场景列表
- **预期**: 
  - 显示预置场景
  - 显示用户场景
  - 场景信息完整

**TC-ERA-SEL-002: 筛选场景**
- **步骤**: 
  1. 使用筛选功能（如果有）
  2. 查看筛选结果
- **预期**: 
  - 筛选功能正常
  - 结果准确

**TC-ERA-SEL-003: 选择场景**
- **步骤**: 
  1. 点击一个场景
  2. 观察页面跳转
- **预期**: 
  - 场景被选中
  - 跳转到角色选择页面
  - 场景信息正确传递

---

### 1.5 EraConstructorModal.tsx - 场景构建器

#### 功能点
- 创建场景
- 编辑场景
- 图片上传（本地/URL/生成）
- AI分析图片
- 场景信息验证

#### 测试用例

**TC-ERA-CREATE-001: 创建场景 - 基础信息**
- **步骤**: 
  1. 打开场景构建器
  2. 输入场景名称
  3. 输入场景描述
  4. 设置年份范围（可选）
  5. 保存
- **预期**: 
  - 所有字段可以正常输入
  - 必填字段验证生效
  - 保存成功

**TC-ERA-CREATE-002: 上传场景图片 - 本地文件**
- **步骤**: 
  1. 选择"上传图片"
  2. 选择本地图片文件
  3. 等待上传完成
- **预期**: 
  - 显示文件选择对话框
  - 显示上传进度
  - 上传成功
  - 图片预览正确

**TC-ERA-CREATE-003: 上传场景图片 - URL**
- **步骤**: 
  1. 选择"使用URL"
  2. 输入图片URL
  3. 确认
- **预期**: 
  - URL格式验证
  - 图片加载成功
  - 预览正确

**TC-ERA-CREATE-004: AI生成场景图片**
- **步骤**: 
  1. 选择"AI生成"
  2. 输入描述（可选）
  3. 点击生成
  4. 等待生成完成
- **预期**: 
  - 显示生成进度
  - 生成图片
  - 预览正确
  - 失败时显示友好提示

**TC-ERA-CREATE-005: AI分析图片生成描述**
- **步骤**: 
  1. 上传一张图片
  2. 点击"AI分析图片"
  3. 等待分析完成
- **预期**: 
  - 显示分析进度
  - 自动填充场景名称
  - 自动填充场景描述
  - 失败时显示友好提示

**TC-ERA-CREATE-006: 编辑场景**
- **步骤**: 
  1. 打开已有场景进行编辑
  2. 修改信息
  3. 保存
- **预期**: 
  - 显示原有信息
  - 可以修改所有字段
  - 保存成功

**TC-ERA-CREATE-007: 删除场景**
- **步骤**: 
  1. 在编辑模式下
  2. 点击删除按钮
  3. 确认删除
- **预期**: 
  - 显示确认对话框
  - 删除成功
  - 模态框关闭

**TC-ERA-CREATE-008: 表单验证**
- **步骤**: 
  1. 不填写必填字段
  2. 尝试保存
- **预期**: 
  - 显示验证错误
  - 不允许保存
  - 错误提示清晰

---

### 1.6 CharacterCard.tsx - 角色卡片

#### 功能点
- 显示角色信息
- 角色选择
- 角色操作（编辑/删除）

#### 测试用例

**TC-CHAR-CARD-001: 显示角色信息**
- **步骤**: 
  1. 查看角色卡片
- **预期**: 
  - 显示角色头像
  - 显示角色名称
  - 显示角色描述（如果有）
  - 显示主题色

**TC-CHAR-CARD-002: 选择角色**
- **步骤**: 
  1. 点击角色卡片
- **预期**: 
  - 跳转到对话页面
  - 角色信息正确传递

**TC-CHAR-CARD-003: 编辑角色**
- **步骤**: 
  1. 点击编辑按钮（如果有）
  2. 修改角色信息
  3. 保存
- **预期**: 
  - 打开角色编辑模态框
  - 显示原有信息
  - 保存成功

---

### 1.7 CharacterConstructorModal.tsx - 角色构建器

#### 功能点
- 创建角色
- 编辑角色
- 完整角色信息填写
- 头像上传/生成
- AI辅助功能

#### 测试用例

**TC-CHAR-CREATE-001: 创建角色 - 基础信息**
- **步骤**: 
  1. 打开角色构建器
  2. 填写基础信息（姓名、年龄、性别、角色、简介）
  3. 保存
- **预期**: 
  - 所有字段可以正常输入
  - 必填字段验证生效
  - 保存成功

**TC-CHAR-CREATE-002: 创建角色 - 完整信息**
- **步骤**: 
  1. 填写所有基础信息
  2. 上传头像
  3. 设置背景图
  4. 设置主题色和强调色
  5. 输入首条消息
  6. 输入系统指令
  7. 填写深度人格字段（MBTI、标签、说话风格、口头禅、秘密、动机、关系）
  8. 选择语音名称
  9. 保存
- **预期**: 
  - 所有字段可以正常填写
  - 信息保存完整
  - 角色创建成功

**TC-CHAR-CREATE-003: 上传角色头像**
- **步骤**: 
  1. 选择"上传头像"
  2. 选择图片文件
  3. 等待上传完成
- **预期**: 
  - 显示文件选择对话框
  - 显示上传进度
  - 上传成功
  - 头像预览正确

**TC-CHAR-CREATE-004: AI生成角色头像**
- **步骤**: 
  1. 填写角色基本信息
  2. 点击"AI生成头像"
  3. 等待生成完成
- **预期**: 
  - 显示生成进度
  - 生成头像
  - 预览正确
  - 失败时显示友好提示

**TC-CHAR-CREATE-005: 编辑角色**
- **步骤**: 
  1. 打开已有角色进行编辑
  2. 修改信息
  3. 保存
- **预期**: 
  - 显示原有信息
  - 可以修改所有字段
  - 保存成功

**TC-CHAR-CREATE-006: 表单验证**
- **步骤**: 
  1. 不填写必填字段
  2. 输入无效数据（如负数年龄）
  3. 尝试保存
- **预期**: 
  - 显示验证错误
  - 不允许保存
  - 错误提示清晰

---

### 1.8 ChatWindow.tsx - 对话窗口

#### 功能点
- 显示对话历史
- 发送消息
- 接收AI回复
- 剧本模式
- 对话风格
- 音频播放（如果有）

#### 测试用例

**TC-CHAT-001: 显示对话历史**
- **步骤**: 
  1. 进入对话页面
  2. 查看对话历史
- **预期**: 
  - 显示所有历史消息
  - 消息顺序正确
  - 用户消息和AI消息区分清晰
  - 时间戳正确

**TC-CHAT-002: 发送文本消息**
- **步骤**: 
  1. 在输入框中输入消息
  2. 点击发送或按Enter
- **预期**: 
  - 消息显示在对话窗口
  - 输入框清空
  - 显示发送时间

**TC-CHAT-003: 发送空消息**
- **步骤**: 
  1. 不输入任何内容
  2. 尝试发送
- **预期**: 
  - 不允许发送
  - 或显示提示

**TC-CHAT-004: 接收AI回复**
- **步骤**: 
  1. 发送一条消息
  2. 等待AI回复
- **预期**: 
  - 显示加载状态
  - 收到回复
  - 回复符合角色设定
  - 回复时间合理

**TC-CHAT-005: AI回复失败处理**
- **步骤**: 
  1. 模拟API失败（断开网络或使用无效API Key）
  2. 发送消息
  3. 观察错误处理
- **预期**: 
  - 显示错误提示
  - 提示信息友好
  - 提供重试选项
  - 不丢失用户消息

**TC-CHAT-006: 剧本模式 - 显示选项**
- **步骤**: 
  1. 选择剧本开始对话
  2. 查看选项按钮
- **预期**: 
  - 显示所有选项
  - 选项文本清晰
  - 可以点击选择

**TC-CHAT-007: 剧本模式 - 选择选项**
- **步骤**: 
  1. 点击一个选项
  2. 观察页面变化
- **预期**: 
  - 跳转到下一个节点
  - 显示新的场景描述
  - 显示新的选项
  - 状态正确保存

**TC-CHAT-008: 对话风格切换**
- **步骤**: 
  1. 在设置中切换对话风格
  2. 发送消息
  3. 查看回复格式
- **预期**: 
  - 新消息使用新风格
  - 风格切换生效

**TC-CHAT-009: 对话历史保存**
- **步骤**: 
  1. 进行多轮对话
  2. 退出对话页面
  3. 重新进入
- **预期**: 
  - 对话历史正确保存
  - 重新进入时正确加载
  - 所有消息完整

**TC-CHAT-010: 对话历史同步**
- **步骤**: 
  1. 在设备A上进行对话
  2. 在设备B上登录同一账号
  3. 进入同一角色的对话页面
- **预期**: 
  - 对话历史同步到设备B
  - 显示所有消息

---

### 1.9 ScenarioBuilder.tsx - 剧本构建器

#### 功能点
- 创建剧本
- 编辑剧本
- 添加/编辑节点
- 添加/编辑选项
- AI生成剧本
- 节点验证

#### 测试用例

**TC-SCENARIO-001: 创建剧本**
- **步骤**: 
  1. 打开剧本构建器
  2. 输入标题和描述
  3. 创建起始节点
  4. 添加节点内容
  5. 添加选项
  6. 设置选项跳转
  7. 保存
- **预期**: 
  - 所有操作正常
  - 剧本创建成功
  - 可以立即使用

**TC-SCENARIO-002: 添加节点**
- **步骤**: 
  1. 点击"添加节点"
  2. 输入节点标题
  3. 输入节点提示词
  4. 保存节点
- **预期**: 
  - 节点创建成功
  - 显示在节点列表中
  - 可以编辑和连接

**TC-SCENARIO-003: 添加选项**
- **步骤**: 
  1. 选择一个节点
  2. 点击"添加选项"
  3. 输入选项文本
  4. 选择跳转节点
  5. 保存
- **预期**: 
  - 选项添加成功
  - 显示在选项列表中
  - 跳转关系正确

**TC-SCENARIO-004: AI生成剧本**
- **步骤**: 
  1. 点击"AI生成"按钮
  2. 输入提示词
  3. 等待生成完成
- **预期**: 
  - 显示生成进度
  - 生成完整剧本
  - 包含多个节点和选项
  - 剧本结构合理

**TC-SCENARIO-005: 节点验证**
- **步骤**: 
  1. 创建一个节点
  2. 添加选项，但设置跳转到不存在的节点
  3. 尝试保存剧本
- **预期**: 
  - 显示验证错误
  - 不允许保存
  - 高亮显示错误选项

**TC-SCENARIO-006: 编辑剧本**
- **步骤**: 
  1. 打开已有剧本
  2. 修改标题
  3. 添加新节点
  4. 修改现有节点
  5. 保存
- **预期**: 
  - 显示原有内容
  - 可以修改所有内容
  - 保存成功

**TC-SCENARIO-007: 删除节点**
- **步骤**: 
  1. 选择一个节点
  2. 点击删除按钮
  3. 确认删除
- **预期**: 
  - 显示确认对话框
  - 节点删除成功
  - 相关选项也删除或标记错误

---

### 1.10 LoginModal.tsx - 登录模态框

#### 功能点
- 用户登录
- 用户注册
- 微信登录
- 表单验证
- 错误处理

#### 测试用例

**TC-LOGIN-001: 用户登录 - 成功**
- **步骤**: 
  1. 打开登录模态框
  2. 输入正确的用户名和密码
  3. 点击登录
- **预期**: 
  - 登录成功
  - 模态框关闭
  - 跳转到主页面
  - Token保存

**TC-LOGIN-002: 用户登录 - 失败**
- **步骤**: 
  1. 输入错误的用户名或密码
  2. 点击登录
- **预期**: 
  - 显示错误提示
  - 不关闭模态框
  - 不保存Token

**TC-LOGIN-003: 用户注册 - 成功**
- **步骤**: 
  1. 切换到注册标签
  2. 填写所有必填信息
  3. 输入有效邀请码（如果需要）
  4. 点击注册
- **预期**: 
  - 注册成功
  - 自动登录
  - 跳转到主页面

**TC-LOGIN-004: 用户注册 - 密码不一致**
- **步骤**: 
  1. 输入密码
  2. 输入不同的确认密码
  3. 点击注册
- **预期**: 
  - 显示错误提示
  - 不允许注册

**TC-LOGIN-005: 用户注册 - 邮箱格式验证**
- **步骤**: 
  1. 输入无效邮箱格式
  2. 点击注册
- **预期**: 
  - 显示错误提示
  - 不允许注册

**TC-LOGIN-006: 微信登录 - 二维码生成**
- **步骤**: 
  1. 点击微信登录
  2. 等待二维码生成
- **预期**: 
  - 显示二维码
  - 开始轮询状态

**TC-LOGIN-007: 微信登录 - 扫码成功**
- **步骤**: 
  1. 使用微信扫描二维码
  2. 在手机上确认登录
  3. 等待状态更新
- **预期**: 
  - 状态更新为"confirmed"
  - 自动登录成功
  - 跳转到主页面

---

### 1.11 SettingsModal.tsx - 设置模态框

#### 功能点
- 显示设置选项
- 修改设置
- AI模型配置
- 对话风格设置
- 设置保存

#### 测试用例

**TC-SETTINGS-001: 显示设置**
- **步骤**: 
  1. 打开设置模态框
  2. 查看所有设置选项
- **预期**: 
  - 显示所有设置
  - 显示当前值
  - 分类清晰

**TC-SETTINGS-002: 修改AI模型配置**
- **步骤**: 
  1. 进入AI模型设置
  2. 修改API Key
  3. 修改模型名称
  4. 保存
- **预期**: 
  - 可以修改所有配置
  - 保存成功
  - 设置立即生效

**TC-SETTINGS-003: 切换对话风格**
- **步骤**: 
  1. 选择对话风格
  2. 保存
  3. 进入对话测试
- **预期**: 
  - 风格切换成功
  - 新对话使用新风格

**TC-SETTINGS-004: 修改自动生成设置**
- **步骤**: 
  1. 切换自动生成头像开关
  2. 切换自动生成场景开关
  3. 切换自动生成日记图片开关
  4. 保存
- **预期**: 
  - 开关状态正确
  - 保存成功
  - 设置生效

---

### 1.12 MailboxModal.tsx - 邮箱模态框

#### 功能点
- 显示邮件列表
- 阅读邮件
- 标记已读
- 删除邮件

#### 测试用例

**TC-MAIL-001: 显示邮件列表**
- **步骤**: 
  1. 打开邮箱
  2. 查看邮件列表
- **预期**: 
  - 显示所有邮件
  - 未读邮件有标记
  - 显示发件人、主题、时间

**TC-MAIL-002: 阅读邮件**
- **步骤**: 
  1. 点击一封邮件
  2. 查看邮件内容
- **预期**: 
  - 显示完整邮件内容
  - 邮件标记为已读
  - 未读数量更新

**TC-MAIL-003: 删除邮件**
- **步骤**: 
  1. 选择一封邮件
  2. 点击删除按钮
  3. 确认删除
- **预期**: 
  - 邮件被删除
  - 从列表中移除

---

### 1.13 MembershipModal.tsx - 会员模态框

#### 功能点
- 显示会员信息
- 显示订阅计划
- 创建支付订单
- 查询订单状态

#### 测试用例

**TC-MEMBERSHIP-001: 显示会员信息**
- **步骤**: 
  1. 打开会员模态框
  2. 查看会员信息
- **预期**: 
  - 显示会员类型
  - 显示积分余额
  - 显示会员状态
  - 显示到期时间

**TC-MEMBERSHIP-002: 显示订阅计划**
- **步骤**: 
  1. 切换到订阅计划标签
  2. 查看计划列表
  3. 切换计费周期
- **预期**: 
  - 显示所有计划
  - 显示价格和功能
  - 按计费周期筛选正确

**TC-MEMBERSHIP-003: 创建支付订单**
- **步骤**: 
  1. 选择一个订阅计划
  2. 选择支付方式
  3. 点击购买
  4. 确认订单
- **预期**: 
  - 创建订单成功
  - 显示支付二维码或链接
  - 开始轮询订单状态

---

### 1.14 RecycleBinModal.tsx - 回收站模态框

#### 功能点
- 显示回收站内容
- 恢复项目
- 永久删除

#### 测试用例

**TC-RECYCLE-001: 显示回收站**
- **步骤**: 
  1. 打开回收站
  2. 查看回收站内容
- **预期**: 
  - 显示所有已删除的项目
  - 按类型分类显示
  - 显示删除时间

**TC-RECYCLE-002: 恢复项目**
- **步骤**: 
  1. 选择一个项目
  2. 点击恢复按钮
  3. 确认恢复
- **预期**: 
  - 项目恢复成功
  - 从回收站移除
  - 显示在原位置

**TC-RECYCLE-003: 永久删除**
- **步骤**: 
  1. 选择一个项目
  2. 点击永久删除按钮
  3. 确认删除
- **预期**: 
  - 显示确认对话框
  - 项目被永久删除
  - 无法恢复

---

### 1.15 AdminScreen.tsx - 管理后台

#### 功能点
- 管理员登录
- 系统数据管理（世界/场景/角色/剧本）
- 资源管理
- 邀请码管理
- 订阅计划管理
- 系统配置

#### 测试用例

**TC-ADMIN-001: 管理员登录**
- **步骤**: 
  1. 访问管理后台
  2. 输入管理员密码
  3. 登录
- **预期**: 
  - 登录成功
  - 显示管理后台界面
  - Token保存

**TC-ADMIN-002: 系统世界管理**
- **步骤**: 
  1. 进入系统世界管理
  2. 创建/编辑/删除世界
- **预期**: 
  - 所有操作成功
  - 数据正确保存

**TC-ADMIN-003: 系统场景管理**
- **步骤**: 
  1. 进入系统场景管理
  2. 创建/编辑/删除场景
- **预期**: 
  - 所有操作成功
  - 数据正确保存

**TC-ADMIN-004: 系统角色管理**
- **步骤**: 
  1. 进入系统角色管理
  2. 创建/编辑/删除角色
- **预期**: 
  - 所有操作成功
  - 数据正确保存

**TC-ADMIN-005: 资源管理**
- **步骤**: 
  1. 进入资源管理
  2. 上传资源
  3. 编辑资源信息
  4. 删除资源
- **预期**: 
  - 上传成功
  - 编辑成功
  - 删除成功

**TC-ADMIN-006: 邀请码管理**
- **步骤**: 
  1. 进入邀请码管理
  2. 生成邀请码
  3. 查看使用情况
- **预期**: 
  - 生成成功
  - 显示所有邀请码
  - 显示使用状态

---

## 🔄 二、用户流程测试

### 2.1 新用户注册流程

**TC-FLOW-001: 完整注册流程**
- **步骤**: 
  1. 打开应用
  2. 点击注册
  3. 填写注册信息
  4. 输入邀请码（如果需要）
  5. 注册成功
  6. 自动登录
  7. 进入欢迎页面
  8. 创建第一个世界
  9. 创建第一个场景
  10. 创建第一个角色
  11. 开始第一次对话
- **预期**: 
  - 所有步骤流畅
  - 无错误
  - 数据正确保存

---

### 2.2 老用户登录流程

**TC-FLOW-002: 完整登录流程**
- **步骤**: 
  1. 打开应用
  2. 点击登录
  3. 输入用户名和密码
  4. 登录成功
  5. 加载用户数据
  6. 进入入口点
  7. 选择世界
  8. 选择场景
  9. 选择角色
  10. 继续对话
- **预期**: 
  - 所有步骤流畅
  - 数据正确加载
  - 状态正确恢复

---

### 2.3 创建完整世界流程

**TC-FLOW-003: 创建世界到对话**
- **步骤**: 
  1. 登录
  2. 创建新世界
  3. 创建新场景
  4. 创建新角色（完整信息）
  5. 开始对话
  6. 进行多轮对话
  7. 创建剧本
  8. 使用剧本进行对话
- **预期**: 
  - 所有步骤流畅
  - 数据正确保存
  - 功能正常

---

### 2.4 日记功能流程

**TC-FLOW-004: 日记创建到探索**
- **步骤**: 
  1. 进入真实世界页面
  2. 创建日记
  3. 添加图片
  4. 添加标签
  5. 保存日记
  6. 探索日记（镜像洞察）
  7. 探索日记（角色回响）
- **预期**: 
  - 所有步骤流畅
  - 数据正确保存
  - AI功能正常

---

## 🎨 三、UI/UX测试

### 3.1 界面布局

**TC-UI-001: 响应式布局**
- **步骤**: 
  1. 在不同屏幕尺寸下测试
  2. 调整浏览器窗口大小
- **预期**: 
  - 布局自适应
  - 无元素重叠
  - 文字可读

**TC-UI-002: 颜色和主题**
- **步骤**: 
  1. 查看各个页面
  2. 检查颜色使用
- **预期**: 
  - 颜色搭配合理
  - 主题色正确应用
  - 对比度足够

**TC-UI-003: 字体和文字**
- **步骤**: 
  1. 查看各个页面
  2. 检查文字显示
- **预期**: 
  - 字体大小合适
  - 文字清晰可读
  - 无文字截断

---

### 3.2 交互反馈

**TC-UI-004: 按钮状态**
- **步骤**: 
  1. 测试各种按钮
  2. 检查hover、active状态
- **预期**: 
  - 按钮状态清晰
  - 交互反馈及时

**TC-UI-005: 加载状态**
- **步骤**: 
  1. 执行需要等待的操作
  2. 检查加载提示
- **预期**: 
  - 显示加载状态
  - 加载提示清晰

**TC-UI-006: 错误提示**
- **步骤**: 
  1. 触发各种错误
  2. 检查错误提示
- **预期**: 
  - 错误提示友好
  - 提示信息清晰
  - 提供解决建议

---

### 3.3 动画和过渡

**TC-UI-007: 页面切换动画**
- **步骤**: 
  1. 切换各个页面
  2. 观察动画效果
- **预期**: 
  - 动画流畅
  - 无卡顿

**TC-UI-008: 模态框动画**
- **步骤**: 
  1. 打开/关闭模态框
  2. 观察动画效果
- **预期**: 
  - 动画流畅
  - 过渡自然

---

## 💾 四、状态管理测试

### 4.1 状态持久化

**TC-STATE-001: 本地存储**
- **步骤**: 
  1. 进行各种操作
  2. 刷新页面
  3. 检查状态恢复
- **预期**: 
  - 状态正确保存到localStorage
  - 刷新后状态正确恢复

**TC-STATE-002: 服务器同步**
- **步骤**: 
  1. 登录状态
  2. 创建/修改数据
  3. 检查服务器同步
- **预期**: 
  - 数据同步到服务器
  - 同步失败有提示

**TC-STATE-003: 离线支持**
- **步骤**: 
  1. 断开网络
  2. 进行各种操作
  3. 恢复网络
  4. 检查数据同步
- **预期**: 
  - 离线时可以操作
  - 数据保存在本地
  - 恢复网络后自动同步

---

### 4.2 状态一致性

**TC-STATE-004: 多组件状态同步**
- **步骤**: 
  1. 在一个组件中修改数据
  2. 检查其他相关组件
- **预期**: 
  - 状态正确同步
  - 所有组件更新

**TC-STATE-005: 状态冲突处理**
- **步骤**: 
  1. 模拟多设备同时编辑
  2. 检查冲突处理
- **预期**: 
  - 检测到冲突
  - 提供解决机制

---

## 🐛 五、错误处理测试

### 5.1 网络错误

**TC-ERROR-001: 网络中断**
- **步骤**: 
  1. 断开网络
  2. 执行需要网络的操作
- **预期**: 
  - 显示网络错误提示
  - 提供重试选项
  - 不丢失数据

**TC-ERROR-002: 请求超时**
- **步骤**: 
  1. 模拟慢网络
  2. 执行操作
- **预期**: 
  - 显示超时提示
  - 提供重试选项

**TC-ERROR-003: 服务器错误**
- **步骤**: 
  1. 模拟服务器500错误
  2. 执行操作
- **预期**: 
  - 显示友好错误提示
  - 提供重试选项

---

### 5.2 数据错误

**TC-ERROR-004: 无效数据**
- **步骤**: 
  1. 输入无效数据
  2. 尝试保存
- **预期**: 
  - 显示验证错误
  - 不允许保存

**TC-ERROR-005: 数据丢失**
- **步骤**: 
  1. 清除localStorage
  2. 刷新页面
- **预期**: 
  - 应用正常启动
  - 使用默认状态

---

### 5.3 API错误

**TC-ERROR-006: API认证失败**
- **步骤**: 
  1. 使用无效Token
  2. 执行操作
- **预期**: 
  - 检测到401错误
  - 清除Token
  - 跳转到登录页

**TC-ERROR-007: API配额不足**
- **步骤**: 
  1. 模拟API配额不足
  2. 执行AI相关操作
- **预期**: 
  - 显示友好提示
  - 提供解决方案

---

## 📱 六、移动端测试

### 6.1 移动端适配

**TC-MOBILE-001: 移动端布局**
- **步骤**: 
  1. 在移动设备上打开应用
  2. 检查各个页面布局
- **预期**: 
  - 布局适配移动端
  - 按钮大小适合触摸
  - 文字大小合适

**TC-MOBILE-002: 触摸交互**
- **步骤**: 
  1. 测试各种触摸操作
  2. 检查响应
- **预期**: 
  - 触摸响应及时
  - 无误触
  - 手势操作正常

**TC-MOBILE-003: 移动端功能**
- **步骤**: 
  1. 测试所有功能在移动端
  2. 检查功能完整性
- **预期**: 
  - 所有功能可用
  - 功能完整

---

## 🔍 七、边界条件测试

### 7.1 数据边界

**TC-BOUNDARY-001: 空数据**
- **步骤**: 
  1. 测试空列表显示
  2. 测试空状态处理
- **预期**: 
  - 显示空状态提示
  - 提供操作引导

**TC-BOUNDARY-002: 大量数据**
- **步骤**: 
  1. 创建大量数据（100+）
  2. 测试列表显示
- **预期**: 
  - 列表正常显示
  - 性能可接受
  - 使用分页或虚拟滚动

**TC-BOUNDARY-003: 超长文本**
- **步骤**: 
  1. 输入超长文本
  2. 测试显示和处理
- **预期**: 
  - 文本正确显示
  - 有长度限制
  - 超出部分处理合理

---

### 7.2 操作边界

**TC-BOUNDARY-004: 快速操作**
- **步骤**: 
  1. 快速连续点击按钮
  2. 快速切换页面
- **预期**: 
  - 无重复操作
  - 无状态混乱

**TC-BOUNDARY-005: 并发操作**
- **步骤**: 
  1. 同时执行多个操作
  2. 检查状态一致性
- **预期**: 
  - 状态正确
  - 无冲突

---

## 📊 八、测试执行清单

### 8.1 核心功能测试清单

- [ ] 用户认证（登录/注册/微信登录）
- [ ] 世界管理（创建/编辑/删除）
- [ ] 场景管理（创建/编辑/删除/图片上传）
- [ ] 角色管理（创建/编辑/删除/完整信息）
- [ ] 对话功能（发送/接收/历史/剧本）
- [ ] 剧本构建器（创建/编辑/节点/选项）
- [ ] 日记功能（创建/编辑/删除/探索）
- [ ] 邮箱功能（接收/阅读/删除）
- [ ] 会员系统（信息/订阅/支付）
- [ ] 回收站（查看/恢复/永久删除）
- [ ] 管理后台（所有管理功能）
- [ ] 设置（所有设置选项）

### 8.2 UI/UX测试清单

- [ ] 响应式布局
- [ ] 颜色和主题
- [ ] 字体和文字
- [ ] 按钮状态
- [ ] 加载状态
- [ ] 错误提示
- [ ] 动画和过渡

### 8.3 状态管理测试清单

- [ ] 本地存储
- [ ] 服务器同步
- [ ] 离线支持
- [ ] 状态一致性
- [ ] 状态冲突处理

### 8.4 错误处理测试清单

- [ ] 网络错误
- [ ] 数据错误
- [ ] API错误
- [ ] 边界条件

### 8.5 移动端测试清单

- [ ] 移动端布局
- [ ] 触摸交互
- [ ] 移动端功能

---

## 🎯 九、测试优先级

### P0 - 必须测试（核心功能）
1. 用户认证
2. 世界/场景/角色管理
3. 对话功能
4. 数据同步
5. 错误处理

### P1 - 重要测试（扩展功能）
1. 剧本构建器
2. 日记功能
3. 邮箱功能
4. 会员系统
5. UI/UX

### P2 - 可选测试（优化功能）
1. 动画效果
2. 高级功能
3. 性能优化

---

## 📝 十、测试报告模板

### 测试执行记录

**测试日期**: _______________  
**测试人员**: _______________  
**测试环境**: 
- 浏览器: _______________
- 操作系统: _______________
- 设备: _______________

**测试结果**:
- 总用例数: _______________
- 已执行: _______________
- 通过: _______________
- 失败: _______________
- 阻塞: _______________
- 通过率: _______________

**主要问题**:
1. _______________
2. _______________
3. _______________

**建议**:
1. _______________
2. _______________
3. _______________

---

## 🚀 十一、测试执行建议

### 第一阶段：核心组件测试（3-5天）
1. App.tsx
2. EntryPoint.tsx
3. RealWorldScreen.tsx
4. ChatWindow.tsx
5. LoginModal.tsx

### 第二阶段：构建器组件测试（2-3天）
1. EraConstructorModal.tsx
2. CharacterConstructorModal.tsx
3. ScenarioBuilder.tsx

### 第三阶段：功能组件测试（2-3天）
1. SettingsModal.tsx
2. MailboxModal.tsx
3. MembershipModal.tsx
4. RecycleBinModal.tsx

### 第四阶段：流程和集成测试（2-3天）
1. 用户流程测试
2. UI/UX测试
3. 状态管理测试
4. 错误处理测试
5. 移动端测试

**总计**: 约2周

---

**文档版本**: v1.0  
**最后更新**: 2025年12月  
**测试工程师**: AI Assistant


